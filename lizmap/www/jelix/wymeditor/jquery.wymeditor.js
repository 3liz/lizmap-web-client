/*!
WYMeditor - v1.0.0-beta.9

Home page: http://wymeditor.github.io/wymeditor/

Copyright (c) 2014 Jean-Francois Hovinne;
Licensed MIT, GPLv2
*/

if(function(a,b){"use strict";var c,d;if(a.uaMatch=function(a){a=a.toLowerCase();var b=/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],c=/(ipad)/.exec(a)||/(iphone)/.exec(a)||/(android)/.exec(a)||/(windows phone)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/i.exec(a)||[];return{browser:b[3]||b[1]||"",version:b[2]||"0",platform:c[0]||""}},c=a.uaMatch(b.navigator.userAgent),d={},c.browser&&(d[c.browser]=!0,d.version=c.version,d.versionNumber=parseInt(c.version)),c.platform&&(d[c.platform]=!0),(d.android||d.ipad||d.iphone||d["windows phone"])&&(d.mobile=!0),(d.cros||d.mac||d.linux||d.win)&&(d.desktop=!0),(d.chrome||d.opr||d.safari)&&(d.webkit=!0),d.rv){var e="msie";c.browser=e,d[e]=!0}if(d.opr){var f="opera";c.browser=f,d[f]=!0}if(d.safari&&d.android){var g="android";c.browser=g,d[g]=!0}d.name=c.browser,d.platform=c.platform,a.browser=d}(jQuery,window),"undefined"==typeof WYMeditor)var WYMeditor={};!function(){if("undefined"==typeof window.console&&"undefined"==typeof console){var a,b=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"],c=function(){};for(WYMeditor.console={},a=0;a<b.length;a+=1)WYMeditor.console[b[a]]=c}else"undefined"!=typeof console?WYMeditor.console=console:window.console.firebug?WYMeditor.console=window.console:window.console&&(WYMeditor.console=window.console)}(),jQuery.extend(WYMeditor,{A:"a",ALT:"alt",BASE_PATH:"{Wym_Base_Path}",BLOCKQUOTE:"blockquote",BODY:"body",BOLD:"Bold",CLASS:"class",CLASSES:"{Wym_Classes}",CLASSES_ITEMS:"{Wym_Classes_Items}",CLASS_NAME:"{Wym_Class_Name}",CLASS_TITLE:"{Wym_Class_Title}",CONTAINERS:"{Wym_Containers}",CONTAINERS_ITEMS:"{Wym_Containers_Items}",CONTAINER_CLASS:"{Wym_Container_Class}",CONTAINER_NAME:"{Wym_Container_Name}",CONTAINER_TITLE:"{Wym_Containers_Title}",CREATE_LINK:"CreateLink",DIALOG_BODY:"{Wym_Dialog_Body}",DIALOG_IMAGE:"Image",DIALOG_LINK:"Link",DIALOG_PASTE:"Paste_From_Word",DIALOG_TABLE:"Table",DIALOG_TITLE:"{Wym_Dialog_Title}",DIRECTION:"{Wym_Direction}",DIV:"div",FORMAT_BLOCK:"FormatBlock",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HREF:"href",HTML:"{Wym_Html}",IFRAME:"{Wym_Iframe}",IFRAME_BASE_PATH:"{Wym_Iframe_Base_Path}",IFRAME_DEFAULT:"iframe/default/",IMG:"img",INDENT:"Indent",INDEX:"{Wym_Index}",INSERT_HTML:"InsertHTML",INSERT_IMAGE:"InsertImage",INSERT_ORDEREDLIST:"InsertOrderedList",INSERT_TABLE:"InsertTable",INSERT_UNORDEREDLIST:"InsertUnorderedList",INSTANCES:[],ITALIC:"Italic",JQUERY_PATH:"{Wym_Jquery_Path}",LI:"li",LOGO:"{Wym_Logo}",NAME:"name",NBSP:"Â ",NEWLINE:"\n",OL:"ol",OUTDENT:"Outdent",P:"p",PASTE:"Paste",PRE:"pre",PREVIEW:"Preview",REL:"rel",SKINS:[],SRC:"src",STATUS:"{Wym_Status}",STRING:"string",STRINGS:[],TABLE:"table",TD:"td",TH:"th",TITLE:"title",TOGGLE_HTML:"ToggleHtml",TOOLS:"{Wym_Tools}",TOOLS_ITEMS:"{Wym_Tools_Items}",TOOL_CLASS:"{Wym_Tool_Class}",TOOL_NAME:"{Wym_Tool_Name}",TOOL_TITLE:"{Wym_Tool_Title}",TR:"tr",UL:"ul",UNLINK:"Unlink",VERSION:"1.0.0-beta.9",WYM_INDEX:"wym_index",WYM_PATH:"{Wym_Wym_Path}",MAIN_CONTAINERS:["blockquote","div","h1","h2","h3","h4","h5","h6","p","pre"],FORBIDDEN_MAIN_CONTAINERS:["a","b","em","i","span","strong","sub","sup"],BLOCKS:["address","blockquote","dd","div","dl","dt","fieldset","form","h1","h2","h3","h4","h5","h6","hr","li","noscript","ol","p","pre","table","tbody","td","tfoot","th","thead","tr","ul"],BLOCKING_ELEMENTS:["blockquote","pre","table"],NON_CONTAINING_ELEMENTS:["br","col","hr","img"],NO_CARET_ELEMENTS:["blockquote","br","col","colgroup","dl","hr","img","ol","table","tbody","tfoot","thead","tr","ul"],INLINE_ELEMENTS:["a","abbr","acronym","b","bdo","big","br","button","cite","code","dfn","em","i","img","input","kbd","label","map","object","q","samp","script","select","small","span","strong","sub","sup","textarea","tt","var"],NON_BLOCKING_ELEMENTS:["div","h1","h2","h3","h4","h5","h6","p"],LIST_TYPE_ELEMENTS:["ol","ul"],HEADING_ELEMENTS:["h1","h2","h3","h4","h5","h6"],POTENTIAL_LIST_ELEMENTS:["blockquote","div","h1","h2","h3","h4","h5","h6","p","pre","td"],POTENTIAL_TABLE_INSERT_ELEMENTS:["blockquote","div","h1","h2","h3","h4","h5","h6","li","p","pre"],INLINE_TABLE_INSERTION_ELEMENTS:["li"],SELECTABLE_TABLE_ELEMENTS:["caption","td","th"],BLOCKING_ELEMENT_SPACER_CLASS:"wym-blocking-element-spacer",EDITOR_ONLY_CLASS:"wym-editor-only",CLASSES_REMOVED_BY_PARSER:["apple-style-span"],KEY:{B:66,BACKSPACE:8,COMMAND:224,CTRL:17,CURSOR:[37,38,39,40],DELETE:46,DOWN:40,END:35,ENTER:13,HOME:36,I:73,LEFT:37,R:82,RIGHT:39,TAB:9,UP:38},POTENTIAL_BLOCK_ELEMENT_CREATION_KEYS:[8,13,37,38,39,40,46],EVENTS:{postBlockMaybeCreated:"wym-postBlockMaybeCreated",postIframeInitialization:"wym-postIframeInitialization"},NODE:{ELEMENT:1,ATTRIBUTE:2,TEXT:3},editor:function(a,b){if(jQuery.getWymeditorByTextarea(a[0]))throw"It seems that this textarea already belongs to a WYMeditor instance.";var c=this;c._index=WYMeditor.INSTANCES.push(c)-1,c._element=a,c._options=b,c._options.wymPath=c._options.wymPath||WYMeditor.computeWymPath(),c._options.basePath=c._options.basePath||WYMeditor.computeBasePath(c._options.wymPath),c._options.jQueryPath=c._options.jQueryPath||WYMeditor.computeJqueryPath(),c._options.iframeBasePath=c._options.iframeBasePath||c._options.basePath+WYMeditor.IFRAME_DEFAULT,c._init()}}),jQuery.fn.wymeditor=function(a){var b=this;return a=jQuery.extend({html:"",basePath:!1,wymPath:!1,iframeBasePath:!1,jQueryPath:!1,skin:"default",lang:"en",direction:"ltr",customCommands:[],structureRules:{defaultRootContainer:"p"},boxHtml:String()+"<div class='wym_box'><div class='wym_area_top'>"+WYMeditor.TOOLS+"</div><div class='wym_area_left'></div><div class='wym_area_right'>"+WYMeditor.CONTAINERS+WYMeditor.CLASSES+"</div><div class='wym_area_main'>"+WYMeditor.HTML+WYMeditor.IFRAME+WYMeditor.STATUS+"</div><div class='wym_area_bottom'>"+WYMeditor.LOGO+"</div></div>",logoHtml:String()+'<a class="wym_wymeditor_link" href="http://www.wymeditor.org/">WYMeditor</a>',iframeHtml:String()+'<div class="wym_iframe wym_section"><iframe src="'+WYMeditor.IFRAME_BASE_PATH+'wymiframe.html"></iframe></div>',toolsHtml:String()+'<div class="wym_tools wym_section"><h2>{Tools}</h2><ul>'+WYMeditor.TOOLS_ITEMS+"</ul></div>",toolsItemHtml:String()+'<li class="'+WYMeditor.TOOL_CLASS+'"><a href="#" name="'+WYMeditor.TOOL_NAME+'" title="'+WYMeditor.TOOL_TITLE+'">'+WYMeditor.TOOL_TITLE+"</a></li>",toolsItems:[{name:"Bold",title:"Strong",css:"wym_tools_strong"},{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},{name:"Superscript",title:"Superscript",css:"wym_tools_superscript"},{name:"Subscript",title:"Subscript",css:"wym_tools_subscript"},{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},{name:"InsertUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list"},{name:"Indent",title:"Indent",css:"wym_tools_indent"},{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},{name:"Undo",title:"Undo",css:"wym_tools_undo"},{name:"Redo",title:"Redo",css:"wym_tools_redo"},{name:"CreateLink",title:"Link",css:"wym_tools_link wym_opens_dialog"},{name:"Unlink",title:"Unlink",css:"wym_tools_unlink"},{name:"InsertImage",title:"Image",css:"wym_tools_image wym_opens_dialog"},{name:"InsertTable",title:"Table",css:"wym_tools_table wym_opens_dialog"},{name:"Paste",title:"Paste_From_Word",css:"wym_tools_paste wym_opens_dialog"},{name:"ToggleHtml",title:"HTML",css:"wym_tools_html"},{name:"Preview",title:"Preview",css:"wym_tools_preview wym_opens_dialog"}],containersHtml:String()+'<div class="wym_containers wym_section"><h2>{Containers}</h2><ul>'+WYMeditor.CONTAINERS_ITEMS+"</ul></div>",containersItemHtml:String()+'<li class="'+WYMeditor.CONTAINER_CLASS+'"><a href="#" name="'+WYMeditor.CONTAINER_NAME+'">'+WYMeditor.CONTAINER_TITLE+"</a></li>",containersItems:[{name:"P",title:"Paragraph",css:"wym_containers_p"},{name:"H1",title:"Heading_1",css:"wym_containers_h1"},{name:"H2",title:"Heading_2",css:"wym_containers_h2"},{name:"H3",title:"Heading_3",css:"wym_containers_h3"},{name:"H4",title:"Heading_4",css:"wym_containers_h4"},{name:"H5",title:"Heading_5",css:"wym_containers_h5"},{name:"H6",title:"Heading_6",css:"wym_containers_h6"},{name:"PRE",title:"Preformatted",css:"wym_containers_pre"},{name:"BLOCKQUOTE",title:"Blockquote",css:"wym_containers_blockquote"},{name:"TH",title:"Table_Header",css:"wym_containers_th"}],classesHtml:String()+'<div class="wym_classes wym_section"><h2>{Classes}</h2><ul>'+WYMeditor.CLASSES_ITEMS+"</ul></div>",classesItemHtml:String()+'<li class="wym_classes_'+WYMeditor.CLASS_NAME+'"><a href="#" name="'+WYMeditor.CLASS_NAME+'">'+WYMeditor.CLASS_TITLE+"</a></li>",classesItems:[],statusHtml:String()+'<div class="wym_status wym_section"><h2>{Status}</h2></div>',htmlHtml:String()+'<div class="wym_html wym_section"><h2>{Source_Code}</h2><textarea class="wym_html_val"></textarea></div>',boxSelector:".wym_box",toolsSelector:".wym_tools",toolsListSelector:" ul",containersSelector:".wym_containers",classesSelector:".wym_classes",htmlSelector:".wym_html",iframeSelector:".wym_iframe iframe",iframeBodySelector:".wym_iframe",statusSelector:".wym_status",toolSelector:".wym_tools a",containerSelector:".wym_containers a",classSelector:".wym_classes a",htmlValSelector:".wym_html_val",hrefSelector:".wym_href",srcSelector:".wym_src",titleSelector:".wym_title",relSelector:".wym_rel",altSelector:".wym_alt",textSelector:".wym_text",rowsSelector:".wym_rows",colsSelector:".wym_cols",captionSelector:".wym_caption",summarySelector:".wym_summary",submitSelector:"form",cancelSelector:".wym_cancel",previewSelector:"",dialogTypeSelector:".wym_dialog_type",dialogLinkSelector:".wym_dialog_link",dialogImageSelector:".wym_dialog_image",dialogTableSelector:".wym_dialog_table",dialogPasteSelector:".wym_dialog_paste",dialogPreviewSelector:".wym_dialog_preview",updateSelector:".wymupdate",updateEvent:"click",dialogFeatures:"menubar=no,titlebar=no,toolbar=no,resizable=no,width=560,height=300,top=0,left=0",dialogFeaturesPreview:"menubar=no,titlebar=no,toolbar=no,resizable=no,scrollbars=yes,width=560,height=300,top=0,left=0",dialogHtml:String()+'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html dir="'+WYMeditor.DIRECTION+'"><head><title>'+WYMeditor.DIALOG_TITLE+'</title><script type="text/javascript" src="'+WYMeditor.JQUERY_PATH+'"></script><script type="text/javascript" src="'+WYMeditor.WYM_PATH+'"></script></head>'+WYMeditor.DIALOG_BODY+"</html>",dialogLinkHtml:String()+'<body class="wym_dialog wym_dialog_link"  onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_LINK+'" /><legend>{Link}</legend><div class="row"><label>{URL}</label><input type="text" class="wym_href" value="" size="40" autofocus="autofocus" /></div><div class="row"><label>{Title}</label><input type="text" class="wym_title" value="" size="40" /></div><div class="row"><label>{Relationship}</label><input type="text" class="wym_rel" value="" size="40" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogImageHtml:String()+'<body class="wym_dialog wym_dialog_image" onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_IMAGE+'" /><legend>{Image}</legend><div class="row"><label>{URL}</label><input type="text" class="wym_src" value="" size="40" autofocus="autofocus" /></div><div class="row"><label>{Alternative_Text}</label><input type="text" class="wym_alt" value="" size="40" /></div><div class="row"><label>{Title}</label><input type="text" class="wym_title" value="" size="40" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogTableHtml:String()+'<body class="wym_dialog wym_dialog_table" onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_TABLE+'" /><legend>{Table}</legend><div class="row"><label>{Caption}</label><input type="text" class="wym_caption" value="" size="40" /></div><div class="row"><label>{Summary}</label><input type="text" class="wym_summary" value="" size="40" /></div><div class="row"><label>{Number_Of_Rows}</label><input type="text" class="wym_rows" value="3" size="3" /></div><div class="row"><label>{Number_Of_Cols}</label><input type="text" class="wym_cols" value="2" size="3" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogPasteHtml:String()+'<body class="wym_dialog wym_dialog_paste" onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"><form><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_PASTE+'" /><fieldset><legend>{Paste_From_Word}</legend><div class="row"><textarea class="wym_text" rows="10" cols="50" autofocus="autofocus"></textarea></div><div class="row"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogPreviewHtml:String()+'<body class="wym_dialog wym_dialog_preview" onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"></body>',stringDelimiterLeft:"{",stringDelimiterRight:"}",preInit:null,preBind:null,postInit:null,preInitDialog:null,postInitDialog:null},a),b.each(function(){var b=this;b._wym=new WYMeditor.editor(jQuery(b),a)})},jQuery.extend({wymeditors:function(a){return WYMeditor.INSTANCES[a]}}),jQuery.extend({getWymeditorByTextarea:function(a){var b;if(!a||!a.tagName||"textarea"!==a.tagName.toLowerCase())throw"jQuery.getWymeditorByTextarea requires a textarea element.";for(b=0;b<WYMeditor.INSTANCES.length;b++)if(a===WYMeditor.INSTANCES[b]._element[0])return WYMeditor.INSTANCES[b];return!1}}),jQuery.extend({copyPropsFromObjectToObject:function(a,b,c){var d,e,f,g={};for(d=0;d<c.length;d++)e=c[d],f=a[e],g[e]=f;jQuery.extend(b,g)}}),WYMeditor.isInternetExplorerPre11=function(){return jQuery.browser.msie&&jQuery.browser.versionNumber<11?!0:!1},WYMeditor.isInternetExplorer11OrNewer=function(){return jQuery.browser.msie&&jQuery.browser.versionNumber>=11?!0:!1},WYMeditor.computeWymPath=function(){var a=jQuery(jQuery.grep(jQuery("script"),function(a){return a.src?a.src.match(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/)||a.src.match(/\/core\.js(\?.*)?$/):null}));return a.length>0?a.attr("src"):(WYMeditor.console.warn("Error determining wymPath. No base WYMeditor file located."),WYMeditor.console.warn("Assuming wymPath to be the current URL"),WYMeditor.console.warn("Please pass a correct wymPath option"),"")},WYMeditor.computeBasePath=function(a){var b=a.lastIndexOf("/");return a.substr(0,b+1)},WYMeditor.computeJqueryPath=function(){return jQuery(jQuery.grep(jQuery("script"),function(a){return a.src&&a.src.match(/jquery(-(.*)){0,1}(\.pack|\.min|\.packed)?\.js(\?.*)?$/)})).attr("src")},WYMeditor.INIT_DIALOG=function(a){var b,c=window.opener.WYMeditor.INSTANCES[a],d=c.selectedContainer(),e=jQuery(c._options.dialogTypeSelector).val(),f=c.uniqueStamp();jQuery(window).bind("beforeunload",function(){c.focusOnDocument()}),e===WYMeditor.DIALOG_LINK&&(d&&d.tagName&&d.tagName.toLowerCase!==WYMeditor.A&&(d=jQuery(d).parentsOrSelf(WYMeditor.A)),!d&&c._selectedImage&&(d=jQuery(c._selectedImage).parentsOrSelf(WYMeditor.A))),jQuery.isFunction(c._options.preInitDialog)&&c._options.preInitDialog(c,window),d&&(jQuery(c._options.hrefSelector).val(jQuery(d).attr(WYMeditor.HREF)),jQuery(c._options.srcSelector).val(jQuery(d).attr(WYMeditor.SRC)),jQuery(c._options.titleSelector).val(jQuery(d).attr(WYMeditor.TITLE)),jQuery(c._options.relSelector).val(jQuery(d).attr(WYMeditor.REL)),jQuery(c._options.altSelector).val(jQuery(d).attr(WYMeditor.ALT))),c._selectedImage&&(jQuery(c._options.dialogImageSelector+" "+c._options.srcSelector).val(jQuery(c._selectedImage).attr(WYMeditor.SRC)),jQuery(c._options.dialogImageSelector+" "+c._options.titleSelector).val(jQuery(c._selectedImage).attr(WYMeditor.TITLE)),jQuery(c._options.dialogImageSelector+" "+c._options.altSelector).val(jQuery(c._selectedImage).attr(WYMeditor.ALT))),jQuery(c._options.dialogLinkSelector+" "+c._options.submitSelector).submit(function(){var a,b=jQuery(c._options.hrefSelector).val();b.length>0&&(d[0]&&d[0].tagName.toLowerCase()===WYMeditor.A?a=d:(c._exec(WYMeditor.CREATE_LINK,f),a=jQuery("a[href="+f+"]",c._doc.body)),a.attr(WYMeditor.HREF,b),a.attr(WYMeditor.TITLE,jQuery(c._options.titleSelector).val()),a.attr(WYMeditor.REL,jQuery(c._options.relSelector).val())),window.close()}),jQuery(c._options.dialogImageSelector+" "+c._options.submitSelector).submit(function(){var a,b=jQuery(c._options.srcSelector).val();b.length>0&&(c._exec(WYMeditor.INSERT_IMAGE,f),a=jQuery("img[src$="+f+"]",c._doc.body),a.attr(WYMeditor.SRC,b),a.attr(WYMeditor.TITLE,jQuery(c._options.titleSelector).val()),a.attr(WYMeditor.ALT,jQuery(c._options.altSelector).val())),window.close()}),b=WYMeditor.MAKE_TABLE_ONCLICK(c),jQuery(c._options.dialogTableSelector+" "+c._options.submitSelector).submit(b),jQuery(c._options.dialogPasteSelector+" "+c._options.submitSelector).submit(function(){var a=jQuery(c._options.textSelector).val();c.paste(a),window.close()}),jQuery(c._options.dialogPreviewSelector+" "+c._options.previewSelector).html(c.html()),jQuery(c._options.cancelSelector).mousedown(function(){window.close()}),jQuery.isFunction(c._options.postInitDialog)&&c._options.postInitDialog(c,window)},WYMeditor.MAKE_TABLE_ONCLICK=function(a){var b=function(){var b=jQuery(a._options.rowsSelector).val(),c=jQuery(a._options.colsSelector).val(),d=jQuery(a._options.captionSelector).val(),e=jQuery(a._options.summarySelector).val();a.insertTable(b,c,d,e),window.close()};return b},jQuery.fn.isPhantomNode=function(){var a=this;return a[0].nodeType===WYMeditor.NODE.TEXT?!/[^\t\n\r ]/.test(a[0].data):!1},jQuery.fn.nextContentsUntil=function(a,b){var c,d=this,e=[],f=d.get(0);if(a=a?a:"",b=b?b:"",!f)return jQuery();for(f=f.nextSibling;f&&!jQuery(f).is(a);)e.push(f),f=f.nextSibling;return c=jQuery(e),b?c.filter(b):c},jQuery.fn.nextAllContents=function(){var a=this;return jQuery(a).nextContentsUntil("","")},jQuery.fn.prevContentsUntil=function(a,b){var c,d=this,e=[],f=d.get(0);if(a=a?a:"",b=b?b:"",!f)return jQuery();for(f=f.previousSibling;f&&!jQuery(f).is(a);)e.push(f),f=f.previousSibling;return c=jQuery(e),b?c.filter(b):c},jQuery.fn.prevAllContents=function(){var a=this;return jQuery(a).prevContentsUntil("","")},WYMeditor.isPhantomNode=function(a){return a.nodeType===WYMeditor.NODE.TEXT?!/[^\t\n\r ]/.test(a.data):!1},WYMeditor.isPhantomString=function(a){return!/[^\t\n\r ]/.test(a)},jQuery.fn.parentsOrSelf=function(a){var b,c=this;return b=jQuery.fn.addBack?"addBack":"andSelf",a?c.parents()[b](a):c.parents()[b]()},WYMeditor.changeNodeType=function(a,b){var c,d,e=a.attributes;for(jQuery(a).wrapInner("<"+b+">"),c=jQuery(a).children().get(0),d=0;d<e.length;d++)e[d].specified&&c.setAttribute(e[d].nodeName,e[d].nodeValue);return jQuery(a).contents().unwrap(),c},WYMeditor.Helper={replaceAll:function(a,b,c){var d=new RegExp(b,"g");return a.replace(d,c)},insertAt:function(a,b,c){return a.substr(0,c)+b+a.substring(c)},trim:function(a){return a.replace(/^(\s*)|(\s*)$/gm,"")},contains:function(a,b){var c;for(c=0;c<a.length;c+=1)if(a[c]===b)return!0;return!1},indexOf:function(a,b){var c,d=-1;for(c=0;c<a.length;c+=1)if(a[c]===b){d=c;break}return d},findByName:function(a,b){var c,d;for(c=0;c<a.length;c+=1)if(d=a[c],d.name===b)return d;return null}},WYMeditor.editor.prototype._init=function(){var wym=this,WymClass=!1,SaxListener,prop,h,iframeHtml,boxHtml,aTools,sTools,oTool,sTool,i,aClasses,sClasses,oClass,sClass,aContainers,sContainers,sContainer,oContainer;if(WYMeditor.isInternetExplorerPre11()?WymClass=new WYMeditor.WymClassTridentPre7(wym):WYMeditor.isInternetExplorer11OrNewer()?WymClass=new WYMeditor.WymClassTrident7(wym):jQuery.browser.mozilla?WymClass=new WYMeditor.WymClassGecko(wym):(jQuery.browser.safari||jQuery.browser.webkit||jQuery.browser.chrome)&&(WymClass=new WYMeditor.WymClassWebKit("537.36"===jQuery.browser.version?wym:wym)),WymClass!==!1){jQuery.isFunction(wym._options.preInit)&&wym._options.preInit(wym),wym.parser=null,wym.helper=null,SaxListener=new WYMeditor.XhtmlSaxListener,wym.parser=new WYMeditor.XhtmlParser(SaxListener),wym.helper=new WYMeditor.XmlHelper;for(prop in WymClass)wym[prop]=WymClass[prop];for(wym._box=jQuery(wym._element).hide().after(wym._options.boxHtml).next().addClass("wym_box_"+wym._index),jQuery.isFunction(jQuery.fn.data)&&(jQuery.data(wym._box.get(0),WYMeditor.WYM_INDEX,wym._index),jQuery.data(wym._element.get(0),WYMeditor.WYM_INDEX,wym._index)),h=WYMeditor.Helper,iframeHtml=wym._options.iframeHtml,iframeHtml=h.replaceAll(iframeHtml,WYMeditor.INDEX,wym._index),iframeHtml=h.replaceAll(iframeHtml,WYMeditor.IFRAME_BASE_PATH,wym._options.iframeBasePath),boxHtml=jQuery(wym._box).html(),boxHtml=h.replaceAll(boxHtml,WYMeditor.LOGO,wym._options.logoHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS,wym._options.toolsHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS,wym._options.containersHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES,wym._options.classesHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.HTML,wym._options.htmlHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.IFRAME,iframeHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.STATUS,wym._options.statusHtml),aTools=eval(wym._options.toolsItems),sTools="",i=0;i<aTools.length;i+=1)oTool=aTools[i],sTool="",oTool.name&&oTool.title&&(sTool=wym._options.toolsItemHtml),sTool=h.replaceAll(sTool,WYMeditor.TOOL_NAME,oTool.name),sTool=h.replaceAll(sTool,WYMeditor.TOOL_TITLE,wym._options.stringDelimiterLeft+oTool.title+wym._options.stringDelimiterRight),sTool=h.replaceAll(sTool,WYMeditor.TOOL_CLASS,oTool.css),sTools+=sTool;for(boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS_ITEMS,sTools),aClasses=eval(wym._options.classesItems),sClasses="",i=0;i<aClasses.length;i+=1)oClass=aClasses[i],sClass="",oClass.name&&oClass.title&&(sClass=wym._options.classesItemHtml),sClass=h.replaceAll(sClass,WYMeditor.CLASS_NAME,oClass.name),sClass=h.replaceAll(sClass,WYMeditor.CLASS_TITLE,oClass.title),sClasses+=sClass;for(boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES_ITEMS,sClasses),aContainers=eval(wym._options.containersItems),sContainers="",i=0;i<aContainers.length;i+=1)oContainer=aContainers[i],sContainer="",oContainer.name&&oContainer.title&&(sContainer=wym._options.containersItemHtml),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_NAME,oContainer.name),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_TITLE,wym._options.stringDelimiterLeft+oContainer.title+wym._options.stringDelimiterRight),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_CLASS,oContainer.css),sContainers+=sContainer;boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS_ITEMS,sContainers),boxHtml=wym.replaceStrings(boxHtml),jQuery(wym._box).html(boxHtml),jQuery(wym._box).find(wym._options.htmlSelector).hide(),wym.documentStructureManager=new WYMeditor.DocumentStructureManager(wym,wym._options.structureRules.defaultRootContainer),wym.iframeInitialized=!1,wym._iframe=jQuery(wym._box).find("iframe")[0],jQuery(wym._iframe).load(function(){wym._onEditorIframeLoad(wym)}),wym._element.attr("data-wym-initialized","yes"),wym.initSkin()}},WYMeditor.editor.prototype._assignWymDoc=function(){var a=this;a._doc=a._iframe.contentDocument},WYMeditor.editor.prototype._isDesignModeOn=function(){var a=this;return"On"===a._doc.designMode?!0:!1},WYMeditor.editor.prototype._onEditorIframeLoad=function(a){a._assignWymDoc(),a._doc.designMode="On",a._afterDesignModeOn()},WYMeditor.editor.prototype.getButtons=function(){var a,b,c=this;return a=[c._options.toolSelector,c._options.containerSelector,c._options.classSelector].join(", "),b=jQuery(c._box).find(a)},WYMeditor.editor.prototype.focusOnDocument=function(){var a=this,b=a._iframe.contentWindow;b.focus()},WYMeditor.editor.prototype._bindFocusOnDocumentToButtons=function(){var a=this,b=a.getButtons();b=b.parent().not(".wym_opens_dialog").children("a"),b.click(function(){a.focusOnDocument()})},WYMeditor.editor.prototype._UiQuirks=function(){},WYMeditor.editor.prototype._afterDesignModeOn=function(){var a=this;a.iframeInitialized!==!0&&(a._assignWymDoc(),a._doc.title=a._index,jQuery("html",a._doc).attr("dir",a._options.direction),a._docEventQuirks(),a._initializeDocumentContent(),jQuery.isFunction(a._options.preBind)&&a._options.preBind(a),a._bindUIEvents(),a.iframeInitialized=!0,jQuery.isFunction(a._options.postInit)&&a._options.postInit(a),a._bindFocusOnDocumentToButtons(),a._UiQuirks(),a.listen(),jQuery(a._element).trigger(WYMeditor.EVENTS.postIframeInitialization,a))},WYMeditor.editor.prototype._initializeDocumentContent=function(){var a=this;a.html(a._options.html?a._options.html:a._element[0].value)},WYMeditor.editor.prototype._docEventQuirks=function(){},WYMeditor.editor.prototype._bindUIEvents=function(){var wym=this,$html_val;jQuery(wym._box).find(wym._options.toolSelector).click(function(){var a=this;return wym.exec(jQuery(a).attr(WYMeditor.NAME)),!1}),jQuery(wym._box).find(wym._options.containerSelector).click(function(){var a=this;return wym.mainContainer(jQuery(a).attr(WYMeditor.NAME)),!1}),$html_val=jQuery(wym._box).find(wym._options.htmlValSelector),$html_val.keyup(function(){var a=this;wym.$body().html(jQuery(a).val())}),$html_val.focus(function(){var a=this;jQuery(a).toggleClass("hasfocus")}),$html_val.blur(function(){var a=this;jQuery(a).toggleClass("hasfocus")}),jQuery(wym._box).find(wym._options.classSelector).click(function(){var classButton=this,aClasses=eval(wym._options.classesItems),sName=jQuery(classButton).attr(WYMeditor.NAME),oClass=WYMeditor.Helper.findByName(aClasses,sName),jqexpr;return oClass&&(jqexpr=oClass.expr,wym.toggleClass(sName,jqexpr)),!1}),jQuery(wym._options.updateSelector).bind(wym._options.updateEvent,function(){wym.update()})},WYMeditor.editor.prototype.box=function(){var a=this;return a._box},WYMeditor.editor.prototype.vanish=function(){var a,b=this,c=WYMeditor.INSTANCES;for(b._box.remove(),b._element.removeAttr("data-wym-initialized").attr("data-wym-vanished","").show(),c.splice(b._index,1),a=0;a<c.length;a++)c[a]._index=a},WYMeditor.editor.prototype.rawHtml=function(a){var b=this;return"string"!=typeof a?b.$body().html():(b.$body().html(a),void b.update())},WYMeditor.editor.prototype.html=function(a){var b=this;return"string"!=typeof a?b.parser.parse(b.rawHtml()):void b.rawHtml(b.parser.parse(a))},WYMeditor.editor.prototype.exec=function(a){var b,c,d=this;switch(a){case WYMeditor.CREATE_LINK:b=d.mainContainer(),(b||d._selectedImage)&&d.dialog(WYMeditor.DIALOG_LINK);break;case WYMeditor.INSERT_IMAGE:d.dialog(WYMeditor.DIALOG_IMAGE);break;case WYMeditor.INSERT_TABLE:d.dialog(WYMeditor.DIALOG_TABLE);break;case WYMeditor.PASTE:d.dialog(WYMeditor.DIALOG_PASTE);break;case WYMeditor.TOGGLE_HTML:d.update(),d.toggleHtml();break;case WYMeditor.PREVIEW:d.dialog(WYMeditor.PREVIEW,d._options.dialogFeaturesPreview);break;case WYMeditor.INSERT_ORDEREDLIST:d.insertOrderedlist();break;case WYMeditor.INSERT_UNORDEREDLIST:d.insertUnorderedlist();break;case WYMeditor.INDENT:d.indent();break;case WYMeditor.OUTDENT:d.outdent();break;default:c=!1,jQuery.each(d._options.customCommands,function(){var b=this;return a===b.name?(c=!0,b.run.apply(d),!1):void 0}),c||d._exec(a)}},WYMeditor.editor.prototype.selection=function(){var a,b=this,c=b._iframe;return window.rangy&&!rangy.initialized&&rangy.init(),a=rangy.getIframeSelection(c)},WYMeditor.editor.prototype.nodeAfterSel=function(){var a=this,b=a.selection();if(b.anchorNode.tagName&&-1===jQuery.inArray(b.anchorNode.tagName.toLowerCase(),WYMeditor.NON_CONTAINING_ELEMENTS)){if(0===b.anchorNode.childNodes.length)return;return b.anchorNode.childNodes[b.anchorOffset]}if(b.focusNode.nodeType===WYMeditor.NODE.TEXT&&b.focusNode.data.length===b.focusOffset){if(!b.focusNode.nextSibling)return;return b.focusNode.nextSibling}return b.focusNode},WYMeditor.editor.prototype.selectedContainer=function(){var a=this,b=a.selection().focusNode;return b.nodeType===WYMeditor.NODE.TEXT||b.tagName&&jQuery.inArray(b.tagName.toLowerCase(),WYMeditor.NON_CONTAINING_ELEMENTS)>-1?b.parentNode:b},WYMeditor.editor.prototype.selected=function(){var a=this;return WYMeditor.console.warn("The function WYMeditor.editor.selected() is deprecated. Use WYMeditor.editor.selectedContainer"),a.selectedContainer()},WYMeditor.editor.prototype.selection_collapsed=function(){var a=this,b=a.selection(),c=!1;return jQuery.each(b.getAllRanges(),function(){var a=this;return a.collapsed?(c=!0,!1):void 0}),c},WYMeditor.editor.prototype.selected_contains=function(a){var b=this,c=b.selection(),d=[];return jQuery.each(c.getAllRanges(),function(){var b=this;jQuery.each(b.getNodes(),function(){var b=this;jQuery(b).is(a)&&d.push(b)})}),d},WYMeditor.editor.prototype.selected_parents_contains=function(a){var b=this,c=jQuery([]),d=jQuery(b.selectedContainer());return d.is(a)&&(c=c.add(d)),c=c.add(d.parents(a))},WYMeditor.editor.prototype.isBlockNode=function(a){return a.tagName&&jQuery.inArray(a.tagName.toLowerCase(),WYMeditor.BLOCKS)>-1?!0:!1},WYMeditor.editor.prototype.isInlineNode=function(a){return a.nodeType===WYMeditor.NODE.TEXT||jQuery.inArray(a.tagName.toLowerCase(),WYMeditor.INLINE_ELEMENTS)>-1?!0:!1},WYMeditor.editor.prototype.isListNode=function(a){return a.tagName&&jQuery.inArray(a.tagName.toLowerCase(),WYMeditor.LIST_TYPE_ELEMENTS)>-1?!0:!1},WYMeditor.editor.prototype.unwrapIfMeaninglessSpan=function(a){var b,c,d,e,f=jQuery(a),g=["_wym_visited","dataFld","onmouseup","contentEditable","dataFormatAs","dataSrc","tabIndex","value","hideFocus","disabled"],h=["",void 0,!1,null,"null"];if(!a||"undefined"==typeof a.tagName||"span"!==a.tagName.toLowerCase())return!1;if(b=a.attributes,0===b.length)return f.before(f.contents()),f.remove(),!0;for(c=0;c<b.length;c++)if(d=b[c].name,e=f.attr(d),-1===jQuery.inArray(d,g)&&-1===jQuery.inArray(e,h))return!1;return f.before(f.contents()),f.remove(),!0},WYMeditor.editor.prototype.mainContainer=function(a){var b,c,d,e,f,g,h,i=this,j=null;if("undefined"==typeof a)return jQuery(i.selectedContainer()).parentsOrSelf().not("html, body, blockquote").last()[0];if(a.toLowerCase()===WYMeditor.TH){switch(j=i.selectedContainer(),j.tagName.toLowerCase()){case WYMeditor.TD:case WYMeditor.TH:break;default:b=[WYMeditor.TD,WYMeditor.TH],j=i.findUp(i.selectedContainer(),b)}null!==j&&(a=WYMeditor.TD,j.tagName.toLowerCase()===WYMeditor.TD&&(a=WYMeditor.TH),i.restoreSelectionAfterManipulation(function(){return i.switchTo(j,a,!1),!0}),i.update())}else if(b=[WYMeditor.P,WYMeditor.DIV,WYMeditor.H1,WYMeditor.H2,WYMeditor.H3,WYMeditor.H4,WYMeditor.H5,WYMeditor.H6,WYMeditor.PRE,WYMeditor.BLOCKQUOTE],j=i.findUp(i.selectedContainer(),b)){if(a.toLowerCase()===WYMeditor.BLOCKQUOTE)if(d=i.findUp(i.selectedContainer(),WYMeditor.BLOCKQUOTE),null===d)c=i._doc.createElement(a),j.parentNode.insertBefore(c,j),c.appendChild(j),i.setCaretIn(c.firstChild);else{for(e=d.childNodes,f=e.length,f>0&&(g=e.item(0)),h=0;f>h;h+=1)d.parentNode.insertBefore(e.item(0),d);d.parentNode.removeChild(d),g&&i.setCaretIn(g)}else i.restoreSelectionAfterManipulation(function(){return i.switchTo(j,a,!1),!0});i.update()}return!1},WYMeditor.editor.prototype.container=function(a){var b=this;return WYMeditor.console.warn("The function `WYMeditor.editor.container` is deprecated. Use `WYMeditor.editor.mainContainer`."),b.mainContainer(a)
},WYMeditor.editor.prototype.isForbiddenMainContainer=function(a){return jQuery.inArray(a.toLowerCase(),WYMeditor.FORBIDDEN_MAIN_CONTAINERS)>-1},WYMeditor.editor.prototype.keyCanCreateBlockElement=function(a){return jQuery.inArray(a,WYMeditor.POTENTIAL_BLOCK_ELEMENT_CREATION_KEYS)>-1},WYMeditor.editor.prototype.toggleClass=function(a,b){var c,d=this;c=jQuery(d._selectedImage?d._selectedImage:d.selectedContainer()),c=c.parentsOrSelf(b),c.toggleClass(a),c.attr(WYMeditor.CLASS)||c.removeAttr(d._class)},WYMeditor.editor.prototype.findUp=function(a,b){if("undefined"==typeof a||null===a)return null;"#text"===a.nodeName&&(a=a.parentNode);var c,d,e=a.tagName.toLowerCase();if(typeof b===WYMeditor.STRING)for(;e!==b&&e!==WYMeditor.BODY;)a=a.parentNode,e=a.tagName.toLowerCase();else for(c=!1;!c&&e!==WYMeditor.BODY;){for(d=0;d<b.length;d+=1)if(e===b[d]){c=!0;break}if(!c){if(a=a.parentNode,null===a)return null;e=a.tagName.toLowerCase()}}return e===WYMeditor.BODY?null:a},WYMeditor.editor.prototype.switchTo=function(a,b,c){var d,e,f=this,g=jQuery(a),h=a.attributes;if(!a.tagName)throw"This must be an element.";if("img"===a.tagName.toLowerCase())throw"Will not change the type of an 'img' element.";if(d=f._doc.createElement(b),jQuery(d).append(a.childNodes),g.replaceWith(d),!c)for(e=0;e<h.length;++e)d.setAttribute(h.item(e).nodeName,h.item(e).value);return d},WYMeditor.editor.prototype.replaceStrings=function(a){var b,c=this;if(!WYMeditor.STRINGS[c._options.lang])return WYMeditor.console.error("WYMeditor: language '"+c._options.lang+"' not found."),WYMeditor.console.error("Unable to perform i10n."),a;for(b in WYMeditor.STRINGS[c._options.lang])WYMeditor.STRINGS[c._options.lang].hasOwnProperty(b)&&(a=WYMeditor.Helper.replaceAll(a,c._options.stringDelimiterLeft+b+c._options.stringDelimiterRight,WYMeditor.STRINGS[c._options.lang][b]));return a},WYMeditor.editor.prototype.encloseString=function(a){var b=this;return b._options.stringDelimiterLeft+a+b._options.stringDelimiterRight},WYMeditor.editor.prototype.status=function(a){var b=this;jQuery(b._box).find(b._options.statusSelector).html(a)},WYMeditor.editor.prototype.update=function(){var a,b=this;a=b.html(),jQuery(b._element).val(a),jQuery(b._box).find(b._options.htmlValSelector).not(".hasfocus").val(a),b.fixBodyHtml()},WYMeditor.editor.prototype.fixBodyHtml=function(){var a=this;a.spaceBlockingElements(),a.fixDoubleBr(),jQuery(a._element).trigger(WYMeditor.EVENTS.postBlockMaybeCreated,a)},WYMeditor.editor.prototype.spaceBlockingElements=function(){var a,b,c,d,e,f,g=this,h=WYMeditor.DocumentStructureManager.CONTAINERS_BLOCKING_NAVIGATION.join(", "),i=g.$body(),j=i.children();a=jQuery.browser.mozilla?'<br class="'+WYMeditor.BLOCKING_ELEMENT_SPACER_CLASS+" "+WYMeditor.EDITOR_ONLY_CLASS+'" _moz_editor_bogus_node="TRUE" _moz_dirty=""/>':'<br class="'+WYMeditor.BLOCKING_ELEMENT_SPACER_CLASS+" "+WYMeditor.EDITOR_ONLY_CLASS+'"/>',j.length>0&&(b=jQuery(j[0]),c=jQuery(j[j.length-1]),b.is(h)&&b.before(a),!c.is(h)||jQuery.browser.msie&&jQuery.browser.version<"7.0"||c.after(a)),d=g._getBlockSepSelector(),i.find(d).before(a),e=g._getBlockInListSepSelector(),f=i.find(e),f.each(function(){var b=this,c=jQuery(b);c.next(h).length||c.next("br").length||c.after(a)})},WYMeditor.editor.prototype._getBlockSepSelector=function(){var a,b=this,c=[],d=WYMeditor.DocumentStructureManager.CONTAINERS_BLOCKING_NAVIGATION;return"undefined"!=typeof b._blockSpacersSel?b._blockSpacersSel:(a=jQuery.grep(b.documentStructureManager.structureRules.validRootContainers,function(a){return-1===jQuery.inArray(a,d)}),jQuery.each(d,function(a,b){jQuery.each(d,function(a,d){c.push(b+" + "+d)})}),jQuery.each(d,function(b,d){jQuery.each(a,function(a,b){c.push(d+" + "+b),c.push(b+" + "+d)})}),b._blockSpacersSel=c.join(", "),b._blockSpacersSel)},WYMeditor.editor.prototype._getBlockInListSepSelector=function(){var a=this,b=[];return"undefined"!=typeof a._blockInListSpacersSel?a._blockInListSpacersSel:(jQuery.each(WYMeditor.LIST_TYPE_ELEMENTS,function(a,c){jQuery.each(WYMeditor.BLOCKING_ELEMENTS,function(a,d){b.push(c+" "+d)})}),a._blockInListSpacersSel=b.join(", "),a._blockInListSpacersSel)},WYMeditor.editor.prototype.fixDoubleBr=function(){var a,b=this,c=b.$body();c.children("br + br").filter(":not(pre br)").remove(),c.find("p + br").next("p").prev("br").remove(),a=c.find("p + br").slice(-1),a.length>0&&0===a.next().length&&a.remove()},WYMeditor.editor.prototype.dialog=function(a,b,c){var d,e,f,g=this,h=b||g._options.dialogFeatures,i=window.open("","dialog",h),j=WYMeditor.Helper;if(i){switch(d="",a){case WYMeditor.DIALOG_LINK:d=g._options.dialogLinkHtml;break;case WYMeditor.DIALOG_IMAGE:d=g._options.dialogImageHtml;break;case WYMeditor.DIALOG_TABLE:d=g._options.dialogTableHtml;break;case WYMeditor.DIALOG_PASTE:d=g._options.dialogPasteHtml;break;case WYMeditor.PREVIEW:d=g._options.dialogPreviewHtml;break;default:d=c}e=g._options.dialogHtml,e=j.replaceAll(e,WYMeditor.BASE_PATH,g._options.basePath),e=j.replaceAll(e,WYMeditor.DIRECTION,g._options.direction),e=j.replaceAll(e,WYMeditor.WYM_PATH,g._options.wymPath),e=j.replaceAll(e,WYMeditor.JQUERY_PATH,g._options.jQueryPath),e=j.replaceAll(e,WYMeditor.DIALOG_TITLE,g.encloseString(a)),e=j.replaceAll(e,WYMeditor.DIALOG_BODY,d),e=j.replaceAll(e,WYMeditor.INDEX,g._index),e=g.replaceStrings(e),f=i.document,f.write(e),f.close()}},WYMeditor.editor.prototype.toggleHtml=function(){var a=this;jQuery(a._box).find(a._options.htmlSelector).toggle()},WYMeditor.editor.prototype.uniqueStamp=function(){var a=new Date;return"wym-"+a.getTime()},WYMeditor.editor.prototype._handleMultilineBlockContainerPaste=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p;for(f=jQuery(o),h="p",b.is("li")&&(h="li"),c.splitBoundaries(),o=a.findUp(c.startContainer,["p","h1","h2","h3","h4","h5","h6","li"]),p=o.tagName,i=[],j=[],jQuery(o).contents().each(function(a,b){k=c.compareNode(b),k===c.NODE_BEFORE||k===c.NODE_BEFORE_AND_AFTER&&c.startOffset===c.startContainer.length?i.push(b):j.push(b)}),e=0;e<i.length;e++)jQuery(i[e]).remove();for(e=0;e<j.length;e++)jQuery(j[e]).remove();for(i.length>0&&jQuery(o).prepend(i),j.length>0&&(l=jQuery("<"+p+"></"+p+">",a._doc),l.insertAfter(jQuery(o)),l.append(j)),m=d.splice(0,1)[0],n=m.split(WYMeditor.NEWLINE).join("<br />"),jQuery(o).html(jQuery(o).html()+n),f=jQuery(o),e=0;e<d.length;e++)g="<"+h+">"+d[e].split(WYMeditor.NEWLINE).join("<br />")+"</"+h+">",f=jQuery(g,a._doc).insertAfter(f)},WYMeditor.editor.prototype.paste=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.selectedContainer(),l=jQuery(k),m="",n=!1,o=j.selection(),p=o.getRangeAt(0);if(p.collapse(!0),b=a.split(new RegExp(WYMeditor.NEWLINE+"{2,}","g")),1===b.length&&(n=!0),"undefined"==typeof k||k&&k.tagName.toLowerCase()===WYMeditor.BODY)if(n)f=jQuery("<p>"+b[0]+"</p>",j._doc).appendTo(j._doc.body);else for(e="p",g=b.length-1;g>=0;g-=1)for(m="<"+e+">"+b[g].split(WYMeditor.NEWLINE).join("<br />")+"</"+e+">",i=jQuery(m,j._doc),c=i.length-1;c>=0;c--)p.insertNode(i[c]);else if(n||l.is("pre"))h=j._doc.createTextNode(a),p.insertNode(h);else if(l.is("p,h1,h2,h3,h4,h5,h6,li"))j._handleMultilineBlockContainerPaste(j,l,p,b);else for(d=a.split(WYMeditor.NEWLINE),g=d.length-1;g>=0;g-=1)h=j._doc.createTextNode(d[g]),p.insertNode(h),g>0&&p.insertNode(jQuery("<br />",j._doc).get(0))},WYMeditor.editor.prototype.insert=function(a){var b,c,d=this,e=d.selection();null!==e.focusNode?(b=e.getRangeAt(0),c=b.createContextualFragment(a),b.deleteContents(),b.insertNode(c)):d.paste(a)},WYMeditor.editor.prototype.wrap=function(a,b){var c=this;c.insert(a+c._iframe.contentWindow.getSelection().toString()+b)},WYMeditor.editor.prototype.unwrap=function(){var a=this;a.insert(a._iframe.contentWindow.getSelection().toString())},WYMeditor.editor.prototype.canSetCaretBefore=function(a){var b=this;if(a.nodeType===WYMeditor.NODE.TEXT)return!0;if(a.tagName&&"br"===a.tagName.toLowerCase()){if(!a.previousSibling)return!0;if(a.previousSibling.tagName&&"br"===a.previousSibling.tagName.toLowerCase())return!0;if(b.isBlockNode(a.previousSibling))return!0;if(a.previousSibling.nodeType===WYMeditor.NODE.TEXT)return!0}return!1},WYMeditor.editor.prototype.setCaretBefore=function(a){var b=this,c=rangy.createRange(b._doc),d=b.selection();if(!b.canSetCaretBefore(a))throw"Can't set caret before this node.";c.selectNode(a),c.collapse(!0),d.setSingleRange(c)},WYMeditor.editor.prototype.canSetCaretIn=function(a){var b=this;if(a.nodeType===WYMeditor.NODE.TEXT||a.tagName&&jQuery.inArray(a.tagName.toLowerCase(),WYMeditor.NO_CARET_ELEMENTS)>-1)return!1;if(b.isInlineNode(a)){if(0===a.childNodes.length)return!1;WYMeditor.console.warn("Can set a non-collapsed selection. Rangy issue #209.")}return!0},WYMeditor.editor.prototype.setCaretIn=function(a){var b=this,c=rangy.createRange(b._doc),d=b.selection();if(!b.canSetCaretIn(a))throw"The element must be able to contain other elements. Perhaps  you would like to use `setCaretBefore`, instead.";c.selectNodeContents(a),b.isInlineNode(a)?WYMeditor.console.warn("Can't set a collapsed selection. Setting a non-collapsed selection, instead. Rangy issue #209."):c.collapse(!0),d.setSingleRange(c)},WYMeditor.editor.prototype.splitListItemContents=function(a){var b,c,d,e=!1,f={itemContents:[],sublistContents:[]};for(b=a.contents(),c=0;c<b.length;c++)d=b.get(c),e||jQuery(d).is("ol,ul")?(e=!0,f.sublistContents.push(d)):f.itemContents.push(d);return f},WYMeditor.editor.prototype.joinAdjacentLists=function(a,b){var c;"undefined"!=typeof a&&"undefined"!=typeof b&&a.nextSibling===b&&a.tagName.toLowerCase()===b.tagName.toLowerCase()&&(c=jQuery(b).contents(),c.unwrap(),c.detach(),jQuery(a).append(c))},WYMeditor.editor.prototype._indentSingleItem=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=this;b=jQuery(a),c=b.parent()[0].tagName.toLowerCase(),f=n.splitListItemContents(b),h=jQuery(f.sublistContents),g=jQuery(f.itemContents),i=b.prev().filter("li"),0===i.length&&(d='<li class="spacer_li"></li>',b.before(d),i=b.prev()),j=i.contents().last().filter("ol,ul"),j.length>0?(j.append(b),h.detach(),i.append(h),k=h.first(),n.joinAdjacentLists(j.get(0),k.get(0))):(h.length>0?(h.detach(),i.append(h),j=h.first()):(e="<"+c+"></"+c+">",i.append(e),j=i.contents().last()),j.prepend(b)),b.next().is(".spacer_li")&&(l=b.next(".spacer_li"),m=l.contents(),m.detach(),b.append(m),l.remove())},WYMeditor.editor.prototype._outdentSingleItem=function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this;if(b=jQuery(a),c=b.parent()[0].tagName.toLowerCase(),b.parent().parent().is("ol,ul,li")){if(b.parent().parent().is("li")||(WYMeditor.console.log("Attempting to fix invalid list nesting before outdenting."),m.correctInvalidListNesting(a)),e=m.splitListItemContents(b),g=jQuery(e.sublistContents),f=jQuery(e.itemContents),h=b.parent().parent("li"),0===h.length)return void WYMeditor.console.error("Invalid list. No parentLi found, so aborting outdent");i=b.parent(),j=b.nextAllContents(),k=i.nextAllContents(),b.detach(),h.after(b),g.length>0&&(d="<"+c+'><li class="spacer_li"></li></'+c+">",b.append(d),l=b.children().last(),g.detach(),l.children("li").append(g)),j.length>0&&("undefined"==typeof l&&(d="<"+c+"></"+c+">",b.append(d),l=b.children().last()),j.detach(),l.append(j)),k.length>0&&(k.detach(),b.contents().length>0&&b.contents().last()[0].nodeType===WYMeditor.NODE.TEXT&&k[0].nodeType===WYMeditor.NODE.TEXT&&b.append("<br />"),b.append(k)),0===i.contents().length&&i.remove(),0===h.contents().length&&h.remove()}},WYMeditor.editor.prototype.correctInvalidListNesting=function(a,b){var c,d,e=this,f=a;if("undefined"==typeof b&&(b=!1),!f)return b;for(;f.parentNode&&(c=f.parentNode,c.nodeType===WYMeditor.NODE.ELEMENT)&&(d=c.tagName.toLowerCase(),"ol"===d||"ul"===d||"li"===d);)f=c;return jQuery(f).is("li")?(WYMeditor.console.log("Correcting orphaned root li before correcting invalid list nesting."),e._correctOrphanedListItem(f),e.correctInvalidListNesting(f,!0)):jQuery(f).is("ol,ul")?e._correctInvalidListNesting(f,b):(WYMeditor.console.error("Can't correct invalid list nesting. No root list found"),b)},WYMeditor.editor.prototype._isPOrDivAfterEnterInEmptynestedLi=function(a){if(jQuery.inArray(a.tagName.toLowerCase(),WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS)>-1&&"li"===a.parentNode.tagName.toLowerCase())switch(a.childNodes.length){case 0:return!0;case 1:if(a.childNodes[0].tagName&&"br"===a.childNodes[0].tagName.toLowerCase())return!0;if(a.childNodes[0].nodeType===WYMeditor.NODE.TEXT&&a.childNodes[0].data===WYMeditor.NBSP)return!0}return!1},WYMeditor.editor.prototype._isSpilledListAfterEnterInEmptyLi=function(a){var b=this;return"li"===a.tagName.toLowerCase()&&a.previousSibling&&b.isListNode(a.previousSibling)&&a.previousSibling.previousSibling&&"li"===a.previousSibling.previousSibling.tagName.toLowerCase()&&b.isListNode(a.parentNode)?!0:!1},WYMeditor.editor.prototype.handlePotentialEnterInEmptyNestedLi=function(a,b){if(a!==WYMeditor.KEY.ENTER)return null;var c=this;c._isPOrDivAfterEnterInEmptynestedLi(b)?c._replaceNodeWithBrAndSetCaret(b):c._isSpilledListAfterEnterInEmptyLi(b)&&(c._appendSiblingsUntilNextLiToPreviousLi(b),c._replaceNodeWithBrAndSetCaret(b))},WYMeditor.editor.prototype._replaceNodeWithBrAndSetCaret=function(a){var b=this,c=jQuery(a);(a.previousSibling&&!a.previousSibling.tagName||"br"!==a.previousSibling.tagName.toLowerCase()&&b.isInlineNode(a.previousSibling))&&c.before("<br />"),c.before("<br />"),b.setCaretBefore(a.previousSibling),c.remove()},WYMeditor.editor.prototype._appendSiblingsUntilNextLiToPreviousLi=function(a){var b,c=jQuery(a),d=c.parent().contents(),e=c.prevAll("li").first(),f=c.nextAll("li").first(),g=e.index()+1;b=1===f.length?d.slice(g,f.index()):d.slice(g),e.append(b)},WYMeditor.editor.prototype._correctOrphanedListItem=function(a){var b,c,d,e,f=jQuery();b=jQuery(a).prevContentsUntil(":not(li)"),c=jQuery(a).nextContentsUntil(":not(li)"),f=f.add(b),f=f.add(a),f=f.add(c),e=f[0].previousSibling,e&&jQuery(e).is("ol,ul")?d=e:(f.before("<ol></ol>"),d=f.prev()[0]),jQuery(d).append(f)},WYMeditor.editor.prototype._correctInvalidListNesting=function(a,b){var c,d,e,f,g,h,i=a,j=a,k=!1,l='<li class="spacer_li"></li>';for("undefined"!=typeof b&&(k=b);j;)if(j._wym_visited){if(j._wym_visited=!1,j===i)break;j=j.previousSibling?j.previousSibling:j.parentNode}else{if(j!==i&&!jQuery(j).is("li"))for(e=j;e.parentNode&&(e=e.parentNode,!jQuery(e).is("li"))&&e.nodeType===WYMeditor.NODE.ELEMENT;)if(d=e.tagName.toLowerCase(),"ol"===d||"ul"===d){for(WYMeditor.console.log("Fixing orphaned list content"),k=!0,f=[j],c=j,g=null;c.previousSibling;){if(c=c.previousSibling,jQuery(c).is("li")){g=c;break}f.push(c)}f.reverse(),g||1!==f.length||jQuery(j.nextSibling).is("li")&&(g=j.nextSibling),g||(jQuery(f[0]).before(l),g=jQuery(f[0]).prev()[0]),h=jQuery(g).contents().last(),1===h.length&&h[0].nodeType===WYMeditor.NODE.TEXT&&f[0].nodeType===WYMeditor.NODE.TEXT&&jQuery(g).append("<br />"),jQuery(g).append(jQuery(f));break}j.lastChild?(j._wym_visited=!0,j=j.lastChild):j=j.previousSibling?j.previousSibling:j.parentNode}return k},WYMeditor.editor.prototype.getCommonParentList=function(a,b){var c,d,e,f=!0;return a=jQuery(a).filter("li"),0===a.length?null:(c=a[0],d=jQuery(c).parents("ol,ul"),d=b?d.first():d.last(),0===d.length?null:(e=d[0],jQuery(a).each(function(a,c){d=jQuery(c).parents("ol,ul"),d=b?d.first():d.last(),(0===d.length||d[0]!==e)&&(f=!1)}),f?e:null))},WYMeditor.editor.prototype._getSelectedListItems=function(a){var b,c,d,e=this;return a.isCollapsed?(b=jQuery(e.selectedContainer()),b.closest("li, table").is("table")?[]:b.closest("li")):(c=jQuery(a.getRangeAt(0).getNodes()),0===c.closest("li, table").filter("li").length?[]:(d=c.not("li, ol, ul").add(c.find(".rangySelectionBoundary")).add(c.filter(function(){return e.nodeType===WYMeditor.NODE.TEXT})).closest("li").add(c.filter("li:empty")).not(c.filter("table").find("li")),jQuery.unique(d.get())))},WYMeditor.editor.prototype._selectionOnlyInList=function(a){var b,c,d,e=this;for(d=0;d<a.rangeCount;++d){if(b=e.findUp(a.getRangeAt(d).startContainer,["li"]),c=e.findUp(a.getRangeAt(d).endContainer,["li"]),!b||!c)return!1;if(!e.getCommonParentList([b,c],!1))return!1}return!0},WYMeditor.editor.prototype.indent=function(){var a,b,c,d=this,e=d.selection();return b=function(){var a=d.selectedContainer(),b=d.findUp(a,["ol","ul","li"]);return d.correctInvalidListNesting(b)},d.restoreSelectionAfterManipulation(b)?!0:(e=d.selection(),d._selectionOnlyInList(e)?(a=d._getSelectedListItems(e),0===a.length?!1:(b=function(){var b=!1;for(c=0;c<a.length;c++)d._indentSingleItem(a[c]),b=!0;return b},d.restoreSelectionAfterManipulation(b))):!1)},WYMeditor.editor.prototype.outdent=function(){var a,b,c,d=this,e=d.selection();return b=function(){var a=d.selectedContainer(),b=d.findUp(a,["ol","ul","li"]);return d.correctInvalidListNesting(b)},d.restoreSelectionAfterManipulation(b)?!0:(e=d.selection(),d._selectionOnlyInList(e)?(a=d._getSelectedListItems(e),0===a.length?!1:(b=function(){var b=!1;for(c=0;c<a.length;c++)d._outdentSingleItem(a[c]),b=!0;return b},d.restoreSelectionAfterManipulation(b))):!1)},WYMeditor.editor.prototype.restoreSelectionAfterManipulation=function(a){var b=this,c=rangy.saveSelection(rangy.dom.getIframeWindow(b._iframe)),d=!0;try{d=a(),d?rangy.restoreSelection(c):rangy.removeMarkers(c)}catch(e){WYMeditor.console.error("Error during manipulation"),WYMeditor.console.error(e),rangy.removeMarkers(c)}return d},WYMeditor.editor.prototype.insertOrderedlist=function(){var a,b=this;return a=function(){var a=b.selectedContainer(),c=b.findUp(a,["ol","ul","li"]);return b.correctInvalidListNesting(c)},b.restoreSelectionAfterManipulation(a)?!0:(a=function(){return b._insertList("ol")},b.restoreSelectionAfterManipulation(a))},WYMeditor.editor.prototype.insertUnorderedlist=function(){var a,b=this;return a=function(){var a=b.selectedContainer(),c=b.findUp(a,["ol","ul","li"]);return b.correctInvalidListNesting(c)},b.restoreSelectionAfterManipulation(a)?!0:(a=function(){return b._insertList("ul")},b.restoreSelectionAfterManipulation(a))},WYMeditor.editor.prototype._insertList=function(a){var b,c,d,e,f,g=this,h=g.selection();if(b=g._getSelectedListItems(h),b.length>0){if(c=jQuery(b),d=c.parent(":not("+a+")"),!(d.length>0))return g._removeItemsFromList(c),!0;if(e=g.getCommonParentList(b,!0))return g._changeListType(e,a),!0}return f=g.findUp(g.selectedContainer(),WYMeditor.POTENTIAL_LIST_ELEMENTS),f?(g._convertToList(f,a),!0):!1},WYMeditor.editor.prototype._changeListType=function(a,b){return WYMeditor.changeNodeType(a,b)},WYMeditor.editor.prototype._convertToList=function(a,b){var c,d,e=this,f=jQuery(a);return c="<"+b+"><li></li></"+b+">",e.findUp(a,WYMeditor.MAIN_CONTAINERS)===a?(f.wrapInner(c),d=f.children(),d.unwrap(),d.get(0)):(f.wrapInner(c),d=f.children(),d.get(0))},WYMeditor.editor.prototype._removeItemsFromList=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.documentStructureManager.structureRules.defaultRootContainer;for(c=0;c<a.length;c++){for(b=a.eq(c),b=jQuery(1===b.parent().parent("li, th, td").length?j.switchTo(b[0],"span",!1):j.switchTo(b[0],k,!1)),1===b.parent().children().length?(b.parent().before(b),b.next().remove()):b[0]===b.parent().children().first()[0]?b.parent().before(b):b[0]!==b.parent().children().first()[0]&&b[0]!==b.parent().children().last()[0]?(b.parent().before("<"+b.parent()[0].tagName+"/>"),jQuery(b.prevAll().toArray().reverse()).appendTo(b.parent().prev()),b.parent().before(b)):b[0]===b.parent().children().last()[0]&&b.parent().after(b),d=0;d<b.contents().length;d++)if(e=b.contents()[d],j.isBlockNode(e)&&"rangySelectionBoundary"!==e.className&&"br"!==e.tagName.toLowerCase()){if(f=b.contents().slice(d),b[0].tagName.toLowerCase()===k)for(g=0;g<f.length;g++)h=f.eq(g),h[0].nodeType===WYMeditor.NODE.TEXT?h.wrap("<"+k+" />"):h[0].tagName&&!j.isBlockNode(h[0])&&"br"!==h[0].tagName.toLowerCase()&&j.switchTo(f[g],k,!1);b.after(b.contents().slice(d));break}j.$body().children("br").remove(),"span"===b[0].tagName.toLowerCase()&&(0===b.contents(":not(.rangySelectionBoundary)").length||b.contents(":not(.rangySelectionBoundary)").length===b.contents("br").length?(b.before(b.contents(".rangySelectionBoundary")),b.remove()):((b[0].previousSibling&&b[0].previousSibling.nodeType===WYMeditor.NODE.TEXT||b.prevAll(":not(.rangySelectionBoundary)").length>0&&j.isBlockNode(b.prevAll(":not(.rangySelectionBoundary)")[0])===!1)&&b.before("<br />"),(b[0].nextSibling&&b[0].nextSibling.nodeType===WYMeditor.NODE.TEXT||b.nextAll(":not(.rangySelectionBoundary)").length>0&&j.isBlockNode(b.nextAll(":not(.rangySelectionBoundary)")[0])===!1)&&b.after("<br />"),i=b[0].attributes,j.unwrapIfMeaninglessSpan(b[0])))}j.fixBodyHtml()},WYMeditor.editor.prototype.insertTable=function(a,b,c,d){if(!(0>=a||0>=b)){var e,f,g,h,i,j=this,k=j._doc.createElement(WYMeditor.TABLE),l=null;for(e=k.createCaption(),e.innerHTML=c,f=0;a>f;f+=1)for(l=k.insertRow(f),g=0;b>g;g+=1)l.insertCell(g);if(""!==d&&jQuery(k).attr("summary",d),h=jQuery(j.findUp(j.selectedContainer(),WYMeditor.POTENTIAL_TABLE_INSERT_ELEMENTS)).get(0),h&&h.parentNode)if(jQuery.inArray(h.nodeName.toLowerCase(),WYMeditor.INLINE_TABLE_INSERTION_ELEMENTS)>-1){if(i=j.selection().focusNode,jQuery.inArray(i.nodeName.toLowerCase(),WYMeditor.SELECTABLE_TABLE_ELEMENTS)>-1||jQuery.inArray(i.parentNode.nodeName.toLowerCase(),WYMeditor.SELECTABLE_TABLE_ELEMENTS)>-1)for(;i.nodeName.toLowerCase()!==WYMeditor.TABLE;)i=i.parentNode;i.nodeName.toLowerCase()===WYMeditor.LI?jQuery(i).append(k):jQuery(i).after(k)}else jQuery(h).after(k);else j.$body().append(k);return j.afterInsertTable(k),j.fixBodyHtml(),k}},WYMeditor.editor.prototype.afterInsertTable=function(){},WYMeditor.editor.prototype.listen=function(){var a=this;a.$body().bind("mousedown",function(b){a.mousedown(b)}),jQuery(a._doc).bind("paste",function(){a.handlePasteEvent()})},WYMeditor.editor.prototype.handlePasteEvent=function(){var a=this;window.setTimeout(function(){jQuery(a._element).trigger(WYMeditor.EVENTS.postBlockMaybeCreated,a)},20)},WYMeditor.editor.prototype.mousedown=function(a){var b=this;b._selectedImage=null,a.target.tagName.toLowerCase()===WYMeditor.IMG&&(b._selectedImage=a.target)},WYMeditor.editor.prototype.initSkin=function(){var a=this;jQuery(a._box).addClass("wym_skin_"+a._options.skin),"undefined"!=typeof WYMeditor.SKINS[a._options.skin]?"function"==typeof WYMeditor.SKINS[a._options.skin].init&&WYMeditor.SKINS[a._options.skin].init(a):WYMeditor.console.warn("Chosen skin _"+a.options.skin+"_ not found.")},WYMeditor.editor.prototype.body=function(){var a,b=this;if(!b._doc.body)throw"The document seems to have no body element.";if(a=b._doc.body,!a.tagName||"body"!==a.tagName.toLowerCase())throw"The document's body doesn't seem to be a `body` element.";return a},WYMeditor.editor.prototype.$body=function(){var a,b=this;return a=b.body(),jQuery(a)},WYMeditor.DocumentStructureManager=function(a,b){var c=this;c._wym=a,c.structureRules=WYMeditor.DocumentStructureManager.DEFAULTS,c.setDefaultRootContainer(b)},jQuery.extend(WYMeditor.DocumentStructureManager,{VALID_DEFAULT_ROOT_CONTAINERS:["p","div"],DEFAULT_ROOT_CONTAINER_TITLES:{p:"Paragraph",div:"Division"},CONTAINERS_BLOCKING_NAVIGATION:["table","blockquote","pre"],DEFAULTS:{defaultRootContainer:"p",notValidRootContainers:["div"],validRootContainers:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","table","ol","ul"],convertIfRootContainers:["div"],validListConversionTargetContainers:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","td","th"],wrapContentsInList:["td","th"]}}),WYMeditor.DocumentStructureManager.prototype.setDefaultRootContainer=function(a){var b,c,d,e=this;if(e.structureRules.defaultRootContainer!==a){if(d=WYMeditor.DocumentStructureManager,b=d.VALID_DEFAULT_ROOT_CONTAINERS,c=jQuery.inArray(a,b),-1===c)throw new Error("a defaultRootContainer of '"+a+"' is not supported");e.structureRules.defaultRootContainer=a,e.structureRules.notValidRootContainers=WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS,e.structureRules.notValidRootContainers.splice(c,1),e.adjustDefaultRootContainerUI()}},WYMeditor.DocumentStructureManager.prototype.adjustDefaultRootContainerUI=function(){var a,b,c,d,e,f,g,h,i=this,j=i._wym,k=i.structureRules.defaultRootContainer;for(a=jQuery(j._box).find(j._options.containersSelector).find("li"),e=!0,g=0;g<a.length;++g)b=a.eq(g).find("a"),d=b.attr("name").toLowerCase(),jQuery.inArray(d,i.structureRules.notValidRootContainers)>-1&&a.eq(g).remove(),d===k&&(e=!1);e&&(f=j._options.containersItemHtml,f=WYMeditor.Helper.replaceAll(f,WYMeditor.CONTAINER_NAME,k.toUpperCase()),h=WYMeditor.DocumentStructureManager,f=WYMeditor.Helper.replaceAll(f,WYMeditor.CONTAINER_TITLE,h.DEFAULT_ROOT_CONTAINER_TITLES[k]),f=WYMeditor.Helper.replaceAll(f,WYMeditor.CONTAINER_CLASS,"wym_containers_"+k),c=jQuery(f),a=jQuery(j._box).find(j._options.containersSelector).find("li"),a.eq(0).before(c),c.find("a").click(function(){var a=this;return j.mainContainer(jQuery(a).attr(WYMeditor.NAME)),!1}))},WYMeditor.WymClassGecko=function(a){var b=this;b._wym=a,b._class="class"},WYMeditor.WymClassGecko.CELL_PLACEHOLDER='<br _moz_dirty="" />',WYMeditor.WymClassGecko.NEEDS_CELL_FIX=1===parseInt(jQuery.browser.version,10)&&jQuery.browser.version>="1.9.1"&&jQuery.browser.version<"2.0",WYMeditor.WymClassGecko.prototype._docEventQuirks=function(){var a=this;jQuery(a._doc).bind("keydown",a.keydown),jQuery(a._doc).bind("keyup",a.keyup),jQuery(a._doc).bind("click",a.click),jQuery(a._doc).bind("focus",function(){a._enableDesignModeOnIframe.call(a)})},WYMeditor.WymClassGecko.prototype.rawHtml=function(a){var b=this;if("string"!=typeof a)return jQuery(b._doc.body).html();try{b._doc.designMode="off"}catch(c){}return jQuery(b._doc.body).html(a),b._wym.fixBodyHtml(),b._enableDesignModeOnIframe(),!1},WYMeditor.WymClassGecko.prototype._exec=function(a,b){var c,d=this;return d.selectedContainer()?(b?d._doc.execCommand(a,"",b):d._doc.execCommand(a,"",null),c=d.selectedContainer(),c&&c.tagName.toLowerCase()===WYMeditor.BODY&&(d._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P),d.fixBodyHtml()),!0):!1},WYMeditor.WymClassGecko.prototype.keydown=function(a){var b=this,c=WYMeditor.INSTANCES[b.title];if(a.ctrlKey){if(66===a.which)return c._exec(WYMeditor.BOLD),!1;if(73===a.which)return c._exec(WYMeditor.ITALIC),!1}return!0},WYMeditor.WymClassGecko.prototype.keyup=function(a){var b,c,d,e,f,g=this,h=WYMeditor.INSTANCES[g.title];d=h.documentStructureManager.structureRules.notValidRootContainers,c=h.documentStructureManager.structureRules.defaultRootContainer,h._selectedImage=null,b=null,h.keyCanCreateBlockElement(a.which)||a.which===WYMeditor.KEY.CTRL||a.which===WYMeditor.KEY.COMMAND||a.metaKey||a.ctrlKey||(b=h.selectedContainer(),e=b.tagName.toLowerCase(),b.parentNode&&(f=b.parentNode.tagName.toLowerCase()),h.isForbiddenMainContainer(e)&&(e=f),(e===WYMeditor.BODY||jQuery.inArray(e,d)>-1&&f===WYMeditor.BODY)&&(h._exec(WYMeditor.FORMAT_BLOCK,c),h.fixBodyHtml())),h.keyCanCreateBlockElement(a.which)&&(b=h.selectedContainer(),e=b.tagName.toLowerCase(),b.parentNode&&(f=b.parentNode.tagName.toLowerCase()),jQuery.inArray(e,d)>-1&&f===WYMeditor.BODY&&h._exec(WYMeditor.FORMAT_BLOCK,c),h.handlePotentialEnterInEmptyNestedLi(a.which,b),h.fixBodyHtml())},WYMeditor.WymClassGecko.prototype.click=function(){var a,b=this,c=WYMeditor.INSTANCES[b.title],d=c.selectedContainer();WYMeditor.WymClassGecko.NEEDS_CELL_FIX===!0&&d&&d.tagName.toLowerCase()===WYMeditor.TR&&jQuery(WYMeditor.TD,c._doc.body).append(WYMeditor.WymClassGecko.CELL_PLACEHOLDER),d&&d.tagName.toLowerCase()===WYMeditor.BODY&&(a=c.selection(),a.isCollapsed===!0&&c._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P))},WYMeditor.WymClassGecko.prototype._enableDesignModeOnIframe=function(){var a=this;if("off"===a._doc.designMode)try{a._doc.designMode="on",a._doc.execCommand("styleWithCSS","",!1),a._doc.execCommand("enableObjectResizing",!1,!0)}catch(b){}},WYMeditor.WymClassGecko.prototype.afterInsertTable=function(a){WYMeditor.WymClassGecko.NEEDS_CELL_FIX===!0&&jQuery(a).find("td").each(function(a,b){jQuery(b).append(WYMeditor.WymClassGecko.CELL_PLACEHOLDER)})},WYMeditor.WymClassWebKit=function(a){var b=this;b._wym=a,b._class="class"},WYMeditor.WymClassWebKit.prototype._docEventQuirks=function(){var a=this;jQuery(a._doc).bind("keydown",a.keydown),jQuery(a._doc).bind("keyup",a.keyup)},WYMeditor.WymClassWebKit.prototype._exec=function(a,b){var c,d,e,f,g,h=this;return h.selectedContainer()?(b?h._doc.execCommand(a,"",b):h._doc.execCommand(a,"",null),c=h.selectedContainer(),c&&(d=jQuery(c),e=c.tagName.toLowerCase(),e===WYMeditor.BODY&&(f=h.documentStructureManager.structureRules,h._exec(WYMeditor.FORMAT_BLOCK,f.defaultRootContainer),h.fixBodyHtml()),a===WYMeditor.FORMAT_BLOCK&&d.siblings("body.wym_iframe").length&&d.siblings("body.wym_iframe").append(c),"span"===e&&(g=!d.attr("class")||"apple-style-span"===d.attr("class").toLowerCase(),g&&"font-weight: normal;"===d.attr("style")&&d.contents().unwrap())),!0):!1},WYMeditor.WymClassWebKit.prototype.keydown=function(a){var b=this,c=WYMeditor.INSTANCES[b.title];a.ctrlKey?(a.which===WYMeditor.KEY.B&&(c._exec(WYMeditor.BOLD),a.preventDefault()),a.which===WYMeditor.KEY.I&&(c._exec(WYMeditor.ITALIC),a.preventDefault())):a.shiftKey&&a.which===WYMeditor.KEY.ENTER&&(c._exec("InsertLineBreak"),a.preventDefault())},WYMeditor.WymClassWebKit.prototype._inListBreakoutDiv=function(a){var b=this,c=jQuery(b.mainContainer());return a===WYMeditor.KEY.ENTER&&c.is("div")&&"div"!==b.documentStructureManager.defaultRootContainer&&1===c.prev("ol, ul").length?!0:!1},WYMeditor.WymClassWebKit.prototype._isLiInLiAfterEnter=function(a){var b,c,d,e,f=this,g=f.nodeAfterSel();return a!==WYMeditor.KEY.ENTER?!1:g&&(b=g.parentNode)?"string"!=typeof b.tagName?!1:"li"!==b.tagName.toLowerCase()?!1:(c=g.previousSibling)?"string"!=typeof c.tagName?!1:"li"!==c.tagName.toLowerCase()?!1:1!==c.childNodes.length?!1:(d=c.childNodes[0])?"string"!=typeof d.tagName?!1:"br"!==d.tagName.toLowerCase()?!1:(e=c.previousSibling,e?"string"!=typeof e.tagName?!1:-1===jQuery.inArray(e.tagName.toLowerCase(),["ol","ul"])?!1:!0:!1):!1:!1:!1},WYMeditor.WymClassWebKit.prototype._fixLiInLiAfterEnter=function(){var a=this,b=a.nodeAfterSel(),c=jQuery(b.previousSibling),d=c.parent("li"),e=d.contents().index(c),f=d.contents().slice(e+1);c.remove(),d.after("<li><br /></li>"),d.next().append(f),a.setCaretBefore(d.next("li").children().first("br")[0])},WYMeditor.WymClassWebKit.prototype.keyup=function(a){var b,c,d,e,f,g,h=this,i=WYMeditor.INSTANCES[h.title];if(d=i.documentStructureManager.structureRules.notValidRootContainers,c=i.documentStructureManager.structureRules.defaultRootContainer,i._selectedImage=null,jQuery.browser.version<534.1&&a.which===WYMeditor.KEY.ENTER&&a.shiftKey&&i._exec("InsertLineBreak"),i.keyCanCreateBlockElement(a.which)||a.which===WYMeditor.KEY.CTRL||a.which===WYMeditor.KEY.COMMAND||a.metaKey||a.ctrlKey||(b=i.selectedContainer(),e=b.tagName.toLowerCase(),b.parentNode&&(f=b.parentNode.tagName.toLowerCase()),i.isForbiddenMainContainer(e)&&(e=f),(e===WYMeditor.BODY||jQuery.inArray(e,d)>-1&&f===WYMeditor.BODY)&&(i._exec(WYMeditor.FORMAT_BLOCK,c),i.fixBodyHtml())),i.keyCanCreateBlockElement(a.which)){if(b=i.selectedContainer(),e=b.tagName.toLowerCase(),b.parentNode&&(f=b.parentNode.tagName.toLowerCase()),jQuery.inArray(e,d)>-1&&f===WYMeditor.BODY&&(i._exec(WYMeditor.FORMAT_BLOCK,c),b=i.selectedContainer()),i._isLiInLiAfterEnter(a.which,b))return i._fixLiInLiAfterEnter(),void(b=i.selectedContainer());i.handlePotentialEnterInEmptyNestedLi(a.which,b),i._inListBreakoutDiv(a.which)&&(g=i.switchTo(i.mainContainer(),c),i.setCaretIn(g)),i.fixBodyHtml()}},WYMeditor.WymClassTridentPre7=function(a){var b=this;b._wym=a,b._class="className"},WYMeditor.WymClassTridentPre7.prototype._onEditorIframeLoad=function(a){a._assignWymDoc(),a._isDesignModeOn()===!1?a._doc.designMode="On":a._afterDesignModeOn()},WYMeditor.WymClassTridentPre7.prototype._assignWymDoc=function(){var a=this;a._doc=a._iframe.contentWindow.document},WYMeditor.WymClassTridentPre7.prototype._docEventQuirks=function(){var a=this;
a._doc.onbeforedeactivate=function(){a.saveCaret()},jQuery(a._doc).bind("keyup",a.keyup),a._doc.onkeyup=function(){a.saveCaret()},a._doc.onclick=function(){a.saveCaret()},a._doc.body.onbeforepaste=function(){a._iframe.contentWindow.event.returnValue=!1},a._doc.body.onpaste=function(){a._iframe.contentWindow.event.returnValue=!1,a.paste(window.clipboardData.getData("Text"))}},WYMeditor.WymClassTridentPre7.prototype._setButtonsUnselectable=function(){var a=this,b=a.getButtons();b.attr("unselectable","on")},WYMeditor.WymClassTridentPre7.prototype._UiQuirks=function(){var a=this;8===jQuery.browser.versionNumber&&a._setButtonsUnselectable()},WYMeditor.WymClassTridentPre7.prototype._exec=function(a,b){var c=this;b?c._doc.execCommand(a,!1,b):c._doc.execCommand(a)},WYMeditor.WymClassTridentPre7.prototype.saveCaret=function(){var a=this;a._doc.caretPos=a._doc.selection.createRange()},WYMeditor.WymClassTridentPre7.prototype.insert=function(a){var b,c=this,d=c._doc.selection.createRange();if(b=jQuery(d.parentElement()).parents(),b.is(c._options.iframeBodySelector))try{d.pasteHTML(a)}catch(e){}else c.paste(a)},WYMeditor.WymClassTridentPre7.prototype.wrap=function(a,b){var c,d=this,e=d._doc.selection.createRange();if(c=jQuery(e.parentElement()).parents(),c.is(d._options.iframeBodySelector))try{e.pasteHTML(a+e.text+b)}catch(f){}},WYMeditor.WymClassTridentPre7.prototype.wrapWithContainer=function(a,b){var c,d,e,f=this;c=jQuery(a).wrap("<"+b+" />"),d=f.selection(),e=rangy.createRange(f._doc),e.selectNodeContents(c[0]),e.collapse(),d.setSingleRange(e)},WYMeditor.WymClassTridentPre7.prototype.unwrap=function(){var a,b,c=this,d=c._doc.selection.createRange();if(a=jQuery(d.parentElement()).parents(),a.is(c._options.iframeBodySelector))try{b=d.text,c._exec("Cut"),d.pasteHTML(b)}catch(e){}},WYMeditor.WymClassTridentPre7.prototype.keyup=function(a){var b,c,d,e,f,g,h=this,i=WYMeditor.INSTANCES[h.title],j=!1;d=i.documentStructureManager.structureRules.notValidRootContainers,c=i.documentStructureManager.structureRules.defaultRootContainer,h._selectedImage=null,i.keyCanCreateBlockElement(a.which)||a.which===WYMeditor.KEY.CTRL||a.which===WYMeditor.KEY.COMMAND||a.metaKey||a.ctrlKey||(b=i.selectedContainer(),g=i.selection().focusNode,null!==b&&(e=b.tagName.toLowerCase()),b.parentNode&&(f=b.parentNode.tagName.toLowerCase()),i.isForbiddenMainContainer(e)&&(e=f,j=!0),e===WYMeditor.BODY&&"#text"===g.nodeName&&(j&&(g=g.parentNode),i.wrapWithContainer(g,c),i.fixBodyHtml()),jQuery.inArray(e,d)>-1&&f===WYMeditor.BODY&&(i.switchTo(b,c),i.fixBodyHtml())),i.keyCanCreateBlockElement(a.which)&&(b=i.selectedContainer(),e=b.tagName.toLowerCase(),b.parentNode&&(f=b.parentNode.tagName.toLowerCase()),jQuery.inArray(e,d)>-1&&f===WYMeditor.BODY&&i.switchTo(b,c),i.handlePotentialEnterInEmptyNestedLi(a.which,b),a.which!==WYMeditor.KEY.BACKSPACE||8!==jQuery.browser.versionNumber||!b.parentNode||"ul"!==f&&"ol"!==f||i.correctInvalidListNesting(b),i.fixBodyHtml())},WYMeditor.WymClassTrident7=function(a){var b=this;b._wym=a,b._class="class"},jQuery.extend(WYMeditor.WymClassTrident7.prototype,WYMeditor.WymClassGecko.prototype),jQuery.copyPropsFromObjectToObject(WYMeditor.WymClassTridentPre7.prototype,WYMeditor.WymClassTrident7.prototype,["_exec","keyup","wrapWithContainer"]),WYMeditor.LEXER_ENTER=1,WYMeditor.LEXER_MATCHED=2,WYMeditor.LEXER_UNMATCHED=3,WYMeditor.LEXER_EXIT=4,WYMeditor.LEXER_SPECIAL=5,WYMeditor.Lexer=function(a,b,c){return b=b||"accept",this._case=c||!1,this._regexes={},this._parser=a,this._mode=new WYMeditor.StateStack(b),this._mode_handlers={},this._mode_handlers[b]=b,this},WYMeditor.Lexer.prototype.addPattern=function(a,b){b=b||"accept","undefined"==typeof this._regexes[b]&&(this._regexes[b]=new WYMeditor.ParallelRegex(this._case)),this._regexes[b].addPattern(a),"undefined"==typeof this._mode_handlers[b]&&(this._mode_handlers[b]=b)},WYMeditor.Lexer.prototype.addEntryPattern=function(a,b,c){"undefined"==typeof this._regexes[b]&&(this._regexes[b]=new WYMeditor.ParallelRegex(this._case)),this._regexes[b].addPattern(a,c),"undefined"==typeof this._mode_handlers[c]&&(this._mode_handlers[c]=c)},WYMeditor.Lexer.prototype.addExitPattern=function(a,b){"undefined"==typeof this._regexes[b]&&(this._regexes[b]=new WYMeditor.ParallelRegex(this._case)),this._regexes[b].addPattern(a,"__exit"),"undefined"==typeof this._mode_handlers[b]&&(this._mode_handlers[b]=b)},WYMeditor.Lexer.prototype.addSpecialPattern=function(a,b,c){"undefined"==typeof this._regexes[b]&&(this._regexes[b]=new WYMeditor.ParallelRegex(this._case)),this._regexes[b].addPattern(a,"_"+c),"undefined"==typeof this._mode_handlers[c]&&(this._mode_handlers[c]=c)},WYMeditor.Lexer.prototype.mapHandler=function(a,b){this._mode_handlers[a]=b},WYMeditor.Lexer.prototype.parse=function(a){if("undefined"==typeof this._parser)return!1;for(var b,c=a.length;"object"==typeof(b=this._reduce(a));){a=b[0];var d=b[1],e=b[2],f=b[3];if(!this._dispatchTokens(d,e,f))return!1;if(""===a)return!0;if(a.length==c)return!1;c=a.length}return b?this._invokeParser(a,WYMeditor.LEXER_UNMATCHED):!1},WYMeditor.Lexer.prototype._dispatchTokens=function(a,b,c){return c=c||!1,this._invokeParser(a,WYMeditor.LEXER_UNMATCHED)?"boolean"==typeof c?this._invokeParser(b,WYMeditor.LEXER_MATCHED):this._isModeEnd(c)?this._invokeParser(b,WYMeditor.LEXER_EXIT)?this._mode.leave():!1:this._isSpecialMode(c)?(this._mode.enter(this._decodeSpecial(c)),this._invokeParser(b,WYMeditor.LEXER_SPECIAL)?this._mode.leave():!1):(this._mode.enter(c),this._invokeParser(b,WYMeditor.LEXER_ENTER)):!1},WYMeditor.Lexer.prototype._isModeEnd=function(a){return"__exit"===a},WYMeditor.Lexer.prototype._isSpecialMode=function(a){return"_"==a.substring(0,1)},WYMeditor.Lexer.prototype._decodeSpecial=function(a){return a.substring(1)},WYMeditor.Lexer.prototype._invokeParser=function(a,b){if(""===a)return!0;var c=this._mode.getCurrent(),d=this._mode_handlers[c],e=this._parser[d](a,b);return e},WYMeditor.Lexer.prototype._reduce=function(a){var b=this._regexes[this._mode.getCurrent()].match(a),c=b[1],d=b[0];if(d){var e=a.indexOf(c),f=a.substr(0,e);return a=a.substring(e+c.length),[a,f,c,d]}return!0},WYMeditor.ParallelRegex=function(a){return this._case=a,this._patterns=[],this._labels=[],this._regex=null,this},WYMeditor.ParallelRegex.prototype.addPattern=function(a,b){b=b||!0;var c=this._patterns.length;this._patterns[c]=a,this._labels[c]=b,this._regex=null},WYMeditor.ParallelRegex.prototype.match=function(a){if(0===this._patterns.length)return[!1,""];var b=a.match(this._getCompoundedRegex());if(!b)return[!1,""];for(var c=b[0],d=1;d<b.length;d++)if(b[d])return[this._labels[d-1],c];return[!0,b[0]]},WYMeditor.ParallelRegex.prototype._getCompoundedRegex=function(){if(null===this._regex){for(var a=0,b=this._patterns.length;b>a;a++)this._patterns[a]="("+this._untokenizeRegex(this._tokenizeRegex(this._patterns[a]).replace(/([\/\(\)])/g,"\\$1"))+")";this._regex=new RegExp(this._patterns.join("|"),this._getPerlMatchingFlags())}return this._regex},WYMeditor.ParallelRegex.prototype._tokenizeRegex=function(a){return a.replace(/\(\?(i|m|s|x|U)\)/,"~~~~~~Tk1$1~~~~~~").replace(/\(\?(\-[i|m|s|x|U])\)/,"~~~~~~Tk2$1~~~~~~").replace(/\(\?\=(.*)\)/,"~~~~~~Tk3$1~~~~~~").replace(/\(\?\!(.*)\)/,"~~~~~~Tk4$1~~~~~~").replace(/\(\?\<\=(.*)\)/,"~~~~~~Tk5$1~~~~~~").replace(/\(\?\<\!(.*)\)/,"~~~~~~Tk6$1~~~~~~").replace(/\(\?\:(.*)\)/,"~~~~~~Tk7$1~~~~~~")},WYMeditor.ParallelRegex.prototype._untokenizeRegex=function(a){return a.replace(/~~~~~~Tk1(.{1})~~~~~~/,"(?$1)").replace(/~~~~~~Tk2(.{2})~~~~~~/,"(?$1)").replace(/~~~~~~Tk3(.*)~~~~~~/,"(?=$1)").replace(/~~~~~~Tk4(.*)~~~~~~/,"(?!$1)").replace(/~~~~~~Tk5(.*)~~~~~~/,"(?<=$1)").replace(/~~~~~~Tk6(.*)~~~~~~/,"(?<!$1)").replace(/~~~~~~Tk7(.*)~~~~~~/,"(?:$1)")},WYMeditor.ParallelRegex.prototype._getPerlMatchingFlags=function(){return this._case?"m":"mi"},WYMeditor.StateStack=function(a){return this._stack=[a],this},WYMeditor.StateStack.prototype.getCurrent=function(){return this._stack[this._stack.length-1]},WYMeditor.StateStack.prototype.enter=function(a){this._stack.push(a)},WYMeditor.StateStack.prototype.leave=function(){return 1==this._stack.length?!1:(this._stack.pop(),!0)},WYMeditor.XhtmlLexer=function(a){return jQuery.extend(this,new WYMeditor.Lexer(a,"Text")),this.mapHandler("Text","Text"),this.addTokens(),this.init(),this},WYMeditor.XhtmlLexer.prototype.init=function(){},WYMeditor.XhtmlLexer.prototype.addTokens=function(){this.addCommentTokens("Text"),this.addScriptTokens("Text"),this.addCssTokens("Text"),this.addTagTokens("Text")},WYMeditor.XhtmlLexer.prototype.addCommentTokens=function(a){this.addEntryPattern("<!--",a,"Comment"),this.addExitPattern("-->","Comment")},WYMeditor.XhtmlLexer.prototype.addScriptTokens=function(a){this.addEntryPattern("<script",a,"Script"),this.addExitPattern("</script>","Script")},WYMeditor.XhtmlLexer.prototype.addCssTokens=function(a){this.addEntryPattern("<style",a,"Css"),this.addExitPattern("</style>","Css")},WYMeditor.XhtmlLexer.prototype.addTagTokens=function(a){this.addSpecialPattern("<\\s*[a-z0-9:-]+\\s*/>",a,"SelfClosingTag"),this.addSpecialPattern("<\\s*[a-z0-9:-]+\\s*>",a,"OpeningTag"),this.addEntryPattern("<[a-z0-9:-]+[\\/ \\>]+",a,"OpeningTag"),this.addInTagDeclarationTokens("OpeningTag"),this.addSpecialPattern("</\\s*[a-z0-9:-]+\\s*>",a,"ClosingTag")},WYMeditor.XhtmlLexer.prototype.addInTagDeclarationTokens=function(a){this.addSpecialPattern("\\s+",a,"Ignore"),this.addAttributeTokens(a),this.addExitPattern("/>",a),this.addExitPattern(">",a)},WYMeditor.XhtmlLexer.prototype.addAttributeTokens=function(a){this.addSpecialPattern("\\s*[a-z-_0-9]*:?[a-z-_0-9]+\\s*(?==)\\s*",a,"TagAttributes"),this.addEntryPattern('=\\s*"',a,"DoubleQuotedAttribute"),this.addPattern('\\\\"',"DoubleQuotedAttribute"),this.addExitPattern('"',"DoubleQuotedAttribute"),this.addEntryPattern("=\\s*'",a,"SingleQuotedAttribute"),this.addPattern("\\\\'","SingleQuotedAttribute"),this.addExitPattern("'","SingleQuotedAttribute"),this.addSpecialPattern("=\\s*[^>\\s]*",a,"UnquotedAttribute")},WYMeditor.XhtmlParser=function(a,b){return b=b||"Text",this._Lexer=new WYMeditor.XhtmlLexer(this),this._Listener=a,this._mode=b,this._matches=[],this._last_match="",this._current_match="",this},WYMeditor.XhtmlParser.prototype.parse=function(a){return this._Lexer.parse(this.beforeParsing(a)),this.afterParsing(this._Listener.getResult())},WYMeditor.XhtmlParser.prototype.beforeParsing=function(a){return(a.match(/class="MsoNormal"/)||a.match(/ns = "urn:schemas-microsoft-com/))&&this._Listener.avoidStylingTagsAndAttributes(),this._Listener.beforeParsing(a)},WYMeditor.XhtmlParser.prototype.afterParsing=function(a){return this._Listener._avoiding_tags_implicitly&&this._Listener.allowStylingTagsAndAttributes(),this._Listener.afterParsing(a)},WYMeditor.XhtmlParser.prototype.Ignore=function(){return!0},WYMeditor.XhtmlParser.prototype.Text=function(a){return this._Listener.addContent(a),!0},WYMeditor.XhtmlParser.prototype.Comment=function(a,b){return this._addNonTagBlock(a,b,"addComment")},WYMeditor.XhtmlParser.prototype.Script=function(a,b){return this._addNonTagBlock(a,b,"addScript")},WYMeditor.XhtmlParser.prototype.Css=function(a,b){return this._addNonTagBlock(a,b,"addCss")},WYMeditor.XhtmlParser.prototype._addNonTagBlock=function(a,b,c){switch(b){case WYMeditor.LEXER_ENTER:this._non_tag=a;break;case WYMeditor.LEXER_UNMATCHED:this._non_tag+=a;break;case WYMeditor.LEXER_EXIT:switch(c){case"addComment":this._Listener.addComment(this._non_tag+a);break;case"addScript":this._Listener.addScript(this._non_tag+a);break;case"addCss":this._Listener.addCss(this._non_tag+a)}}return!0},WYMeditor.XhtmlParser.prototype.SelfClosingTag=function(a,b){this.OpeningTag(a,b),this.normalizeTag(a);return this.ClosingTag(a,b)},WYMeditor.XhtmlParser.prototype.OpeningTag=function(a,b){switch(b){case WYMeditor.LEXER_ENTER:this._tag=this.normalizeTag(a),this._tag_attributes={};break;case WYMeditor.LEXER_SPECIAL:this._callOpenTagListener(this.normalizeTag(a));break;case WYMeditor.LEXER_EXIT:this._callOpenTagListener(this._tag,this._tag_attributes)}return!0},WYMeditor.XhtmlParser.prototype.ClosingTag=function(a){return this._callCloseTagListener(this.normalizeTag(a)),!0},WYMeditor.XhtmlParser.prototype._callOpenTagListener=function(a,b){b=b||{},this.autoCloseUnclosedBeforeNewOpening(a),this._Listener.isBlockTag(a)?(this._Listener._tag_stack.push(a),this._Listener.fixNestingBeforeOpeningBlockTag(a,b),this._Listener.openBlockTag(a,b),this._increaseOpenTagCounter(a)):this._Listener.isInlineTag(a)?this._Listener.inlineTag(a,b):(this._Listener.openUnknownTag(a,b),this._increaseOpenTagCounter(a)),this._Listener.last_tag=a,this._Listener.last_tag_opened=!0,this._Listener.last_tag_attributes=b},WYMeditor.XhtmlParser.prototype._callCloseTagListener=function(a){if(this._decreaseOpenTagCounter(a)){if(this.autoCloseUnclosedBeforeTagClosing(a),this._Listener.isBlockTag(a)){var b=this._Listener._tag_stack.pop();if(b===!1)return;if(b!==a){if(this._Listener._extraBlockClosingTags)return this._Listener._tag_stack.push(b),void this._Listener.removedExtraBlockClosingTag();a=b}this._Listener.closeBlockTag(a)}}else this._Listener.isInlineTag(a)||this._Listener.closeUnopenedTag(a);this._Listener.last_tag=a,this._Listener.last_tag_opened=!1},WYMeditor.XhtmlParser.prototype._increaseOpenTagCounter=function(a){this._Listener._open_tags[a]=this._Listener._open_tags[a]||0,this._Listener._open_tags[a]++},WYMeditor.XhtmlParser.prototype._decreaseOpenTagCounter=function(a){return this._Listener._open_tags[a]?(this._Listener._open_tags[a]--,0===this._Listener._open_tags[a]&&(this._Listener._open_tags[a]=void 0),!0):!1},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeNewOpening=function(a){this._autoCloseUnclosed(a,!1)},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeTagClosing=function(a){this._autoCloseUnclosed(a,!0)},WYMeditor.XhtmlParser.prototype._autoCloseUnclosed=function(a,b){if(b=b||!1,this._Listener._open_tags)for(var c in this._Listener._open_tags){var d=this._Listener._open_tags[c];d>0&&this._Listener.shouldCloseTagAutomatically(c,a,b)&&this._callCloseTagListener(c,!0)}},WYMeditor.XhtmlParser.prototype.getTagReplacements=function(){return this._Listener.getTagReplacements()},WYMeditor.XhtmlParser.prototype.normalizeTag=function(a){a=a.replace(/^([\s<\/>]*)|([\s<\/>]*)$/gm,"").toLowerCase();var b=this._Listener.getTagReplacements();return b[a]?b[a]:a},WYMeditor.XhtmlParser.prototype.TagAttributes=function(a,b){return WYMeditor.LEXER_SPECIAL==b&&(this._current_attribute=a),!0},WYMeditor.XhtmlParser.prototype.DoubleQuotedAttribute=function(a,b){return WYMeditor.LEXER_UNMATCHED==b&&(this._tag_attributes[this._current_attribute]=a),!0},WYMeditor.XhtmlParser.prototype.SingleQuotedAttribute=function(a,b){return WYMeditor.LEXER_UNMATCHED==b&&(this._tag_attributes[this._current_attribute]=a),!0},WYMeditor.XhtmlParser.prototype.UnquotedAttribute=function(a){return this._tag_attributes[this._current_attribute]=a.replace(/^=/,""),!0},WYMeditor.XhtmlSaxListener=function(){return this.output="",this.helper=new WYMeditor.XmlHelper,this._open_tags={},this.validator=WYMeditor.XhtmlValidator,this._tag_stack=[],this.avoided_tags=[],this._insert_before_closing=[],this._insert_after_closing=[],this._last_node_was_text=!1,this._consecutive_brs=0,this._lastAddedOpenTag="",this._insideLI=!1,this.tagsToUnwrapInLists=WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS,this._rootInlineTagsToRemove=["br"],this._extraBlockClosingTags=0,this._insideTagToRemove=!1,this._addSpacerBeforeElementInLI=!1,this._insideTagToRemove=!1,this._lastTagRemoved=!1,this._extraLIClosingTags=0,this._removedTagStackIndex=0,this.entities={"&nbsp;":"&#160;","&iexcl;":"&#161;","&cent;":"&#162;","&pound;":"&#163;","&curren;":"&#164;","&yen;":"&#165;","&brvbar;":"&#166;","&sect;":"&#167;","&uml;":"&#168;","&copy;":"&#169;","&ordf;":"&#170;","&laquo;":"&#171;","&not;":"&#172;","&shy;":"&#173;","&reg;":"&#174;","&macr;":"&#175;","&deg;":"&#176;","&plusmn;":"&#177;","&sup2;":"&#178;","&sup3;":"&#179;","&acute;":"&#180;","&micro;":"&#181;","&para;":"&#182;","&middot;":"&#183;","&cedil;":"&#184;","&sup1;":"&#185;","&ordm;":"&#186;","&raquo;":"&#187;","&frac14;":"&#188;","&frac12;":"&#189;","&frac34;":"&#190;","&iquest;":"&#191;","&Agrave;":"&#192;","&Aacute;":"&#193;","&Acirc;":"&#194;","&Atilde;":"&#195;","&Auml;":"&#196;","&Aring;":"&#197;","&AElig;":"&#198;","&Ccedil;":"&#199;","&Egrave;":"&#200;","&Eacute;":"&#201;","&Ecirc;":"&#202;","&Euml;":"&#203;","&Igrave;":"&#204;","&Iacute;":"&#205;","&Icirc;":"&#206;","&Iuml;":"&#207;","&ETH;":"&#208;","&Ntilde;":"&#209;","&Ograve;":"&#210;","&Oacute;":"&#211;","&Ocirc;":"&#212;","&Otilde;":"&#213;","&Ouml;":"&#214;","&times;":"&#215;","&Oslash;":"&#216;","&Ugrave;":"&#217;","&Uacute;":"&#218;","&Ucirc;":"&#219;","&Uuml;":"&#220;","&Yacute;":"&#221;","&THORN;":"&#222;","&szlig;":"&#223;","&agrave;":"&#224;","&aacute;":"&#225;","&acirc;":"&#226;","&atilde;":"&#227;","&auml;":"&#228;","&aring;":"&#229;","&aelig;":"&#230;","&ccedil;":"&#231;","&egrave;":"&#232;","&eacute;":"&#233;","&ecirc;":"&#234;","&euml;":"&#235;","&igrave;":"&#236;","&iacute;":"&#237;","&icirc;":"&#238;","&iuml;":"&#239;","&eth;":"&#240;","&ntilde;":"&#241;","&ograve;":"&#242;","&oacute;":"&#243;","&ocirc;":"&#244;","&otilde;":"&#245;","&ouml;":"&#246;","&divide;":"&#247;","&oslash;":"&#248;","&ugrave;":"&#249;","&uacute;":"&#250;","&ucirc;":"&#251;","&uuml;":"&#252;","&yacute;":"&#253;","&thorn;":"&#254;","&yuml;":"&#255;","&OElig;":"&#338;","&oelig;":"&#339;","&Scaron;":"&#352;","&scaron;":"&#353;","&Yuml;":"&#376;","&fnof;":"&#402;","&circ;":"&#710;","&tilde;":"&#732;","&Alpha;":"&#913;","&Beta;":"&#914;","&Gamma;":"&#915;","&Delta;":"&#916;","&Epsilon;":"&#917;","&Zeta;":"&#918;","&Eta;":"&#919;","&Theta;":"&#920;","&Iota;":"&#921;","&Kappa;":"&#922;","&Lambda;":"&#923;","&Mu;":"&#924;","&Nu;":"&#925;","&Xi;":"&#926;","&Omicron;":"&#927;","&Pi;":"&#928;","&Rho;":"&#929;","&Sigma;":"&#931;","&Tau;":"&#932;","&Upsilon;":"&#933;","&Phi;":"&#934;","&Chi;":"&#935;","&Psi;":"&#936;","&Omega;":"&#937;","&alpha;":"&#945;","&beta;":"&#946;","&gamma;":"&#947;","&delta;":"&#948;","&epsilon;":"&#949;","&zeta;":"&#950;","&eta;":"&#951;","&theta;":"&#952;","&iota;":"&#953;","&kappa;":"&#954;","&lambda;":"&#955;","&mu;":"&#956;","&nu;":"&#957;","&xi;":"&#958;","&omicron;":"&#959;","&pi;":"&#960;","&rho;":"&#961;","&sigmaf;":"&#962;","&sigma;":"&#963;","&tau;":"&#964;","&upsilon;":"&#965;","&phi;":"&#966;","&chi;":"&#967;","&psi;":"&#968;","&omega;":"&#969;","&thetasym;":"&#977;","&upsih;":"&#978;","&piv;":"&#982;","&ensp;":"&#8194;","&emsp;":"&#8195;","&thinsp;":"&#8201;","&zwnj;":"&#8204;","&zwj;":"&#8205;","&lrm;":"&#8206;","&rlm;":"&#8207;","&ndash;":"&#8211;","&mdash;":"&#8212;","&lsquo;":"&#8216;","&rsquo;":"&#8217;","&sbquo;":"&#8218;","&ldquo;":"&#8220;","&rdquo;":"&#8221;","&bdquo;":"&#8222;","&dagger;":"&#8224;","&Dagger;":"&#8225;","&bull;":"&#8226;","&hellip;":"&#8230;","&permil;":"&#8240;","&prime;":"&#8242;","&Prime;":"&#8243;","&lsaquo;":"&#8249;","&rsaquo;":"&#8250;","&oline;":"&#8254;","&frasl;":"&#8260;","&euro;":"&#8364;","&image;":"&#8465;","&weierp;":"&#8472;","&real;":"&#8476;","&trade;":"&#8482;","&alefsym;":"&#8501;","&larr;":"&#8592;","&uarr;":"&#8593;","&rarr;":"&#8594;","&darr;":"&#8595;","&harr;":"&#8596;","&crarr;":"&#8629;","&lArr;":"&#8656;","&uArr;":"&#8657;","&rArr;":"&#8658;","&dArr;":"&#8659;","&hArr;":"&#8660;","&forall;":"&#8704;","&part;":"&#8706;","&exist;":"&#8707;","&empty;":"&#8709;","&nabla;":"&#8711;","&isin;":"&#8712;","&notin;":"&#8713;","&ni;":"&#8715;","&prod;":"&#8719;","&sum;":"&#8721;","&minus;":"&#8722;","&lowast;":"&#8727;","&radic;":"&#8730;","&prop;":"&#8733;","&infin;":"&#8734;","&ang;":"&#8736;","&and;":"&#8743;","&or;":"&#8744;","&cap;":"&#8745;","&cup;":"&#8746;","&int;":"&#8747;","&there4;":"&#8756;","&sim;":"&#8764;","&cong;":"&#8773;","&asymp;":"&#8776;","&ne;":"&#8800;","&equiv;":"&#8801;","&le;":"&#8804;","&ge;":"&#8805;","&sub;":"&#8834;","&sup;":"&#8835;","&nsub;":"&#8836;","&sube;":"&#8838;","&supe;":"&#8839;","&oplus;":"&#8853;","&otimes;":"&#8855;","&perp;":"&#8869;","&sdot;":"&#8901;","&lceil;":"&#8968;","&rceil;":"&#8969;","&lfloor;":"&#8970;","&rfloor;":"&#8971;","&lang;":"&#9001;","&rang;":"&#9002;","&loz;":"&#9674;","&spades;":"&#9824;","&clubs;":"&#9827;","&hearts;":"&#9829;","&diams;":"&#9830;"},this.block_tags=["a","abbr","acronym","address","area","b","base","bdo","big","blockquote","body","button","caption","cite","code","colgroup","dd","del","div","dfn","dl","dt","em","fieldset","form","head","h1","h2","h3","h4","h5","h6","html","i","iframe","ins","kbd","label","legend","li","map","noscript","object","ol","optgroup","option","p","param","pre","q","samp","script","select","small","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","tt","ul","var","extends"],this.inline_tags=["br","col","hr","img","input"],this},WYMeditor.XhtmlSaxListener.prototype.shouldCloseTagAutomatically=function(a,b,c){if(c=c||!1,"td"==a){if(c&&"tr"==b||!c&&"td"==b)return!0}else if("option"==a&&(c&&"select"==b||!c&&"option"==b))return!0;return!1},WYMeditor.XhtmlSaxListener.prototype.beforeParsing=function(a){return this.output="",this._insert_before_closing=[],this._insert_after_closing=[],this._open_tags={},this._tag_stack=[],this._last_node_was_text=!1,this._lastTagRemoved=!1,this._insideTagToRemove=!1,this.last_tag=null,a},WYMeditor.XhtmlSaxListener.prototype.afterParsing=function(a){return a=this.replaceNamedEntities(a),a=this.joinRepeatedEntities(a),a=this.removeEmptyTags(a),a=this.removeBrInPre(a)},WYMeditor.XhtmlSaxListener.prototype.replaceNamedEntities=function(a){for(var b in this.entities)a=a.replace(new RegExp(b,"g"),this.entities[b]);return a},WYMeditor.XhtmlSaxListener.prototype.joinRepeatedEntities=function(a){var b="em|strong|sub|sup|acronym|pre|del|address";return a.replace(new RegExp("</("+b+")><\\1>",""),"").replace(new RegExp("(s*<("+b+")>s*){2}(.*)(s*</\\2>s*){2}",""),"<$2>$3<$2>")},WYMeditor.XhtmlSaxListener.prototype.removeEmptyTags=function(a){return a.replace(new RegExp("<("+this.block_tags.join("|").replace(/\|td/,"").replace(/\|th/,"")+")>(<br />|&#160;|&nbsp;|\\s)*</\\1>","g"),"")},WYMeditor.XhtmlSaxListener.prototype.removeBrInPre=function(a){var b=a.match(new RegExp("<pre[^>]*>(.*?)</pre>","gmi"));if(b)for(var c=0;c<b.length;c++)a=a.replace(b[c],b[c].replace(new RegExp("<br />","g"),String.fromCharCode(13,10)));return a},WYMeditor.XhtmlSaxListener.prototype.getResult=function(){return this.output},WYMeditor.XhtmlSaxListener.prototype.getTagReplacements=function(){return{b:"strong",i:"em"}},WYMeditor.XhtmlSaxListener.prototype.getTagForStyle=function(a){return/sub/.test(a)?"sub":/super/.test(a)?"sup":/bold/.test(a)?"strong":/italic/.test(a)?"em":!1},WYMeditor.XhtmlSaxListener.prototype.addContent=function(a){this.last_tag&&"li"==this.last_tag&&(a=a.replace(/(\r|\n|\r\n)+$/g,""),a=a.replace(/(\r|\n|\r\n)+/g," ")),a.replace(/^\s+|\s+$/g,"").length>0&&(this._last_node_was_text=!0,this._addSpacerBeforeElementInLI&&(this.output+="<br />",this._addSpacerBeforeElementInLI=!1)),this._insideTagToRemove||(this.output+=a)},WYMeditor.XhtmlSaxListener.prototype.addComment=function(a){this.remove_comments||this._insideTagToRemove||(this.output+=a)},WYMeditor.XhtmlSaxListener.prototype.addScript=function(a){this.remove_scripts||this._insideTagToRemove||(this.output+=a)},WYMeditor.XhtmlSaxListener.prototype.addCss=function(a){this.remove_embeded_styles||this._insideTagToRemove||(this.output+=a)},WYMeditor.XhtmlSaxListener.prototype.openBlockTag=function(a,b){var c=this._last_node_was_text;if(this._last_node_was_text=!1,!this._insideTagToRemove){if(this._shouldRemoveTag(a,b))return this._insideTagToRemove=!0,void(this._removedTagStackIndex=this._tag_stack.length-1);if(this._insideLI&&jQuery.inArray(a,this.tagsToUnwrapInLists)>-1)return("li"!==this._lastAddedOpenTag||c)&&(this.output+="<br />",this._addSpacerBeforeElementInLI=!1),this._tag_stack.pop(),void this._extraBlockClosingTags++;if(this._addSpacerBeforeElementInLI&&"li"!==a&&-1===jQuery.inArray(a,WYMeditor.LIST_TYPE_ELEMENTS)&&(this.output+="<br />",this._addSpacerBeforeElementInLI=!1),b=this.validator.getValidTagAttributes(a,b),b=this.removeUnwantedClasses(b),"span"===a&&b.style){var d=this.getTagForStyle(b.style);d&&(a=d,this._tag_stack.pop(),this._tag_stack.push(a),b.style="")}"li"===a&&(this._insideLI=!0,this._addSpacerBeforeElementInLI=!1),this._lastAddedOpeningTagString=this.helper.tag(a,b,!0),this.output+=this._lastAddedOpeningTagString,this._lastAddedOpenTag=a,this._lastTagRemoved=!1}},WYMeditor.XhtmlSaxListener.prototype.inlineTag=function(a,b){this._insideTagToRemove||this._shouldRemoveTag(a,b)||(this._last_node_was_text=!1,b=this.validator.getValidTagAttributes(a,b),b=this.removeUnwantedClasses(b),this.output+=this.helper.tag(a,b),this._lastTagRemoved=!1)},WYMeditor.XhtmlSaxListener.prototype.openUnknownTag=function(){},WYMeditor.XhtmlSaxListener.prototype.closeBlockTag=function(a){return this._last_node_was_text=!1,this._insideTagToRemove?(this._tag_stack.length===this._removedTagStackIndex&&(this._insideTagToRemove=!1),void(this._lastTagRemoved=!0)):("li"===a&&(this._insideLI=!1,this._addSpacerBeforeElementInLI=!1),jQuery.inArray(a,WYMeditor.LIST_TYPE_ELEMENTS)>-1&&(this._insideLI=!1),this.output=this.output.replace(new RegExp(this._lastAddedOpeningTagString+"<br />$",""),this._lastAddedOpeningTagString),void(this.output=this.output+this._getClosingTagContent("before",a)+"</"+a+">"+this._getClosingTagContent("after",a)))},WYMeditor.XhtmlSaxListener.prototype.removedExtraBlockClosingTag=function(){this._extraBlockClosingTags--,this._addSpacerBeforeElementInLI=!0,this._last_node_was_text=!1},WYMeditor.XhtmlSaxListener.prototype.closeUnknownTag=function(){},WYMeditor.XhtmlSaxListener.prototype.closeUnopenedTag=function(a){this._last_node_was_text=!1,this._insideTagToRemove||("li"===a&&this._extraLIClosingTags?this._extraLIClosingTags--:this.output+="</"+a+">")},WYMeditor.XhtmlSaxListener.prototype.avoidStylingTagsAndAttributes=function(){this.avoided_tags=["div","span"],this.validator.skiped_attributes=["style"],this.validator.skiped_attribute_values=["MsoNormal","main1"],this._avoiding_tags_implicitly=!0},WYMeditor.XhtmlSaxListener.prototype.allowStylingTagsAndAttributes=function(){this.avoided_tags=[],this.validator.skiped_attributes=[],this.validator.skiped_attribute_values=[],this._avoiding_tags_implicitly=!1},WYMeditor.XhtmlSaxListener.prototype.isBlockTag=function(a){return!WYMeditor.Helper.contains(this.avoided_tags,a)&&WYMeditor.Helper.contains(this.block_tags,a)},WYMeditor.XhtmlSaxListener.prototype.isInlineTag=function(a){return!WYMeditor.Helper.contains(this.avoided_tags,a)&&WYMeditor.Helper.contains(this.inline_tags,a)},WYMeditor.XhtmlSaxListener.prototype.insertContentAfterClosingTag=function(a,b){this._insertContentWhenClosingTag("after",a,b)},WYMeditor.XhtmlSaxListener.prototype.insertContentBeforeClosingTag=function(a,b){this._insertContentWhenClosingTag("before",a,b)},WYMeditor.XhtmlSaxListener.prototype.removeUnwantedClasses=function(a){var b,c;if(!a["class"])return a;for(c=0;c<WYMeditor.CLASSES_REMOVED_BY_PARSER.length;++c)b=new RegExp("(^|\\s)"+WYMeditor.CLASSES_REMOVED_BY_PARSER[c]+"($|\\s)","gi"),a["class"]=a["class"].replace(b,"$1");return a["class"]=a["class"].replace(/\s$/,""),a},WYMeditor.XhtmlSaxListener.prototype.fixNestingBeforeOpeningBlockTag=function(a,b){if(this._last_node_was_text||"ul"!=a&&"ol"!=a||!this.last_tag||this.last_tag_opened||"li"!=this.last_tag)if("ul"!=a&&"ol"!=a||!this.last_tag||!this.last_tag_opened||"ul"!=this.last_tag&&"ol"!=this.last_tag){if("li"==a&&this._tag_stack.length>=2){var c=this._tag_stack[this._tag_stack.length-2];"li"!=c||this._shouldRemoveTag(a,b)||(this._open_tags.li-=1,0===this._open_tags.li&&(this._open_tags.li=void 0),this._tag_stack.splice(this._tag_stack.length-2,1),this._last_node_was_text=!1,this._insideTagToRemove?this._tag_stack.length-1===this._removedTagStackIndex&&(this._insideTagToRemove=!1,this._lastTagRemoved=!0,this._extraLIClosingTags++):this.output+="</li>")}}else this._shouldRemoveTag(a,b)||(this.output+=this.helper.tag("li",{},!0),this.insertContentAfterClosingTag(a,"</li>")),this._last_node_was_text=!1;else this._lastTagRemoved?(this._insideTagToRemove=!0,this._removedTagStackIndex=this._tag_stack.length-1):this._shouldRemoveTag(a,b)||(this.output=this.output.replace(/<\/li>\s*$/,""),this.insertContentAfterClosingTag(a,"</li>"))},WYMeditor.XhtmlSaxListener.prototype._insertContentWhenClosingTag=function(a,b,c){this["_insert_"+a+"_closing"]||(this["_insert_"+a+"_closing"]=[]),this["_insert_"+a+"_closing"][b]||(this["_insert_"+a+"_closing"][b]=[]),this["_insert_"+a+"_closing"][b].push(c)},WYMeditor.XhtmlSaxListener.prototype._getClosingTagContent=function(a,b){return this["_insert_"+a+"_closing"]&&this["_insert_"+a+"_closing"][b]&&this["_insert_"+a+"_closing"][b].length>0?this["_insert_"+a+"_closing"][b].pop():""},WYMeditor.XhtmlSaxListener.prototype._shouldRemoveTag=function(a,b){return this._isEditorOnlyTag(a,b)?!0:this._isRootInlineTagToRemove(a,b,this._tag_stack)?!0:this._isThirdConsecutiveBrWithNoAttributes(a,b)?!0:!1},WYMeditor.XhtmlSaxListener.prototype._isEditorOnlyTag=function(a,b){var c;return b["class"]?(c=b["class"].split(" "),WYMeditor.Helper.contains(c,WYMeditor.EDITOR_ONLY_CLASS)?!0:!1):!1},WYMeditor.XhtmlSaxListener.prototype._isRootInlineTagToRemove=function(a,b,c){return this.isInlineTag(a)?c.length>0?!1:WYMeditor.Helper.contains(this._rootInlineTagsToRemove,a)?!0:!1:!1},WYMeditor.XhtmlSaxListener.prototype._isThirdConsecutiveBrWithNoAttributes=function(a,b){var c;if("br"!==a)return this._consecutive_brs=0,!1;if(0!==this._consecutive_brs&&this._last_node_was_text)return this._consecutive_brs=0,!1;for(c in b)if(b.hasOwnProperty(c))return this._consecutive_brs=0,!1;return this._consecutive_brs++,this._consecutive_brs>2?!0:!1},WYMeditor.XhtmlValidator={_attributes:{core:{except:["base","head","html","meta","param","script","style","title"],attributes:["class","id","style","title","accesskey","tabindex","/^data-.*/"]},language:{except:["base","br","hr","iframe","param","script"],attributes:{dir:["ltr","rtl"],0:"lang",1:"xml:lang"}},keyboard:{attributes:{accesskey:/^(\w){1}$/,tabindex:/^(\d)+$/}}},_events:{window:{only:["body"],attributes:["onload","onunload"]},form:{only:["form","input","textarea","select","a","label","button"],attributes:["onchange","onsubmit","onreset","onselect","onblur","onfocus"]},keyboard:{except:["base","bdo","br","frame","frameset","head","html","iframe","meta","param","script","style","title"],attributes:["onkeydown","onkeypress","onkeyup"]},mouse:{except:["base","bdo","br","head","html","meta","param","script","style","title"],attributes:["onclick","ondblclick","onmousedown","onmousemove","onmouseover","onmouseout","onmouseup"]}},_tags:{a:{attributes:{0:"charset",1:"coords",2:"href",3:"hreflang",4:"name",5:"rel",6:"rev",shape:/^(rect|rectangle|circ|circle|poly|polygon)$/,7:"type"}},0:"abbr",1:"acronym",2:"address",area:{attributes:{0:"alt",1:"coords",2:"href",nohref:/^(true|false)$/,shape:/^(rect|rectangle|circ|circle|poly|polygon)$/},required:["alt"]},3:"b",base:{attributes:["href"],required:["href"]},bdo:{attributes:{dir:/^(ltr|rtl)$/},required:["dir"]},4:"big",blockquote:{attributes:["cite"]},5:"body",6:"br",button:{attributes:{disabled:/^(disabled)$/,type:/^(button|reset|submit)$/,0:"value"},inside:"form"},7:"caption",8:"cite",9:"code",col:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"},inside:"colgroup"},colgroup:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"}},10:"dd",del:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},11:"div",12:"dfn",13:"dl",14:"dt",15:"em",fieldset:{inside:"form"},form:{attributes:{0:"action",1:"accept",2:"accept-charset",3:"enctype",method:/^(get|post)$/},required:["action"]},head:{attributes:["profile"]},16:"h1",17:"h2",18:"h3",19:"h4",20:"h5",21:"h6",22:"hr",html:{attributes:["xmlns"]},23:"i",img:{attributes:["alt","src","height","ismap","longdesc","usemap","width"],required:["alt","src"]},input:{attributes:{0:"accept",1:"alt",checked:/^(checked)$/,disabled:/^(disabled)$/,maxlength:/^(\d)+$/,2:"name",readonly:/^(readonly)$/,size:/^(\d)+$/,3:"src",type:/^(button|checkbox|file|hidden|image|password|radio|reset|submit|text)$/,4:"value"},inside:"form"},ins:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},24:"kbd",label:{attributes:["for"],inside:"form"},25:"legend",26:"li",link:{attributes:{0:"charset",1:"href",2:"hreflang",media:/^(all|braille|print|projection|screen|speech|,|;| )+$/i,rel:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,rev:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,3:"type"},inside:"head"},map:{attributes:["id","name"],required:["id"]},meta:{attributes:{0:"content","http-equiv":/^(content\-type|expires|refresh|set\-cookie)$/i,1:"name",2:"scheme"},required:["content"]},27:"noscript",object:{attributes:["archive","classid","codebase","codetype","data","declare","height","name","standby","type","usemap","width"]},28:"ol",optgroup:{attributes:{0:"label",disabled:/^(disabled)$/},required:["label"]},option:{attributes:{0:"label",disabled:/^(disabled)$/,selected:/^(selected)$/,1:"value"},inside:"select"},29:"p",param:{attributes:{0:"type",valuetype:/^(data|ref|object)$/,1:"valuetype",2:"value"},required:["name"]},30:"pre",q:{attributes:["cite"]},31:"samp",script:{attributes:{type:/^(text\/ecmascript|text\/javascript|text\/jscript|text\/vbscript|text\/vbs|text\/xml)$/,0:"charset",defer:/^(defer)$/,1:"src"},required:["type"]},select:{attributes:{disabled:/^(disabled)$/,multiple:/^(multiple)$/,0:"name",1:"size"},inside:"form"},32:"small",33:"span",34:"strong",style:{attributes:{0:"type",media:/^(screen|tty|tv|projection|handheld|print|braille|aural|all)$/},required:["type"]},35:"sub",36:"sup",table:{attributes:{0:"border",1:"cellpadding",2:"cellspacing",frame:/^(void|above|below|hsides|lhs|rhs|vsides|box|border)$/,rules:/^(none|groups|rows|cols|all)$/,3:"summary",4:"width"}},tbody:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},td:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},textarea:{attributes:["cols","rows","disabled","name","readonly"],required:["cols","rows"],inside:"form"},tfoot:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom)$/,2:"baseline"}},th:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},thead:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},37:"title",tr:{attributes:{align:/^(right|left|center|justify|char)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},38:"tt",39:"ul",40:"var"},skiped_attributes:[],skiped_attribute_values:[],getValidTagAttributes:function(a,b){var c={},d=this.getPossibleTagAttributes(a);
for(var e in b){var f=b[e];e=e.toLowerCase();var g=WYMeditor.Helper;g.contains(this.skiped_attributes,e)||g.contains(this.skiped_attribute_values,f)||("function"!=typeof f&&g.contains(d,e)?this.doesAttributeNeedsValidation(a,e)?this.validateAttribute(a,e,f)&&(c[e]=f):c[e]=f:jQuery.each(d,function(){this.match(/\/(.*)\//)&&(regex=new RegExp(this.match(/\/(.*)\//)[1]),regex.test(e)&&(c[e]=f))}))}return c},getUniqueAttributesAndEventsForTag:function(a){var b=[];if(this._tags[a]&&this._tags[a].attributes)for(var c in this._tags[a].attributes)b.push(parseInt(c,10)==c?this._tags[a].attributes[c]:c);return b},getDefaultAttributesAndEventsForTags:function(){var a=[];for(var b in this._events)a.push(this._events[b]);for(b in this._attributes)a.push(this._attributes[b]);return a},isValidTag:function(a){if(this._tags[a])return!0;for(var b in this._tags)if(this._tags[b]==a)return!0;return!1},getDefaultAttributesAndEventsForTag:function(a){var b=[];if(this.isValidTag(a)){var c=this.getDefaultAttributesAndEventsForTags();for(var d in c){var e=c[d];if("object"==typeof e){var f=WYMeditor.Helper;if(e.except&&f.contains(e.except,a)||e.only&&!f.contains(e.only,a))continue;var g=e.attributes?e.attributes:e.events;for(var h in g)b.push("string"!=typeof g[h]?h:g[h])}}}return b},doesAttributeNeedsValidation:function(a,b){return this._tags[a]&&(this._tags[a].attributes&&this._tags[a].attributes[b]||this._tags[a].required&&WYMeditor.Helper.contains(this._tags[a].required,b))},validateAttribute:function(a,b,c){return this._tags[a]&&this._tags[a].attributes&&this._tags[a].attributes[b]&&c.length>0&&!c.match(this._tags[a].attributes[b])||this._tags[a]&&this._tags[a].required&&WYMeditor.Helper.contains(this._tags[a].required,b)&&0===c.length?!1:"undefined"!=typeof this._tags[a]},getPossibleTagAttributes:function(a){return this._possible_tag_attributes||(this._possible_tag_attributes={}),this._possible_tag_attributes[a]||(this._possible_tag_attributes[a]=this.getUniqueAttributesAndEventsForTag(a).concat(this.getDefaultAttributesAndEventsForTag(a))),this._possible_tag_attributes[a]}},WYMeditor.XmlHelper=function(){return this._entitiesDiv=document.createElement("div"),this},WYMeditor.XmlHelper.prototype.tag=function(a,b,c){return b=b||!1,c=c||!1,"<"+a+(b?this.tagOptions(b):"")+(c?">":" />")},WYMeditor.XmlHelper.prototype.contentTag=function(a,b,c){return c=c||!1,"<"+a+(c?this.tagOptions(c):"")+">"+b+"</"+a+">"},WYMeditor.XmlHelper.prototype.cdataSection=function(a){return"<![CDATA["+a+"]]>"},WYMeditor.XmlHelper.prototype.escapeOnce=function(a){return this._fixDoubleEscape(this.escapeEntities(a))},WYMeditor.XmlHelper.prototype._fixDoubleEscape=function(a){return a.replace(/&amp;([a-z]+|(#\d+));/gi,"&$1;")},WYMeditor.XmlHelper.prototype.tagOptions=function(a){var b=this;b._formated_options="";for(var c in a){var d=a[c];"function"!=typeof d&&d.length>0&&(parseInt(c,10)==c&&"object"==typeof d&&(c=d.shift(),d=d.pop()),""!==c&&""!==d&&(b._formated_options+=" "+c+'="'+b.escapeOnce(d)+'"'))}return b._formated_options},WYMeditor.XmlHelper.prototype.escapeEntities=function(a,b){this._entitiesDiv.innerHTML=a,this._entitiesDiv.textContent=a;var c=this._entitiesDiv.innerHTML;return"undefined"==typeof b&&(b!==!1&&(c=c.replace('"',"&quot;")),b===!0&&(c=c.replace('"',"&#039;"))),c},WYMeditor.XmlHelper.prototype.parseAttributes=function(a){var b=[],c=a.split(/((=\s*")(")("))|((=\s*\')(\')(\'))|((=\s*[^>\s]*))/g);if(c.toString()!=a)for(var d in c){var e=c[d];if("function"!=typeof e&&0!==e.length){var f=new RegExp("(\\w+)\\s*"+e),g=a.match(f);if(g){var h=e.replace(/^[\s=]+/,""),i=h.charAt(0);i='"'==i?'"':"'"==i?"'":"",""!==i&&(h='"'==i?h.replace(/^"|"+$/g,""):h.replace(/^'|'+$/g,"")),a=a.replace(g[0],""),b.push([g[1],h])}}}return b},WYMeditor.STRINGS.bg={Strong:"ÐÐ¾Ð»ÑÑÐµÑ",Emphasis:"ÐÑÑÑÐ¸Ð²",Superscript:"ÐÐ¾ÑÐµÐ½ Ð¸Ð½Ð´ÐµÐºÑ",Subscript:"ÐÐ¾Ð»ÐµÐ½ Ð¸Ð½Ð´ÐµÐºÑ",Ordered_List:"ÐÐ¾Ð´ÑÐµÐ´ÐµÐ½ ÑÐ¿Ð¸ÑÑÐº",Unordered_List:"ÐÐµÐ¿Ð¾Ð´ÑÐµÐ´ÐµÐ½ ÑÐ¿Ð¸ÑÑÐº",Indent:"ÐÐ»Ð¾Ðº Ð½Ð°Ð²ÑÑÑÐµ",Outdent:"ÐÐ»Ð¾Ðº Ð½Ð°Ð²ÑÐ½",Undo:"Ð¡ÑÑÐ¿ÐºÐ° Ð½Ð°Ð·Ð°Ð´",Redo:"Ð¡ÑÑÐ¿ÐºÐ° Ð½Ð°Ð¿ÑÐµÐ´",Link:"Ð¡ÑÐ·Ð´Ð°Ð¹ ÑÐ¸Ð¿ÐµÑÐ²ÑÑÐ·ÐºÐ°",Unlink:"ÐÑÐµÐ¼Ð°ÑÐ½Ð¸ ÑÐ¸Ð¿ÐµÑÐ²ÑÑÐ·ÐºÐ°ÑÐ°",Image:"ÐÐ·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð¸Ðµ",Table:"Ð¢Ð°Ð±Ð»Ð¸ÑÐ°",HTML:"HTML",Paragraph:"ÐÐ±Ð·Ð°Ñ",Heading_1:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 1",Heading_2:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 2",Heading_3:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 3",Heading_4:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 4",Heading_5:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 5",Heading_6:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ 6",Preformatted:"ÐÑÐµÑÐ¾ÑÐ¼Ð°ÑÐ¸ÑÐ°Ð½",Blockquote:"Ð¦Ð¸ÑÐ°Ñ",Table_Header:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ Ð½Ð° ÑÐ°Ð±Ð»Ð¸ÑÐ°ÑÐ°",URL:"URL",Title:"ÐÐ°Ð³Ð»Ð°Ð²Ð¸Ðµ",Alternative_Text:"ÐÐ»ÑÐµÑÐ½Ð°ÑÐ¸Ð²ÐµÐ½ ÑÐµÐºÑÑ",Caption:"ÐÑÐ¸ÐºÐµÑ",Summary:"ÐÐ±ÑÐ¾",Number_Of_Rows:"ÐÑÐ¾Ð¹ ÑÐµÐ´Ð¾Ð²Ðµ",Number_Of_Cols:"ÐÑÐ¾Ð¹ ÐºÐ¾Ð»Ð¾Ð½Ð¸",Submit:"ÐÐ·Ð¿ÑÐ°ÑÐ¸",Cancel:"ÐÑÐ¼ÐµÐ½Ð¸",Choose:"ÐÐ°ÑÐ²Ð¾ÑÐ¸",Preview:"ÐÑÐµÐ´Ð²Ð°ÑÐ¸ÑÐµÐ»ÐµÐ½ Ð¿ÑÐµÐ³Ð»ÐµÐ´",Paste_From_Word:"ÐÐ¼ÑÐºÐ½Ð¸ Ð¾Ñ MS WORD",Tools:"ÐÐ½ÑÑÑÑÐ¼ÐµÐ½ÑÐ¸",Containers:"ÐÐ¾Ð½ÑÐµÐ¹Ð½ÐµÑÐ¸",Classes:"ÐÐ»Ð°ÑÐ¾Ð²Ðµ",Status:"Ð¡ÑÐ°ÑÑÑ",Source_Code:"ÐÐ·ÑÐ¾ÑÐ½Ð¸Ðº, ÐºÐ¾Ð´"},WYMeditor.STRINGS.ca={Strong:"Ressaltar",Emphasis:"Emfatitzar",Superscript:"Superindex",Subscript:"Subindex",Ordered_List:"Llistat ordenat",Unordered_List:"Llistat sense ordenar",Indent:"Indentat",Outdent:"Sense indentar",Undo:"Desfer",Redo:"Refer",Link:"EnllaÃ§ar",Unlink:"Eliminar enllaÃ§",Image:"Imatge",Table:"Taula",HTML:"HTML",Paragraph:"ParÃ graf",Heading_1:"CapÃ§alera 1",Heading_2:"CapÃ§alera 2",Heading_3:"CapÃ§alera 3",Heading_4:"CapÃ§alera 4",Heading_5:"CapÃ§alera 5",Heading_6:"CapÃ§alera 6",Preformatted:"Pre-formatejat",Blockquote:"Cita",Table_Header:"CapÃ§alera de la taula",URL:"URL",Title:"TÃ­tol",Alternative_Text:"Text alternatiu",Caption:"Llegenda",Summary:"Summary",Number_Of_Rows:"Nombre de files",Number_Of_Cols:"Nombre de columnes",Submit:"Enviar",Cancel:"CancelÂ·lar",Choose:"Triar",Preview:"Vista prÃ¨via",Paste_From_Word:"Pegar des de Word",Tools:"Eines",Containers:"Contenidors",Classes:"Classes",Status:"Estat",Source_Code:"Codi font"},WYMeditor.STRINGS.cs={Strong:"TuÄnÃ©",Emphasis:"KurzÃ­va",Superscript:"HornÃ­ index",Subscript:"DolnÃ­ index",Ordered_List:"ÄÃ­slovanÃ½ seznam",Unordered_List:"NeÄÃ­slovanÃ½ seznam",Indent:"ZvÄtÅ¡it odsazenÃ­",Outdent:"ZmenÅ¡it odsazenÃ­",Undo:"ZpÄt",Redo:"Znovu",Link:"VytvoÅit odkaz",Unlink:"ZruÅ¡it odkaz",Image:"ObrÃ¡zek",Table:"Tabulka",HTML:"HTML",Paragraph:"Odstavec",Heading_1:"Nadpis 1. ÃºrovnÄ",Heading_2:"Nadpis 2. ÃºrovnÄ",Heading_3:"Nadpis 3. ÃºrovnÄ",Heading_4:"Nadpis 4. ÃºrovnÄ",Heading_5:"Nadpis 5. ÃºrovnÄ",Heading_6:"Nadpis 6. ÃºrovnÄ",Preformatted:"PÅedformÃ¡tovanÃ½ text",Blockquote:"Citace",Table_Header:"HlaviÄkovÃ¡ buÅka tabulky",URL:"Adresa",Title:"Text po najetÃ­ myÅ¡Ã­",Alternative_Text:"Text pro pÅÃ­pad nezobrazenÃ­ obrÃ¡zku",Caption:"Titulek tabulky",Summary:"ShrnutÃ­ obsahu",Number_Of_Rows:"PoÄet ÅÃ¡dek",Number_Of_Cols:"PoÄet sloupcÅ¯",Submit:"VytvoÅit",Cancel:"ZruÅ¡it",Choose:"Vybrat",Preview:"NÃ¡hled",Paste_From_Word:"VloÅ¾it z Wordu",Tools:"NÃ¡stroje",Containers:"Typy obsahu",Classes:"TÅÃ­dy",Status:"Stav",Source_Code:"ZdrojovÃ½ kÃ³d"},WYMeditor.STRINGS.cy={Strong:"Bras",Emphasis:"Italig",Superscript:"Uwchsgript",Subscript:"Is-sgript",Ordered_List:"Rhestr mewn Trefn",Unordered_List:"Pwyntiau Bwled",Indent:"Mewnoli",Outdent:"Alloli",Undo:"Dadwneud",Redo:"Ailwneud",Link:"Cysylltu",Unlink:"Datgysylltu",Image:"Delwedd",Table:"Tabl",HTML:"HTML",Paragraph:"Paragraff",Heading_1:"Pennawd 1",Heading_2:"Pennawd 2",Heading_3:"Pennawd 3",Heading_4:"Pennawd 4",Heading_5:"Pennawd 5",Heading_6:"Pennawd 6",Preformatted:"Rhagfformat",Blockquote:"Bloc Dyfyniad",Table_Header:"Pennyn Tabl",URL:"URL",Title:"Teitl",Alternative_Text:"Testun Amgen",Caption:"Pennawd",Summary:"Crynodeb",Number_Of_Rows:"Nifer y rhesi",Number_Of_Cols:"Nifer y colofnau",Submit:"Anfon",Cancel:"Diddymu",Choose:"Dewis",Preview:"Rhagolwg",Paste_From_Word:"Gludo o Word",Tools:"Offer",Containers:"Cynhwysyddion",Classes:"Dosbarthiadau",Status:"Statws",Source_Code:"Cod ffynhonnell"},WYMeditor.STRINGS.da={Strong:"Fed",Emphasis:"SkrÃ¥",Superscript:"Superscript",Subscript:"Subscript",Ordered_List:"Ordnet liste",Unordered_List:"Uordnet liste",Indent:"Indrykke",Outdent:"Udrykke",Undo:"Fortryd",Redo:"Fortryd",Link:"Link",Unlink:"Fjern link",Image:"Billede",Table:"Tabel",HTML:"HTML",Paragraph:"Paragraf",Heading_1:"Overskrift 1",Heading_2:"Overskrift 2",Heading_3:"Overskrift 3",Heading_4:"Overskrift 4",Heading_5:"Overskrift 5",Heading_6:"Overskrift 6",Preformatted:"Forudformateret",Blockquote:"Citat",Table_Header:"Tabel Overskrift",URL:"URL",Title:"Titel",Alternative_Text:"Alternativ tekst",Caption:"Billedtekst",Summary:"ResumÃ©",Number_Of_Rows:"Antal rÃ¦kker",Number_Of_Cols:"Antal kolonner",Submit:"Indsend",Cancel:"Afbryd",Choose:"VÃ¦lg",Preview:"ForhÃ¥ndsvisning",Paste_From_Word:"IndsÃ¦t fra Word",Tools:"VÃ¦rktÃ¸jer",Containers:"Containere",Classes:"Klasser",Status:"Status",Source_Code:"Kildekode"},WYMeditor.STRINGS.de={Strong:"Fett",Emphasis:"Kursiv",Superscript:"Text hochstellen",Subscript:"Text tiefstellen",Ordered_List:"Geordnete Liste einfÃ¼gen",Unordered_List:"Ungeordnete Liste einfÃ¼gen",Indent:"Einzug erhÃ¶hen",Outdent:"Einzug vermindern",Undo:"Befehle rÃ¼ckgÃ¤ngig machen",Redo:"Befehle wiederherstellen",Link:"Hyperlink einfÃ¼gen",Unlink:"Hyperlink entfernen",Image:"Bild einfÃ¼gen",Table:"Tabelle einfÃ¼gen",HTML:"HTML anzeigen/verstecken",Paragraph:"Absatz",Heading_1:"Ãberschrift 1",Heading_2:"Ãberschrift 2",Heading_3:"Ãberschrift 3",Heading_4:"Ãberschrift 4",Heading_5:"Ãberschrift 5",Heading_6:"Ãberschrift 6",Preformatted:"Vorformatiert",Blockquote:"Zitat",Table_Header:"TabellenÃ¼berschrift",URL:"URL",Title:"Titel",Alternative_Text:"Alternativer Text",Caption:"TabellenÃ¼berschrift",Summary:"Summary",Number_Of_Rows:"Anzahl Zeilen",Number_Of_Cols:"Anzahl Spalten",Submit:"Absenden",Cancel:"Abbrechen",Choose:"AuswÃ¤hlen",Preview:"Vorschau",Paste_From_Word:"Aus Word einfÃ¼gen",Tools:"Werkzeuge",Containers:"Inhaltstyp",Classes:"Klassen",Status:"Status",Source_Code:"Quellcode"},WYMeditor.STRINGS.en={Strong:"Strong",Emphasis:"Emphasis",Superscript:"Superscript",Subscript:"Subscript",Ordered_List:"Ordered List",Unordered_List:"Unordered List",Indent:"Indent",Outdent:"Outdent",Undo:"Undo",Redo:"Redo",Link:"Link",Unlink:"Unlink",Image:"Image",Table:"Table",HTML:"HTML",Paragraph:"Paragraph",Heading_1:"Heading 1",Heading_2:"Heading 2",Heading_3:"Heading 3",Heading_4:"Heading 4",Heading_5:"Heading 5",Heading_6:"Heading 6",Preformatted:"Preformatted",Blockquote:"Blockquote",Table_Header:"Table Header",URL:"URL",Title:"Title",Relationship:"Relationship",Alternative_Text:"Alternative text",Caption:"Caption",Summary:"Summary",Number_Of_Rows:"Number of rows",Number_Of_Cols:"Number of cols",Submit:"Submit",Cancel:"Cancel",Choose:"Choose",Preview:"Preview",Paste_From_Word:"Paste from Word",Tools:"Tools",Containers:"Formatting",Classes:"Style",Status:"Status",Source_Code:"Source code"},WYMeditor.STRINGS.es={Strong:"Resaltar",Emphasis:"Enfatizar",Superscript:"Superindice",Subscript:"Subindice",Ordered_List:"Lista ordenada",Unordered_List:"Lista sin ordenar",Indent:"Indentado",Outdent:"Sin indentar",Undo:"Deshacer",Redo:"Rehacer",Link:"Enlazar",Unlink:"Eliminar enlace",Image:"Imagen",Table:"Tabla",HTML:"HTML",Paragraph:"PÃ¡rrafo",Heading_1:"Cabecera 1",Heading_2:"Cabecera 2",Heading_3:"Cabecera 3",Heading_4:"Cabecera 4",Heading_5:"Cabecera 5",Heading_6:"Cabecera 6",Preformatted:"Preformateado",Blockquote:"Cita",Table_Header:"Cabecera de la tabla",URL:"URL",Title:"TÃ­tulo",Alternative_Text:"Texto alternativo",Caption:"Leyenda",Summary:"Summary",Number_Of_Rows:"NÃºmero de filas",Number_Of_Cols:"NÃºmero de columnas",Submit:"Enviar",Cancel:"Cancelar",Choose:"Seleccionar",Preview:"Vista previa",Paste_From_Word:"Pegar desde Word",Tools:"Herramientas",Containers:"Contenedores",Classes:"Clases",Status:"Estado",Source_Code:"CÃ³digo fuente"},WYMeditor.STRINGS.fa={Strong:"Ù¾Ø±Ø±ÙÚ¯",Emphasis:"Ø§ÛØªØ§ÙÛÚ©",Superscript:"Ø¨Ø§ÙØ§ÙÙÙØ³â ",Subscript:"Ø²ÙØ±ÙÙÙØ³â",Ordered_List:"ÙÛØ³Øª ÙØ±ØªØ¨",Unordered_List:"ÙÛØ³Øª ÙØ§ÙØ±ØªØ¨",Indent:"Ø§ÙØ²ÙØ¯Ù Ø¯ÙØ¯Ø§ÙÙ",Outdent:"Ú©Ø§ÙØ´ Ø¯ÙØ¯Ø§ÙÙ",Undo:"ÙØ§Ú¯Ø±Ø¯Ø§ÙÛ",Redo:"ØªÚ©Ø±Ø§Ø±",Link:"Ø³Ø§Ø®ØªÙ Ù¾ÛÙÙØ¯",Unlink:"Ø¨Ø±Ø¯Ø§Ø´ØªÙ Ù¾ÛÙÙØ¯",Image:"ØªØµÙÛØ±",Table:"Ø¬Ø¯ÙÙ",HTML:"HTML",Paragraph:"Ù¾Ø§Ø±Ø§Ú¯Ø±Ø§Ù",Heading_1:"Ø³Ø±ØªÛØªØ± Û±",Heading_2:"Ø³Ø±ØªÛØªØ± Û²",Heading_3:"Ø³Ø±ØªÛØªØ± Û³",Heading_4:"Ø³Ø±ØªÛØªØ± Û´",Heading_5:"Ø³Ø±ØªÛØªØ± Ûµ",Heading_6:"Ø³Ø±ØªÛØªØ± Û¶",Preformatted:"ÙØ§ÙØ¨ Ø¢ÙØ§Ø¯Ù",Blockquote:"ÙÙÙ ÙÙÙ",Table_Header:"Ø³Ø±Ø¬Ø¯ÙÙ",URL:"Ø¢Ø¯Ø±Ø³ Ø§ÛÙØªØ±ÙØªÛ",Title:"Ø¹ÙÙØ§Ù",Alternative_Text:"ÙØªÙ Ø¬Ø§ÛÚ¯Ø²ÛÙ",Caption:"Ø¹ÙÙØ§Ù",Summary:"Summary",Number_Of_Rows:"ØªØ¹Ø¯Ø§Ø¯ Ø³Ø·Ø±ÙØ§",Number_Of_Cols:"ØªØ¹Ø¯Ø§Ø¯ Ø³ØªÙÙâÙØ§",Submit:"ÙØ±Ø³ØªØ§Ø¯Ù",Cancel:"ÙØºÙ",Choose:"Ø§ÙØªØ®Ø§Ø¨",Preview:"Ù¾ÛØ´âÙÙØ§ÛØ´",Paste_From_Word:"Ø§ÙØªÙØ§Ù Ø§Ø² ÙØ±Ø¯",Tools:"Ø§Ø¨Ø²Ø§Ø±",Containers:"âÙØ§ÙØ¨âÙØ§",Classes:"Ú©ÙØ§Ø³âÙØ§",Status:"ÙØ¶Ø¹ÛØª",Source_Code:"Ú©Ø¯ ÙØ¨Ø¯Ø£"},WYMeditor.STRINGS.fi={Strong:"Lihavoitu",Emphasis:"Korostus",Superscript:"YlÃ¤indeksi",Subscript:"Alaindeksi",Ordered_List:"Numeroitu lista",Unordered_List:"Luettelomerkit",Indent:"Suurenna sisennystÃ¤",Outdent:"PienennÃ¤ sisennystÃ¤",Undo:"Kumoa",Redo:"Toista",Link:"LinkitÃ¤",Unlink:"Poista linkitys",Image:"Kuva",Table:"Taulukko",HTML:"HTML",Paragraph:"Kappale",Heading_1:"Otsikko 1",Heading_2:"Otsikko 2",Heading_3:"Otsikko 3",Heading_4:"Otsikko 4",Heading_5:"Otsikko 5",Heading_6:"Otsikko 6",Preformatted:"Esimuotoilu",Blockquote:"Sitaatti",Table_Header:"Taulukon otsikko",URL:"URL",Title:"Otsikko",Alternative_Text:"Vaihtoehtoinen teksti",Caption:"Kuvateksti",Summary:"Yhteenveto",Number_Of_Rows:"Rivien mÃ¤Ã¤rÃ¤",Number_Of_Cols:"Palstojen mÃ¤Ã¤rÃ¤",Submit:"LÃ¤hetÃ¤",Cancel:"Peruuta",Choose:"Valitse",Preview:"Esikatsele",Paste_From_Word:"Tuo Wordista",Tools:"TyÃ¶kalut",Containers:"Muotoilut",Classes:"Luokat",Status:"Tila",Source_Code:"LÃ¤hdekoodi"},WYMeditor.STRINGS.fr={Strong:"Mise en Ã©vidence",Emphasis:"Emphase",Superscript:"Exposant",Subscript:"Indice",Ordered_List:"Liste OrdonnÃ©e",Unordered_List:"Liste Non-OrdonnÃ©e",Indent:"ImbriquÃ©",Outdent:"Non-imbriquÃ©",Undo:"Annuler",Redo:"RÃ©tablir",Link:"Lien",Unlink:"Supprimer le Lien",Image:"Image",Table:"Tableau",HTML:"HTML",Paragraph:"Paragraphe",Heading_1:"Titre 1",Heading_2:"Titre 2",Heading_3:"Titre 3",Heading_4:"Titre 4",Heading_5:"Titre 5",Heading_6:"Titre 6",Preformatted:"PrÃ©-formattÃ©",Blockquote:"Citation",Table_Header:"Cellule de titre",URL:"URL",Title:"Titre",Alternative_Text:"Texte alternatif",Caption:"LÃ©gende",Summary:"RÃ©sumÃ©",Number_Of_Rows:"Nombre de lignes",Number_Of_Cols:"Nombre de colonnes",Submit:"Envoyer",Cancel:"Annuler",Choose:"Choisir",Preview:"PrÃ©visualisation",Paste_From_Word:"Copier depuis Word",Tools:"Outils",Containers:"Type de texte",Classes:"Type de contenu",Status:"Infos",Source_Code:"Code source"},WYMeditor.STRINGS.gl={Strong:"Moita Ã©nfase",Emphasis:"Ãnfase",Superscript:"SuperÃ­ndice",Subscript:"SubÃ­ndice",Ordered_List:"Lista ordenada",Unordered_List:"Lista sen ordenar",Indent:"AniÃ±ar",Outdent:"DesaniÃ±ar",Undo:"Desfacer",Redo:"Refacer",Link:"LigazÃ³n",Unlink:"Desligar",Image:"Imaxe",Table:"TÃ¡boa",HTML:"HTML",Paragraph:"ParÃ¡grafo",Heading_1:"TÃ­tulo 1",Heading_2:"TÃ­tulo 2",Heading_3:"TÃ­tulo 3",Heading_4:"TÃ­tulo 4",Heading_5:"TÃ­tulo 5",Heading_6:"TÃ­tulo 6",Preformatted:"Preformatado",Blockquote:"Cita en parÃ¡grafo",Table_Header:"Cabeceira da tÃ¡boa",URL:"URL",Title:"TÃ­tulo",Alternative_Text:"Texto alternativo",Caption:"TÃ­tulo",Summary:"Resumo",Number_Of_Rows:"NÃºmero de filas",Number_Of_Cols:"NÃºmero de columnas",Submit:"Enviar",Cancel:"Cancelar",Choose:"Escoller",Preview:"Previsualizar",Paste_From_Word:"Colar dende Word",Tools:"Ferramentas",Containers:"Contenedores",Classes:"Clases",Status:"Estado",Source_Code:"CÃ³digo fonte"},WYMeditor.STRINGS.he={Strong:"×××§",Emphasis:"×××××",Superscript:"××ª× ×¢×××",Subscript:"××ª× ×ª××ª×",Ordered_List:"×¨×©××× ××××¡×¤×¨×ª",Unordered_List:"×¨×©××× ×× ××××¡×¤×¨×ª",Indent:"×××× ×¤× ×××",Outdent:"×××× ××××¦×",Undo:"××× ×¤×¢×××",Redo:"××¦×¢ ××××© ×¤×¢×××",Link:"×§××©××¨",Unlink:"××× ×§××©××¨",Image:"×ª××× ×",Table:"××××",HTML:"×§×× HTML",Paragraph:"×¤×¡×§×",Heading_1:"×××ª×¨×ª 1 ; ×ª× &lt;h1&gt;",Heading_2:"×××ª×¨×ª 2 ; ×ª× &lt;h2&gt;",Heading_3:"×××ª×¨×ª 3 ; ×ª× &lt;h3&gt;",Heading_4:"×××ª×¨×ª 4 ; ×ª× &lt;h4&gt;",Heading_5:"×××ª×¨×ª 5 ; ×ª× &lt;h5&gt;",Heading_6:"×××ª×¨×ª 6 ; ×ª× &lt;h6&gt;",Preformatted:"××©××¨ ×¨×××××",Blockquote:"×¦××××",Table_Header:"×××ª×¨×ª ××××",URL:"×§××©××¨ (URL)",Title:"×××ª×¨×ª",Alternative_Text:"××§×¡× ××××¤×",Caption:"×××ª×¨×ª",Summary:"×¡××××",Number_Of_Rows:"××¡×¤×¨ ×©××¨××ª",Number_Of_Cols:"××¡×¤×¨ ×××¨××",Submit:"×©××",Cancel:"×××",Choose:"×××¨",Preview:"×ª×¦××× ××§××××",Paste_From_Word:"××¢×ª×§ ×-Word",Tools:"××××",Containers:"××××××",Classes:"××××§××ª",Status:"××¦×",Source_Code:"×§×× ××§××¨"},WYMeditor.STRINGS.hr={Strong:"Podebljano",Emphasis:"NaglaÅ¡eno",Superscript:"Iznad",Subscript:"Ispod",Ordered_List:"Pobrojana lista",Unordered_List:"Nepobrojana lista",Indent:"Uvuci",Outdent:"Izvuci",Undo:"PoniÅ¡ti promjenu",Redo:"Ponovno promjeni",Link:"Hiperveza",Unlink:"Ukloni hipervezu",Image:"Slika",Table:"Tablica",HTML:"HTML",Paragraph:"Paragraf",Heading_1:"Naslov 1",Heading_2:"Naslov 2",Heading_3:"Naslov 3",Heading_4:"Naslov 4",Heading_5:"Naslov 5",Heading_6:"Naslov 6",Preformatted:"Unaprijed formatirano",Blockquote:"Citat",Table_Header:"Zaglavlje tablice",URL:"URL",Title:"Naslov",Alternative_Text:"Alternativni tekst",Caption:"Zaglavlje",Summary:"SaÅ¾etak",Number_Of_Rows:"Broj redova",Number_Of_Cols:"Broj kolona",Submit:"Snimi",Cancel:"Odustani",Choose:"Izaberi",Preview:"Pregled",Paste_From_Word:"Zalijepi iz Word-a",Tools:"Alati",Containers:"Kontejneri",Classes:"Klase",Status:"Status",Source_Code:"Izvorni kod"},WYMeditor.STRINGS.hu={Strong:"FÃ©lkÃ¶vÃ©r",Emphasis:"Kiemelt",Superscript:"FelsÅ index",Subscript:"AlsÃ³ index",Ordered_List:"Rendezett lista",Unordered_List:"Rendezetlen lista",Indent:"BekezdÃ©s",Outdent:"BekezdÃ©s tÃ¶rlÃ©se",Undo:"Visszavon",Redo:"VisszaÃ¡llÃ­t",Link:"Link",Unlink:"Link tÃ¶rlÃ©se",Image:"KÃ©p",Table:"TÃ¡bla",HTML:"HTML",Paragraph:"BekezdÃ©s",Heading_1:"CÃ­msor 1",Heading_2:"CÃ­msor 2",Heading_3:"CÃ­msor 3",Heading_4:"CÃ­msor 4",Heading_5:"CÃ­msor 5",Heading_6:"CÃ­msor 6",Preformatted:"ElÅformÃ¡zott",Blockquote:"IdÃ©zet",Table_Header:"TÃ¡bla FejlÃ©c",URL:"WebcÃ­m",Title:"MegnevezÃ©s",Alternative_Text:"AlternatÃ­v szÃ¶veg",Caption:"FejlÃ©c",Summary:"Summary",Number_Of_Rows:"Sorok szÃ¡ma",Number_Of_Cols:"Oszlopok szÃ¡ma",Submit:"ElkÃ¼ld",Cancel:"MÃ©gsem",Choose:"VÃ¡laszt",Preview:"ElÅnÃ©zet",Paste_From_Word:"MÃ¡solÃ¡s Word-bÃ³l",Tools:"EszkÃ¶zÃ¶k",Containers:"Tartalmak",Classes:"OsztÃ¡lyok",Status:"Ãllapot",Source_Code:"ForrÃ¡skÃ³d"},WYMeditor.STRINGS.it={Strong:"Grassetto",Emphasis:"Corsetto",Superscript:"Apice",Subscript:"Pedice",Ordered_List:"Lista Ordinata",Unordered_List:"Lista Puntata",Indent:"Indenta",Outdent:"Caccia",Undo:"Indietro",Redo:"Avanti",Link:"Inserisci Link",Unlink:"Togli Link",Image:"Inserisci Immagine",Table:"Inserisci Tabella",HTML:"HTML",Paragraph:"Paragrafo",Heading_1:"Heading 1",Heading_2:"Heading 2",Heading_3:"Heading 3",Heading_4:"Heading 4",Heading_5:"Heading 5",Heading_6:"Heading 6",Preformatted:"Preformattato",Blockquote:"Blockquote",Table_Header:"Header Tabella",URL:"Indirizzo",Title:"Titolo",Alternative_Text:"Testo Alternativo",Caption:"Caption",Summary:"Summary",Number_Of_Rows:"Numero di Righe",Number_Of_Cols:"Numero di Colonne",Submit:"Invia",Cancel:"Cancella",Choose:"Scegli",Preview:"Anteprima",Paste_From_Word:"Incolla",Tools:"Tools",Containers:"Contenitori",Classes:"Classi",Status:"Stato",Source_Code:"Codice Sorgente"},WYMeditor.STRINGS.ja={Strong:"å¼·èª¿<strong>",Emphasis:"å¼·èª¿<em>",Superscript:"ä¸ä»ã",Subscript:"ä¸ä»ã",Ordered_List:"çªå·ä»ããªã¹ã",Unordered_List:"çªå·ç¡ãªã¹ã",Indent:"ã¤ã³ãã³ããå¢ãã",Outdent:"ã¤ã³ãã³ããæ¸ãã",Undo:"åã«æ»ã",Redo:"ããç´ã",Link:"ãªã³ã¯",Unlink:"ãªã³ã¯åæ¶",Image:"ç»å",Table:"ãã¼ãã«",HTML:"HTML",Paragraph:"æ®µè½",Heading_1:"è¦åºã 1",Heading_2:"è¦åºã 2",Heading_3:"è¦åºã 3",Heading_4:"è¦åºã 4",Heading_5:"è¦åºã 5",Heading_6:"è¦åºã 6",Preformatted:"æ´å½¢æ¸ã¿ãã­ã¹ã",Blockquote:"å¼ç¨æ",Table_Header:"è¡¨è¦åºã",URL:"URL",Title:"ã¿ã¤ãã«",Alternative_Text:"ä»£æ¿ãã­ã¹ã",Caption:"ã­ã£ãã·ã§ã³",Summary:"ãµããªã¼",Number_Of_Rows:"è¡æ°",Number_Of_Cols:"åæ°",Submit:"éä¿¡",Cancel:"ã­ã£ã³ã»ã«",Choose:"é¸æ",Preview:"ãã¬ãã¥ã¼",Paste_From_Word:"è²¼ãä»ã",Tools:"ãã¼ã«",Containers:"ã³ã³ãã",Classes:"ã¯ã©ã¹",Status:"ã¹ãã¼ã¿ã¹",Source_Code:"ã½ã¼ã¹ã³ã¼ã"},WYMeditor.STRINGS.lt={Strong:"Pusjuodis",Emphasis:"Kursyvas",Superscript:"VirÅ¡utinis indeksas",Subscript:"Apatinis indeksas",Ordered_List:"Numeruotas sÄraÅ¡as",Unordered_List:"SuÅ¾enklintas sÄraÅ¡as",Indent:"Padidinti Ä¯traukÄ",Outdent:"SumaÅ¾inti Ä¯traukÄ",Undo:"AtÅ¡aukti",Redo:"Atstatyti",Link:"Nuoroda",Unlink:"Panaikinti nuorodÄ",Image:"Vaizdas",Table:"LentelÄ",HTML:"HTML",Paragraph:"Paragrafas",Heading_1:"AntraÅ¡tinis 1",Heading_2:"AntraÅ¡tinis 2",Heading_3:"AntraÅ¡tinis 3",Heading_4:"AntraÅ¡tinis 4",Heading_5:"AntraÅ¡tinis 5",Heading_6:"AntraÅ¡tinis 6",Preformatted:"Formuotas",Blockquote:"Citata",Table_Header:"LentelÄs antraÅ¡tÄ",URL:"URL",Title:"AntraÅ¡tinis tekstas",Relationship:"SÄryÅ¡is",Alternative_Text:"Alternatyvus tekstas",Caption:"AntraÅ¡tÄ",Summary:"Santrauka",Number_Of_Rows:"EiluÄiÅ³ skaiÄius",Number_Of_Cols:"StulpeliÅ³ skaiÄius",Submit:"IÅ¡saugoti",Cancel:"Nutraukti",Choose:"Rinktis",Preview:"PerÅ¾iÅ«ra",Paste_From_Word:"Ä®kelti iÅ¡ MS Word",Tools:"Ä®rankiai",Containers:"Stiliai",Classes:"KlasÄs",Status:"Statusas",Source_Code:"IÅ¡eities tekstas"},WYMeditor.STRINGS.nb={Strong:"Fet",Emphasis:"Uthevet",Superscript:"OpphÃ¸yet",Subscript:"Nedsenket",Ordered_List:"Nummerert liste",Unordered_List:"Punktliste",Indent:"Rykk inn",Outdent:"Rykk ut",Undo:"Angre",Redo:"Gjenta",Link:"Lenke",Unlink:"Ta bort lenken",Image:"Bilde",Table:"Tabell",HTML:"HTML",Paragraph:"Avsnitt",Heading_1:"Overskrift 1",Heading_2:"Overskrift 2",Heading_3:"Overskrift 3",Heading_4:"Overskrift 4",Heading_5:"Overskrift 5",Heading_6:"Overskrift 6",Preformatted:"Preformatert",Blockquote:"Sitat",Table_Header:"Tabelloverskrift",URL:"URL",Title:"Tittel",Alternative_Text:"Alternativ tekst",Caption:"Overskrift",Summary:"Sammendrag",Number_Of_Rows:"Antall rader",Number_Of_Cols:"Antall kolonner",Submit:"Ok",Cancel:"Avbryt",Choose:"Velg",Preview:"ForhÃ¥ndsvis",Paste_From_Word:"Lim inn fra Word",Tools:"VerktÃ¸y",Containers:"Formatering",Classes:"Klasser",Status:"Status",Source_Code:"Kildekode"},WYMeditor.STRINGS.nl={Strong:"Sterk benadrukken",Emphasis:"Benadrukken",Superscript:"Bovenschrift",Subscript:"Onderschrift",Ordered_List:"Geordende lijst",Unordered_List:"Ongeordende lijst",Indent:"Inspringen",Outdent:"Terugspringen",Undo:"Ongedaan maken",Redo:"Opnieuw uitvoeren",Link:"Linken",Unlink:"Ontlinken",Image:"Afbeelding",Table:"Tabel",HTML:"HTML",Paragraph:"Paragraaf",Heading_1:"Kop 1",Heading_2:"Kop 2",Heading_3:"Kop 3",Heading_4:"Kop 4",Heading_5:"Kop 5",Heading_6:"Kop 6",Preformatted:"Voorgeformatteerd",Blockquote:"Citaat",Table_Header:"Tabel-kop",URL:"URL",Title:"Titel",Relationship:"Relatie",Alternative_Text:"Alternatieve tekst",Caption:"Bijschrift",Summary:"Summary",Number_Of_Rows:"Aantal rijen",Number_Of_Cols:"Aantal kolommen",Submit:"Versturen",Cancel:"Annuleren",Choose:"Kiezen",Preview:"Voorbeeld bekijken",Paste_From_Word:"Plakken uit Word",Tools:"Hulpmiddelen",Containers:"Teksttypes",Classes:"Klassen",Status:"Status",Source_Code:"Broncode"},WYMeditor.STRINGS.nn={Strong:"Feit",Emphasis:"Utheva",Superscript:"OpphÃ¸gd",Subscript:"Nedsenka",Ordered_List:"Nummerert liste",Unordered_List:"Punktliste",Indent:"Rykk inn",Outdent:"Rykk ut",Undo:"Angre",Redo:"Gjentaka",Link:"Lenkje",Unlink:"Ta bort lenkja",Image:"Bilete",Table:"Tabell",HTML:"HTML",Paragraph:"Avsnitt",Heading_1:"Overskrift 1",Heading_2:"Overskrift 2",Heading_3:"Overskrift 3",Heading_4:"Overskrift 4",Heading_5:"Overskrift 5",Heading_6:"Overskrift 6",Preformatted:"Preformatert",Blockquote:"Sitat",Table_Header:"Tabelloverskrift",URL:"URL",Title:"Tittel",Alternative_Text:"Alternativ tekst",Caption:"Overskrift",Summary:"Samandrag",Number_Of_Rows:"Tal pÃ¥ rader",Number_Of_Cols:"Tal pÃ¥ kolonnar",Submit:"Ok",Cancel:"Avbryt",Choose:"Vel",Preview:"FÃ¸rehandsvis",Paste_From_Word:"Lim inn frÃ¥ Word",Tools:"Verkty",Containers:"Formatering",Classes:"Klassar",Status:"Status",Source_Code:"Kjeldekode"},WYMeditor.STRINGS.pl={Strong:"Nacisk",Emphasis:"Emfaza",Superscript:"Indeks gÃ³rny",Subscript:"Indeks dolny",Ordered_List:"Lista numerowana",Unordered_List:"Lista wypunktowana",Indent:"ZwiÄksz wciÄcie",Outdent:"Zmniejsz wciÄcie",Undo:"Cofnij",Redo:"PonÃ³w",Link:"Wstaw link",Unlink:"UsuÅ link",Image:"Obraz",Table:"Tabela",HTML:"Å¹rÃ³dÅo HTML",Paragraph:"Akapit",Heading_1:"NagÅÃ³wek 1",Heading_2:"NagÅÃ³wek 2",Heading_3:"NagÅÃ³wek 3",Heading_4:"NagÅÃ³wek 4",Heading_5:"NagÅÃ³wek 5",Heading_6:"NagÅÃ³wek 6",Preformatted:"Preformatowany",Blockquote:"Cytat blokowy",Table_Header:"NagÅÃ³wek tabeli",URL:"URL",Title:"TytuÅ",Alternative_Text:"Tekst alternatywny",Caption:"TytuÅ tabeli",Summary:"Summary",Number_Of_Rows:"Liczba wierszy",Number_Of_Cols:"Liczba kolumn",Submit:"WyÅlij",Cancel:"Anuluj",Choose:"Wybierz",Preview:"PodglÄd",Paste_From_Word:"Wklej z Worda",Tools:"NarzÄdzia",Containers:"Format",Classes:"Styl",Status:"Status",Source_Code:"Kod ÅºrÃ³dÅowy"},WYMeditor.STRINGS["pt-br"]={Strong:"Resaltar",Emphasis:"Enfatizar",Superscript:"Sobre escrito",Subscript:"Sub escrito ",Ordered_List:"Lista ordenada",Unordered_List:"Lista desordenada",Indent:"Indentado",Outdent:"Desidentar",Undo:"Desfazer",Redo:"Refazer",Link:"Link",Unlink:"Remover Link",Image:"Imagem",Table:"Tabela",HTML:"HTML",Paragraph:"ParÃ¡grafo",Heading_1:"TÃ­tulo 1",Heading_2:"TÃ­tulo 2",Heading_3:"TÃ­tulo 3",Heading_4:"TÃ­tulo 4",Heading_5:"TÃ­tulo 5",Heading_6:"TÃ­tulo 6",Preformatted:"Preformatado",Blockquote:"CitaÃ§Ã£o",Table_Header:"TÃ­tulo de tabela",URL:"URL",Title:"TÃ­tulo",Alternative_Text:"Texto alternativo",Caption:"Legenda",Summary:"Summary",Number_Of_Rows:"NÃºmero de linhas",Number_Of_Cols:"NÃºmero de colunas",Submit:"Enviar",Cancel:"Cancelar",Choose:"Selecionar",Preview:"Previsualizar",Paste_From_Word:"Copiar do Word",Tools:"Ferramentas",Containers:"Conteneiners",Classes:"Classes",Status:"Estado",Source_Code:"CÃ³digo fonte"},WYMeditor.STRINGS.pt={Strong:"Negrito",Emphasis:"ItÃ¡lico",Superscript:"Sobrescrito",Subscript:"Subsescrito",Ordered_List:"Lista Numerada",Unordered_List:"Lista Marcada",Indent:"Aumentar IndentaÃ§Ã£",Outdent:"Diminuir IndentaÃ§Ã£",Undo:"Desfazer",Redo:"Restaurar",Link:"Link",Unlink:"Tirar link",Image:"Imagem",Table:"Tabela",HTML:"HTML",Paragraph:"ParÃ¡grafo",Heading_1:"TÃ­tulo 1",Heading_2:"TÃ­tulo 2",Heading_3:"TÃ­tulo 3",Heading_4:"TÃ­tulo 4",Heading_5:"TÃ­tulo 5",Heading_6:"TÃ­tulo 6",Preformatted:"PrÃ©-formatado",Blockquote:"CitaÃ§Ã£o",Table_Header:"CabeÃ§alho Tabela",URL:"URL",Title:"TÃ­tulo",Alternative_Text:"Texto Alterativo",Caption:"TÃ­tulo Tabela",Summary:"Summary",Number_Of_Rows:"NÃºmero de Linhas",Number_Of_Cols:"NÃºmero de Colunas",Submit:"Enviar",Cancel:"Cancelar",Choose:"Escolha",Preview:"Prever",Paste_From_Word:"Colar do Word",Tools:"Ferramentas",Containers:"Containers",Classes:"Classes",Status:"Status",Source_Code:"CÃ³digo Fonte"},WYMeditor.STRINGS.ru={Strong:"ÐÐ¸ÑÐ½ÑÐ¹",Emphasis:"ÐÐ°ÐºÐ»Ð¾Ð½Ð½ÑÐ¹",Superscript:"ÐÐ°Ð´ÑÑÑÐ¾ÑÐ½ÑÐ¹",Subscript:"ÐÐ¾Ð´ÑÑÑÐ¾ÑÐ½ÑÐ¹",Ordered_List:"ÐÑÐ¼ÐµÑÐ¾Ð²Ð°Ð½ÑÐ¹ ÑÐ¿Ð¸ÑÐ¾Ðº",Unordered_List:"ÐÐµÐ½ÑÐ¼ÐµÑÐ¾Ð²Ð°Ð½ÑÐ¹ ÑÐ¿Ð¸ÑÐ¾Ðº",Indent:"Ð£Ð²ÐµÐ»Ð¸ÑÐ¸ÑÑ Ð¾ÑÑÑÑÐ¿",Outdent:"Ð£Ð¼ÐµÐ½ÑÑÐ¸ÑÑ Ð¾ÑÑÑÑÐ¿",Undo:"ÐÑÐ¼ÐµÐ½Ð¸ÑÑ",Redo:"ÐÐ¾Ð²ÑÐ¾ÑÐ¸ÑÑ",Link:"Ð¡ÑÑÐ»ÐºÐ°",Unlink:"Ð£Ð´Ð°Ð»Ð¸ÑÑ ÑÑÑÐ»ÐºÑ",Image:"ÐÐ·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð¸Ðµ",Table:"Ð¢Ð°Ð±Ð»Ð¸ÑÐ°",HTML:"ÐÑÐ°Ð²Ð¸ÑÑ HTML",Paragraph:"ÐÐ°ÑÐ°Ð³ÑÐ°Ñ",Heading_1:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 1",Heading_2:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 2",Heading_3:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 3",Heading_4:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 4",Heading_5:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 5",Heading_6:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 6",Preformatted:"Preformatted",Blockquote:"Ð¦Ð¸ÑÐ°ÑÐ°",Table_Header:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÑÐ°Ð±Ð»Ð¸ÑÑ",URL:"URL",Title:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº",Alternative_Text:"ÐÐ»ÑÑÐµÑÐ½Ð°ÑÐ¸Ð²Ð½ÑÐ¹ ÑÐµÐºÑÑ",Caption:"ÐÐ°Ð´Ð¿Ð¸ÑÑ",Summary:"Summary",Number_Of_Rows:"ÐÐ¾Ð»-Ð²Ð¾ ÑÑÑÐ¾Ðº",Number_Of_Cols:"ÐÐ¾Ð»-Ð²Ð¾ ÑÑÐ¾Ð»Ð±ÑÐ¾Ð²",Submit:"ÐÑÐ¿ÑÐ°Ð²Ð¸ÑÑ",Cancel:"ÐÑÐ¼ÐµÐ½Ð°",Choose:"ÐÑÐ±Ð¾Ñ",Preview:"ÐÑÐ¾ÑÐ¼Ð¾ÑÑ",Paste_From_Word:"ÐÑÑÐ°Ð²Ð¸ÑÑ Ð¸Ð· Word",Tools:"ÐÐ½ÑÑÑÑÐ¼ÐµÐ½ÑÑ",Containers:"ÐÐ¾Ð½ÑÐµÐ¹Ð½ÐµÑÑ",Classes:"ÐÐ»Ð°ÑÑÑ",Status:"Ð¡ÑÐ°ÑÑÑ",Source_Code:"ÐÑÑÐ¾Ð´Ð½ÑÐ¹ ÐºÐ¾Ð´"},WYMeditor.STRINGS.sk={Strong:"TuÄnÃ©",Emphasis:"KurzÃ­va",Superscript:"HornÃ½ index",Subscript:"DolnÃ½ index",Ordered_List:"ÄÃ­slovanÃ½ zoznam",Unordered_List:"NeÄÃ­slovanÃ½ zoznam",Indent:"ZvÃ¤ÄÅ¡iÅ¥ odsadenie",Outdent:"ZmenÅ¡iÅ¥ odsadenie",Undo:"VrÃ¡tiÅ¥",Redo:"OpakovaÅ¥",Link:"VytvoriÅ¥ odkaz",Unlink:"ZruÅ¡iÅ¥ odkaz",Image:"ObrÃ¡zok",Table:"TabuÄ¾ka",HTML:"HTML",Paragraph:"Odstavec",Heading_1:"Nadpis 1. Ãºrovne",Heading_2:"Nadpis 2. Ãºrovne",Heading_3:"Nadpis 3. Ãºrovne",Heading_4:"Nadpis 4. Ãºrovne",Heading_5:"Nadpis 5. Ãºrovne",Heading_6:"Nadpis 6. Ãºrovne",Preformatted:"PredformÃ¡tovanÃ½ text",Blockquote:"CitÃ¡cia",Table_Header:"HlaviÄka tabuÄ¾ky",URL:"URL adresa",Title:"Titulok",Alternative_Text:"AlternatÃ­vny text",Caption:"Titulok tabuÄ¾ky",Summary:"Zhrnutie obsahu",Number_Of_Rows:"PoÄet riadkov",Number_Of_Cols:"PoÄet stÄºpcov",Submit:"OdoslaÅ¥",Cancel:"ZruÅ¡iÅ¥",Choose:"VybraÅ¥",Preview:"NÃ¡hÄ¾ad",Paste_From_Word:"VloÅ¾iÅ¥ z Wordu",Tools:"NÃ¡stroje",Containers:"Typy obsahu",Classes:"Triedy",Status:"Stav",Source_Code:"ZdrojovÃ½ kÃ³d"},WYMeditor.STRINGS.sv={Strong:"Viktigt",Emphasis:"Betoning",Superscript:"UpphÃ¶jt",Subscript:"NedsÃ¤nkt",Ordered_List:"Nummerlista",Unordered_List:"Punktlista",Indent:"Indrag",Outdent:"Utdrag",Undo:"Ãngra",Redo:"GÃ¶r om",Link:"LÃ¤nk",Unlink:"Ta bort lÃ¤nk",Image:"Bild",Table:"Tabell",HTML:"HTML",Paragraph:"Paragraf",Heading_1:"Rubrik 1",Heading_2:"Rubrik 2",Heading_3:"Rubrik 3",Heading_4:"Rubrik 4",Heading_5:"Rubrik 5",Heading_6:"Rubrik 6",Preformatted:"FÃ¶rformaterad",Blockquote:"Blockcitat",Table_Header:"Tabellrubrik",URL:"URL",Title:"Titel",Relationship:"Relation",Alternative_Text:"Alternativ text",Caption:"Ãverskrift",Summary:"Summary",Number_Of_Rows:"Antal rader",Number_Of_Cols:"Antal kolumner",Submit:"Skicka",Cancel:"Avbryt",Choose:"VÃ¤lj",Preview:"FÃ¶rhandsgranska",Paste_From_Word:"Klistra in frÃ¥n Word",Tools:"Verktyg",Containers:"Formatering",Classes:"Klasser",Status:"Status",Source_Code:"KÃ¤llkod"},WYMeditor.STRINGS.tr={Strong:"KalÄ±n",Emphasis:"Vurgu",Superscript:"Ãstsimge",Subscript:"Altsimge",Ordered_List:"SÄ±ralÄ± List",Unordered_List:"SÄ±rasÄ±z List",Indent:"Girintile",Outdent:"ÃÄ±kÄ±ntÄ±la",Undo:"Geri Al",Redo:"Yinele",Link:"BaÄlantÄ±",Unlink:"BaÄlantÄ±yÄ± KaldÄ±r",Image:"Resim",Table:"Tablo",HTML:"HTML",Paragraph:"ParaÄraf",Heading_1:"BaÅlÄ±k 1",Heading_2:"BaÅlÄ±k 2",Heading_3:"BaÅlÄ±k 3",Heading_4:"BaÅlÄ±k 4",Heading_5:"BaÅlÄ±k 5",Heading_6:"BaÅlÄ±k 6",Preformatted:"Ãnceden FormatlÄ±",Blockquote:"AlÄ±ntÄ±",Table_Header:"Tablo BaÅlÄ±ÄÄ±",URL:"URL",Title:"BaÅlÄ±k",Alternative_Text:"Alternatif Metin",Caption:"Etiket",Summary:"Ãzet",Number_Of_Rows:"SatÄ±r sayÄ±sÄ±",Number_Of_Cols:"SÃ¼tun sayÄ±sÄ±",Submit:"GÃ¶nder",Cancel:"Ä°ptal",Choose:"SeÃ§",Preview:"Ãnizleme",Paste_From_Word:"Word'den yapÄ±ÅtÄ±r",Tools:"AraÃ§lar",Containers:"KapsayÄ±cÄ±lar",Classes:"SÄ±nÄ±flar",Status:"Durum",Source_Code:"Kaynak Kodu"},WYMeditor.STRINGS.zh_cn={Strong:"å ç²",Emphasis:"æä½",Superscript:"ä¸æ ",Subscript:"ä¸æ ",Ordered_List:"æåºåè¡¨",Unordered_List:"æ åºåè¡¨",Indent:"å¢å ç¼©è¿",Outdent:"åå°ç¼©è¿",Undo:"æ¤æ¶",Redo:"éå",Link:"é¾æ¥",Unlink:"åæ¶é¾æ¥",Image:"å¾ç",Table:"è¡¨æ ¼",HTML:"HTMLæºä»£ç ",Paragraph:"æ®µè½",Heading_1:"æ é¢ 1",Heading_2:"æ é¢ 2",Heading_3:"æ é¢ 3",Heading_4:"æ é¢ 4",Heading_5:"æ é¢ 5",Heading_6:"æ é¢ 6",Preformatted:"åå§ææ¬",Blockquote:"å¼è¯­",Table_Header:"è¡¨å¤´",URL:"å°å",Title:"æç¤ºæå­",Alternative_Text:"å¤±ææå­",Caption:"æ é¢",Summary:"Summary",Number_Of_Rows:"è¡æ°",Number_Of_Cols:"åæ°",Submit:"æäº¤",Cancel:"æ¾å¼",Choose:"éæ©",Preview:"é¢è§",Paste_From_Word:"ä»Wordç²è´´çº¯ææ¬",Tools:"å·¥å·",Containers:"å®¹å¨",Classes:"é¢å®ä¹æ ·å¼",Status:"ç¶æ",Source_Code:"æºä»£ç ",Attachment:"éä»¶",NewParagraph:"æ°æ®µè½"},WYMeditor.STRINGS.zh_tw={Strong:"å ç²",Emphasis:"æé«",Superscript:"ä¸æ¨",Subscript:"ä¸æ¨",Ordered_List:"æåºåè¡¨",Unordered_List:"ç¡åºåè¡¨",Indent:"å¢å ç¸®æ",Outdent:"æ¸å°ç¸®æ",Undo:"åæ¶",Redo:"éå",Link:"éçµ",Unlink:"åæ¶éçµ",Image:"åç",Table:"è¡¨æ ¼",HTML:"HTML æºä»£ç¢¼",Paragraph:"æ®µè½",Heading_1:"æ¨é¡ 1",Heading_2:"æ¨é¡ 2",Heading_3:"æ¨é¡ 3",Heading_4:"æ¨é¡ 4",Heading_5:"æ¨é¡ 5",Heading_6:"æ¨é¡ 6",Preformatted:"åå§ææ¬",Blockquote:"å¼èª",Table_Header:"è¡¨æ ¼é é¨",URL:"å°å",Title:"æç¤ºæå­",Alternative_Text:"å¤±ææå­",Caption:"ä¸»é¡",Summary:"å¤§ç¶±",Number_Of_Rows:"è¡æ¸",Number_Of_Cols:"åæ¸",Submit:"æäº¤",Cancel:"æ¾æ£",Choose:"é¸æ",Preview:"é è¦½",Paste_From_Word:"å¾Wordè¤å¶ç´ææ¬",Tools:"å·¥å·",Containers:"å®¹å¨",Classes:"é å®ç¾©æ¨£å¼",Status:"çæ",Source_Code:"æºä»£ç¢¼",Attachment:"éä»¶",NewParagraph:"æ°æ®µè½"},window.rangy=function(){function a(a,b){var c=typeof a[b];return c==l||!(c!=k||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=k||!a[b])}function c(a,b){return typeof a[b]!=m}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&r(a,q)&&t(a,p)}function f(a){window.alert("Rangy not supported in your browser. Reason: "+a),u.initialized=!0,u.supported=!1
}function g(a){var b="Rangy warning: "+a;u.config.alertOnWarn?window.alert(b):typeof window.console!=m&&typeof window.console.log!=m&&window.console.log(b)}function h(){if(!u.initialized){var c,d=!1,g=!1;a(document,"createRange")&&(c=document.createRange(),r(c,o)&&t(c,n)&&(d=!0),c.detach());var h=b(document,"body")?document.body:document.getElementsByTagName("body")[0];h&&a(h,"createTextRange")&&(c=h.createTextRange(),e(c)&&(g=!0)),d||g||f("Neither Range nor TextRange are implemented"),u.initialized=!0,u.features={implementsDomRange:d,implementsTextRange:g};for(var i=w.concat(v),j=0,k=i.length;k>j;++j)try{i[j](u)}catch(l){b(window,"console")&&a(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",l)}}}function i(a){a=a||window,h();for(var b=0,c=x.length;c>b;++b)x[b](a)}function j(a){this.name=a,this.initialized=!1,this.supported=!1}var k="object",l="function",m="undefined",n=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],o=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],p=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],q=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],r=d(a),s=d(b),t=d(c),u={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:r,areHostObjects:s,areHostProperties:t,isTextRange:e},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};u.fail=f,u.warn=g,{}.hasOwnProperty?u.util.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}:f("hasOwnProperty not supported");var v=[],w=[];u.init=h,u.addInitListener=function(a){u.initialized?a(u):v.push(a)};var x=[];u.addCreateMissingNativeApiListener=function(a){x.push(a)},u.createMissingNativeApi=i,j.prototype.fail=function(a){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+a)},j.prototype.warn=function(a){u.warn("Module "+this.name+": "+a)},j.prototype.createError=function(a){return new Error("Error in Rangy "+this.name+" module: "+a)},u.createModule=function(a,b){var c=new j(a);u.modules[a]=c,w.push(function(a){b(a,c),c.initialized=!0,c.supported=!0})},u.requireModules=function(a){for(var b,c,d=0,e=a.length;e>d;++d){if(c=a[d],b=u.modules[c],!(b&&b instanceof j))throw new Error("Module '"+c+"' not found");if(!b.supported)throw new Error("Module '"+c+"' not supported")}};var y=!1,z=function(){y||(y=!0,u.initialized||h())};return typeof window==m?void f("No window found"):typeof document==m?void f("No document found"):(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",z,!1),a(window,"addEventListener")?window.addEventListener("load",z,!1):a(window,"attachEvent")?window.attachEvent("onload",z):f("Window does not have required addEventListener or attachEvent method"),u)}(),rangy.createModule("DomUtil",function(a,b){function c(a){var b;return typeof a.namespaceURI==z||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)b++;return b}function f(a){var b;return j(a)?a.length:(b=a.childNodes)?b.length:0}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(D(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function j(a){var b=a.nodeType;return 3==b||4==b||8==b}function k(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function l(a,b){var c=a.cloneNode(!1);return c.deleteData(0,b),a.deleteData(b,a.length-b),k(c,a),c}function m(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=z)return a.ownerDocument;if(typeof a.document!=z)return a.document;if(a.parentNode)return m(a.parentNode);throw new Error("getDocument: no document found for node")}function n(a){var b=m(a);if(typeof b.defaultView!=z)return b.defaultView;if(typeof b.parentWindow!=z)return b.parentWindow;throw new Error("Cannot get a window object for node")}function o(a){if(typeof a.contentDocument!=z)return a.contentDocument;if(typeof a.contentWindow!=z)return a.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function p(a){if(typeof a.contentWindow!=z)return a.contentWindow;if(typeof a.contentDocument!=z)return a.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function q(a){return A.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]}function r(a){for(var b;b=a.parentNode;)a=b;return a}function s(a,b,c,d){var f,h,j,k,l;if(a==c)return b===d?0:d>b?-1:1;if(f=i(c,a,!0))return b<=e(f)?-1:1;if(f=i(a,c,!0))return e(f)<d?-1:1;if(h=g(a,c),j=a===h?h:i(a,h,!0),k=c===h?h:i(c,h,!0),j===k)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(l=h.firstChild;l;){if(l===j)return-1;if(l===k)return 1;l=l.nextSibling}throw new Error("Should not be here!")}function t(a){for(var b,c=m(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function u(a){if(!a)return"[No node]";if(j(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">["+a.childNodes.length+"]"}return a.nodeName}function v(a){this.root=a,this._next=a}function w(a){return new v(a)}function x(a,b){this.node=a,this.offset=b}function y(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var z="undefined",A=a.util;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),A.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var B=document.createElement("div");A.areHostMethods(B,["insertBefore","appendChild","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),A.isHostProperty(B,"innerHTML")||b.fail("Element is missing innerHTML property");var C=document.createTextNode("test");A.areHostMethods(C,["splitText","deleteData","insertData","appendData","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"])||!A.areHostProperties(C,["data"]))||b.fail("Incomplete Text Node implementation");var D=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};v.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},x.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+u(this.node)+":"+this.offset+")]"}},y.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},y.prototype.toString=function(){return this.message},a.dom={arrayContains:D,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,getClosestAncestorIn:i,isCharacterDataNode:j,insertAfter:k,splitDataNode:l,getDocument:m,getWindow:n,getIframeWindow:p,getIframeDocument:o,getBody:q,getRootContainer:r,comparePoints:s,inspectNode:u,fragmentFromNodeChildren:t,createIterator:w,DomPosition:x},a.DOMException=y}),rangy.createModule("DomRange",function(a){function b(a,b){return 3!=a.nodeType&&(K.isAncestorOf(a,b.startContainer,!0)||K.isAncestorOf(a,b.endContainer,!0))}function c(a){return K.getDocument(a.startContainer)}function d(a,b,c){var d=a._listeners[b];if(d)for(var e=0,f=d.length;f>e;++e)d[e].call(a,{target:a,args:c})}function e(a){return new L(a.parentNode,K.getNodeIndex(a))}function f(a){return new L(a.parentNode,K.getNodeIndex(a)+1)}function g(a,b,c){var d=11==a.nodeType?a.firstChild:a;return K.isCharacterDataNode(b)?c==b.length?K.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:K.splitDataNode(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function h(a){for(var b,d,e,f=c(a.range).createDocumentFragment();d=a.next();){if(b=a.isPartiallySelectedSubtree(),d=d.cloneNode(!b),b&&(e=a.getSubtreeIterator(),d.appendChild(h(e)),e.detach(!0)),10==d.nodeType)throw new M("HIERARCHY_REQUEST_ERR");f.appendChild(d)}return f}function i(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),i(g,b,c),g.detach(!0),c.stop)return}else for(d=K.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function j(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),j(b),b.detach(!0)):a.remove()}function k(a){for(var b,d,e=c(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),d=a.getSubtreeIterator(),b.appendChild(k(d)),d.detach(!0)):a.remove(),10==b.nodeType)throw new M("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function l(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return i(new n(a,!1),function(a){e&&!d.test(a.nodeType)||f&&!c(a)||g.push(a)}),g}function m(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+K.inspectNode(a.startContainer)+":"+a.startOffset+", "+K.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function n(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&K.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||K.isCharacterDataNode(this.sc)?K.getClosestAncestorIn(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||K.isCharacterDataNode(this.ec)?K.getClosestAncestorIn(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function o(a){this.code=this[a],this.codeName=a,this.message="RangeException: "+this.codeName}function p(a,b,c){this.nodes=l(a,b,c),this._next=this.nodes[0],this._position=0}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,K.arrayContains(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(V(a,b))throw new o("INVALID_NODE_TYPE_ERR")}function s(a){if(!a.startContainer)throw new M("INVALID_STATE_ERR")}function t(a,b){if(!K.arrayContains(b,a.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function u(a,b){if(0>b||b>(K.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new M("INDEX_SIZE_ERR")}function v(a,b){if(T(a,!0)!==T(b,!0))throw new M("WRONG_DOCUMENT_ERR")}function w(a){if(U(a,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function x(a,b){if(!a)throw new M(b)}function y(a){return!K.arrayContains(O,a.nodeType)&&!T(a,!0)}function z(a,b){return b<=(K.isCharacterDataNode(a)?a.length:a.childNodes.length)}function A(a){if(s(a),y(a.startContainer)||y(a.endContainer)||!z(a.startContainer,a.startOffset)||!z(a.endContainer,a.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")")}function B(){}function C(a){a.START_TO_START=_,a.START_TO_END=ab,a.END_TO_END=bb,a.END_TO_START=cb,a.NODE_BEFORE=db,a.NODE_AFTER=eb,a.NODE_BEFORE_AND_AFTER=fb,a.NODE_INSIDE=gb}function D(a){C(a),C(a.prototype)}function E(a,b){return function(){A(this);var c,d,e=this.startContainer,g=this.startOffset,h=this.commonAncestorContainer,j=new n(this,!0);e!==h&&(c=K.getClosestAncestorIn(e,h,!0),d=f(c),e=d.node,g=d.offset),i(j,w),j.reset();var k=a(j);return j.detach(),b(this,e,g,e,g),k}}function F(c,d,g){function h(a,b){return function(c){s(this),t(c,N),t(S(c),O);var d=(a?e:f)(c);(b?i:l)(this,d.node,d.offset)}}function i(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((S(b)!=S(e)||1==K.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function l(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((S(b)!=S(e)||-1==K.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}function m(a,b,c){(b!==a.startContainer||c!==a.startOffset||b!==a.endContainer||c!==a.endOffset)&&d(a,b,c,b,c)}c.prototype=new B,a.util.extend(c.prototype,{setStart:function(a,b){s(this),r(a,!0),u(a,b),i(this,a,b)},setEnd:function(a,b){s(this),r(a,!0),u(a,b),l(this,a,b)},setStartBefore:h(!0,!0),setStartAfter:h(!1,!0),setEndBefore:h(!0,!1),setEndAfter:h(!1,!1),collapse:function(a){A(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){s(this),r(a,!0),d(this,a,0,a,K.getNodeLength(a))},selectNode:function(a){s(this),r(a,!1),t(a,N);var b=e(a),c=f(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:E(k,d),deleteContents:E(j,d),canSurroundContents:function(){A(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},detach:function(){g(this)},splitBoundaries:function(){A(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=a===c;K.isCharacterDataNode(c)&&e>0&&e<c.length&&K.splitDataNode(c,e),K.isCharacterDataNode(a)&&b>0&&b<a.length&&(a=K.splitDataNode(a,b),f?(e-=b,c=a):c==a.parentNode&&e>=K.getNodeIndex(a)&&e++,b=0),d(this,a,b,c,e)},normalizeBoundaries:function(){A(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(c=a,e=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},g=function(d){var f=d.previousSibling;if(f&&f.nodeType==d.nodeType){a=d;var g=d.length;if(b=f.length,d.insertData(0,f.data),f.parentNode.removeChild(f),a==c)e+=b,c=a;else if(c==d.parentNode){var h=K.getNodeIndex(d);e==h?(c=d,e=g):e>h&&e--}}},h=!0;if(K.isCharacterDataNode(c))c.length==e&&f(c);else{if(e>0){var i=c.childNodes[e-1];i&&K.isCharacterDataNode(i)&&f(i)}h=!this.collapsed}if(h){if(K.isCharacterDataNode(a))0==b&&g(a);else if(b<a.childNodes.length){var j=a.childNodes[b];j&&K.isCharacterDataNode(j)&&g(j)}}else a=c,b=e;d(this,a,b,c,e)},collapseToPoint:function(a,b){s(this),r(a,!0),u(a,b),m(this,a,b)}}),D(c)}function G(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:K.getCommonAncestor(a.startContainer,a.endContainer)}function H(a,b,c,e,f){var g=a.startContainer!==b||a.startOffset!==c,h=a.endContainer!==e||a.endOffset!==f;a.startContainer=b,a.startOffset=c,a.endContainer=e,a.endOffset=f,G(a),d(a,"boundarychange",{startMoved:g,endMoved:h})}function I(a){s(a),a.startContainer=a.startOffset=a.endContainer=a.endOffset=null,a.collapsed=a.commonAncestorContainer=null,d(a,"detach",null),a._listeners=null}function J(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},G(this)}a.requireModules(["DomUtil"]);var K=a.dom,L=K.DomPosition,M=a.DOMException;n.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,K.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!K.isCharacterDataNode(c)||c!==this.sc&&c!==this.ec?c.parentNode&&c.parentNode.removeChild(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return b(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new J(c(this.range));var b=this._current,d=b,e=0,f=b,g=K.getNodeLength(b);K.isAncestorOf(b,this.sc,!0)&&(d=this.sc,e=this.so),K.isAncestorOf(b,this.ec,!0)&&(f=this.ec,g=this.eo),H(a,d,e,f,g)}return new n(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},o.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},o.prototype.toString=function(){return this.message},p.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var N=[1,3,4,5,7,8,10],O=[2,9,11],P=[5,6,10,12],Q=[1,3,4,5,7,8,10,11],R=[1,3,4,5,7,8],S=K.getRootContainer,T=q([9,11]),U=q(P),V=q([6,10,12]),W=document.createElement("style"),X=!1;try{W.innerHTML="<b>x</b>",X=3==W.firstChild.nodeType}catch(Y){}a.features.htmlParsingConforms=X;var Z=X?function(a){var b=this.startContainer,c=K.getDocument(b);if(!b)throw new M("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:K.isCharacterDataNode(b)&&(d=K.parentElement(b)),d=null===d||"HTML"==d.nodeName&&K.isHtmlNamespace(K.getDocument(d).documentElement)&&K.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,K.fragmentFromNodeChildren(d)}:function(a){s(this);var b=c(this),d=b.createElement("body");return d.innerHTML=a,K.fragmentFromNodeChildren(d)},$=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],_=0,ab=1,bb=2,cb=3,db=0,eb=1,fb=2,gb=3;B.prototype={attachListener:function(a,b){this._listeners[a].push(b)},compareBoundaryPoints:function(a,b){A(this),v(this.startContainer,b.startContainer);var c,d,e,f,g=a==cb||a==_?"start":"end",h=a==ab||a==_?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],K.comparePoints(c,d,e,f)},insertNode:function(a){if(A(this),t(a,Q),w(this.startContainer),K.isAncestorOf(a,this.startContainer,!0))throw new M("HIERARCHY_REQUEST_ERR");var b=g(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){A(this);var a,b;if(this.collapsed)return c(this).createDocumentFragment();if(this.startContainer===this.endContainer&&K.isCharacterDataNode(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=c(this).createDocumentFragment(),b.appendChild(a),b;var d=new n(this,!0);return a=h(d),d.detach(),a},canSurroundContents:function(){A(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},surroundContents:function(a){if(t(a,R),!this.canSurroundContents())throw new o("BAD_BOUNDARYPOINTS_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);g(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){A(this);for(var a,b=new J(c(this)),d=$.length;d--;)a=$[d],b[a]=this[a];return b},toString:function(){A(this);var a=this.startContainer;if(a===this.endContainer&&K.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new n(this,!0);return i(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){A(this);var b=a.parentNode,c=K.getNodeIndex(a);if(!b)throw new M("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?fb:db:e>0?eb:gb},comparePoint:function(a,b){return A(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),K.comparePoints(a,b,this.startContainer,this.startOffset)<0?-1:K.comparePoints(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Z,toHtml:function(){A(this);var a=c(this).createElement("div");return a.appendChild(this.cloneContents()),a.innerHTML},intersectsNode:function(a,b){if(A(this),x(a,"NOT_FOUND_ERR"),K.getDocument(a)!==c(this))return!1;var d=a.parentNode,e=K.getNodeIndex(a);x(d,"NOT_FOUND_ERR");var f=K.comparePoints(d,e,this.endContainer,this.endOffset),g=K.comparePoints(d,e+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return A(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),K.comparePoints(a,b,this.startContainer,this.startOffset)>=0&&K.comparePoints(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a,b){if(A(this),c(a)!=c(this))throw new M("WRONG_DOCUMENT_ERR");var d=K.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),e=K.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return b?0>=d&&e>=0:0>d&&e>0},intersection:function(a){if(this.intersectsRange(a)){var b=K.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=K.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsRange(a,!0)){var b=this.cloneRange();return-1==K.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==K.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new o("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==gb},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,K.getNodeLength(a))<=0},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();b.setEnd(d,d.length);var e=this.containsRange(b);return b.detach(),e}return this.containsNodeContents(a)},createNodeIterator:function(a,b){return A(this),new p(this,a,b)},getNodes:function(a,b){return A(this),l(this,a,b)},getDocument:function(){return c(this)},collapseBefore:function(a){s(this),this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){s(this),this.setStartAfter(a),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return J.rangesEqual(this,a)},inspect:function(){return m(this)}},F(J,H,I),a.rangePrototype=B.prototype,J.rangeProperties=$,J.RangeIterator=n,J.copyComparisonConstants=D,J.createPrototypeRange=F,J.inspect=m,J.getRangeDocument=c,J.rangesEqual=function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},a.DomRange=J,a.RangeException=o}),rangy.createModule("WrappedRange",function(a){function b(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var e=c.parentElement(),f=d==e?d:g.getCommonAncestor(d,e);return f==b?f:g.getCommonAncestor(b,f)}function c(a){return 0==a.compareEndPoints("StartToEnd",a)}function d(a,b,c,d){var e=a.duplicate();e.collapse(c);var f=e.parentElement();if(g.isAncestorOf(b,f,!0)||(f=b),!f.canHaveHTML)return new h(f.parentNode,g.getNodeIndex(f));var i,j,k,l,m,n=g.getDocument(f).createElement("span"),o=c?"StartToStart":"StartToEnd";do f.insertBefore(n,n.previousSibling),e.moveToElementText(n);while((i=e.compareEndPoints(o,a))>0&&n.previousSibling);if(m=n.nextSibling,-1==i&&m&&g.isCharacterDataNode(m)){e.setEndPoint(c?"EndToStart":"EndToEnd",a);var p;if(/[\r\n]/.test(m.data)){var q=e.duplicate(),r=q.text.replace(/\r\n/g,"\r").length;for(p=q.moveStart("character",r);-1==(i=q.compareEndPoints("StartToEnd",q));)p++,q.moveStart("character",1)}else p=e.text.length;l=new h(m,p)}else j=(d||!c)&&n.previousSibling,k=(d||c)&&n.nextSibling,l=k&&g.isCharacterDataNode(k)?new h(k,0):j&&g.isCharacterDataNode(j)?new h(j,j.length):new h(f,g.getNodeIndex(n));return n.parentNode.removeChild(n),l}function e(a,b){var c,d,e,f,h=a.offset,i=g.getDocument(a.node),j=i.body.createTextRange(),k=g.isCharacterDataNode(a.node);return k?(c=a.node,d=c.parentNode):(f=a.node.childNodes,c=h<f.length?f[h]:null,d=a.node),e=i.createElement("span"),e.innerHTML="&#feff;",c?d.insertBefore(e,c):d.appendChild(e),j.moveToElementText(e),j.collapse(!b),d.removeChild(e),k&&j[b?"moveStart":"moveEnd"]("character",h),j}a.requireModules(["DomUtil","DomRange"]);var f,g=a.dom,h=g.DomPosition,i=a.DomRange;if(!a.features.implementsDomRange||a.features.implementsTextRange&&a.config.preferTextRange){if(a.features.implementsTextRange){f=function(a){this.textRange=a,this.refresh()},f.prototype=new i(document),f.prototype.refresh=function(){var a,e,f=b(this.textRange);c(this.textRange)?e=a=d(this.textRange,f,!0,!0):(a=d(this.textRange,f,!0,!1),e=d(this.textRange,f,!1,!1)),this.setStart(a.node,a.offset),this.setEnd(e.node,e.offset)},i.copyComparisonConstants(f);var j=function(){return this}();"undefined"==typeof j.Range&&(j.Range=f),a.createNativeRange=function(a){return a=a||document,a.body.createTextRange()}}}else!function(){function b(a){for(var b,c=k.length;c--;)b=k[c],a[b]=a.nativeRange[b]}function c(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e;(f||g)&&(a.setEnd(d,e),a.setStart(b,c))}function d(a){a.nativeRange.detach(),a.detached=!0;for(var b,c=k.length;c--;)b=k[c],a[b]=null}var e,h,j,k=i.rangeProperties;f=function(a){if(!a)throw new Error("Range must be specified");this.nativeRange=a,b(this)},i.createPrototypeRange(f,c,d),e=f.prototype,e.selectNode=function(a){this.nativeRange.selectNode(a),b(this)},e.deleteContents=function(){this.nativeRange.deleteContents(),b(this)},e.extractContents=function(){var a=this.nativeRange.extractContents();return b(this),a},e.cloneContents=function(){return this.nativeRange.cloneContents()},e.surroundContents=function(a){this.nativeRange.surroundContents(a),b(this)},e.collapse=function(a){this.nativeRange.collapse(a),b(this)},e.cloneRange=function(){return new f(this.nativeRange.cloneRange())},e.refresh=function(){b(this)},e.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");g.getBody(document).appendChild(l);var m=document.createRange();m.setStart(l,0),m.setEnd(l,0);try{m.setStart(l,1),h=!0,e.setStart=function(a,c){this.nativeRange.setStart(a,c),b(this)},e.setEnd=function(a,c){this.nativeRange.setEnd(a,c),b(this)},j=function(a){return function(c){this.nativeRange[a](c),b(this)}}}catch(n){h=!1,e.setStart=function(a,c){try{this.nativeRange.setStart(a,c)}catch(d){this.nativeRange.setEnd(a,c),this.nativeRange.setStart(a,c)}b(this)},e.setEnd=function(a,c){try{this.nativeRange.setEnd(a,c)}catch(d){this.nativeRange.setStart(a,c),this.nativeRange.setEnd(a,c)}b(this)},j=function(a,c){return function(d){try{this.nativeRange[a](d)}catch(e){this.nativeRange[c](d),this.nativeRange[a](d)}b(this)}}}e.setStartBefore=j("setStartBefore","setEndBefore"),e.setStartAfter=j("setStartAfter","setEndAfter"),e.setEndBefore=j("setEndBefore","setStartBefore"),e.setEndAfter=j("setEndAfter","setStartAfter"),m.selectNodeContents(l),e.selectNodeContents=m.startContainer==l&&m.endContainer==l&&0==m.startOffset&&m.endOffset==l.length?function(a){this.nativeRange.selectNodeContents(a),b(this)}:function(a){this.setStart(a,0),this.setEnd(a,i.getEndOffset(a))},m.selectNodeContents(l),m.setEnd(l,3);var o=document.createRange();o.selectNodeContents(l),o.setEnd(l,4),o.setStart(l,2),e.compareBoundaryPoints=-1==m.compareBoundaryPoints(m.START_TO_END,o)&1==m.compareBoundaryPoints(m.END_TO_START,o)?function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)},a.util.isHostMethod(m,"createContextualFragment")&&(e.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),g.getBody(document).removeChild(l),m.detach(),o.detach()}(),a.createNativeRange=function(a){return a=a||document,a.createRange()};a.features.implementsTextRange&&(f.rangeToTextRange=function(a){if(a.collapsed){var b=e(new h(a.startContainer,a.startOffset),!0);return b}var c=e(new h(a.startContainer,a.startOffset),!0),d=e(new h(a.endContainer,a.endOffset),!1),f=g.getDocument(a.startContainer).body.createTextRange();return f.setEndPoint("StartToStart",c),f.setEndPoint("EndToEnd",d),f}),f.prototype.getName=function(){return"WrappedRange"},a.WrappedRange=f,a.createRange=function(b){return b=b||document,new f(a.createNativeRange(b))},a.createRangyRange=function(a){return a=a||document,new i(a)},a.createIframeRange=function(b){return a.createRange(g.getIframeDocument(b))},a.createIframeRangyRange=function(b){return a.createRangyRange(g.getIframeDocument(b))},a.addCreateMissingNativeApiListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(this)}),c=b=null})}),rangy.createModule("WrappedSelection",function(a,b){function c(a){return(a||window).getSelection()}function d(a){return(a||window).document.selection}function e(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function f(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function g(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function h(b){var c;return b instanceof y?(c=b._selectionNativeRange,c||(c=a.createNativeRange(w.getDocument(b.startContainer)),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset),b._selectionNativeRange=c,b.attachListener("detach",function(){this._selectionNativeRange=null}))):b instanceof z?c=b.nativeRange:a.features.implementsDomRange&&b instanceof w.getWindow(b.startContainer).Range&&(c=b),c}function i(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!w.isAncestorOf(a[0],a[b]))return!1;return!0}function j(a){var b=a.getNodes();if(!i(b))throw new Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return b[0]}function k(a){return!!a&&"undefined"!=typeof a.text}function l(a,b){var c=new z(b);a._ranges=[c],e(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function m(b){if(b._ranges.length=0,"None"==b.docSelection.type)g(b);else{var c=b.docSelection.createRange();if(k(c))l(b,c);else{b.rangeCount=c.length;for(var d,f=w.getDocument(c.item(0)),h=0;h<b.rangeCount;++h)d=a.createRange(f),d.selectNode(c.item(h)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,e(b,b._ranges[b.rangeCount-1],!1)}}}function n(a,b){for(var c=a.docSelection.createRange(),d=j(b),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=0,h=c.length;h>g;++g)f.add(c.item(g));try{f.add(d)}catch(i){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}f.select(),m(a)}function o(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()
}function p(a,b){for(var c,d=w.getDocument(b[0].startContainer),e=w.getBody(d).createControlRange(),f=0;rangeCount>f;++f){c=j(b[f]);try{e.add(c)}catch(g){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}e.select(),m(a)}function q(a,b){if(a.anchorNode&&w.getDocument(a.anchorNode)!==w.getDocument(b))throw new A("WRONG_DOCUMENT_ERR")}function r(a){var b=[],c=new B(a.anchorNode,a.anchorOffset),d=new B(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=y.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.requireModules(["DomUtil","DomRange","WrappedRange"]),a.config.checkSelectionRanges=!0;var s,t,u="boolean",v="_rangySelection",w=a.dom,x=a.util,y=a.DomRange,z=a.WrappedRange,A=a.DOMException,B=w.DomPosition,C="Control",D=a.util.isHostMethod(window,"getSelection"),E=a.util.isHostObject(document,"selection"),F=E&&(!D||a.config.preferTextRange);F?(s=d,a.isSelectionValid=function(a){var b=(a||window).document,c=b.selection;return"None"!=c.type||w.getDocument(c.createRange().parentElement())==b}):D?(s=c,a.isSelectionValid=function(){return!0}):b.fail("Neither document.selection or window.getSelection() detected."),a.getNativeSelection=s;var G=s(),H=a.createNativeRange(document),I=w.getBody(document),J=x.areHostObjects(G,["anchorNode","focusNode"]&&x.areHostProperties(G,["anchorOffset","focusOffset"]));a.features.selectionHasAnchorAndFocus=J;var K=x.isHostMethod(G,"extend");a.features.selectionHasExtend=K;var L="number"==typeof G.rangeCount;a.features.selectionHasRangeCount=L;var M=!1,N=!0;x.areHostMethods(G,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof G.rangeCount&&a.features.implementsDomRange&&!function(){var a=document.createElement("iframe");I.appendChild(a);var b=w.getIframeDocument(a);b.open(),b.write("<html><head></head><body>12</body></html>"),b.close();var c=w.getIframeWindow(a).getSelection(),d=b.documentElement,e=d.lastChild,f=e.firstChild,g=b.createRange();g.setStart(f,1),g.collapse(!0),c.addRange(g),N=1==c.rangeCount,c.removeAllRanges();var h=g.cloneRange();g.setStart(f,0),h.setEnd(f,2),c.addRange(g),c.addRange(h),M=2==c.rangeCount,g.detach(),h.detach(),I.removeChild(a)}(),a.features.selectionSupportsMultipleRanges=M,a.features.collapsedNonEditableSelectionsSupported=N;var O,P=!1;I&&x.isHostMethod(I,"createControlRange")&&(O=I.createControlRange(),x.areHostProperties(O,["item","add"])&&(P=!0)),a.features.implementsControlRange=P,t=J?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var Q;x.isHostMethod(G,"getRangeAt")?Q=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:J&&(Q=function(b){var c=w.getDocument(b.anchorNode),d=a.createRange(c);return d.setStart(b.anchorNode,b.anchorOffset),d.setEnd(b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&(d.setStart(b.focusNode,b.focusOffset),d.setEnd(b.anchorNode,b.anchorOffset)),d}),a.getSelection=function(a){a=a||window;var b=a[v],c=s(a),e=E?d(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh(a)):(b=new o(c,e,a),a[v]=b),b},a.getIframeSelection=function(b){return a.getSelection(w.getIframeWindow(b))};var R=o.prototype;if(!F&&J&&x.areHostMethods(G,["removeAllRanges","addRange"])){R.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),g(this)};var S=function(b,c){var d=y.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.nativeSelection.addRange(h(e)),b.nativeSelection.extend(c.startContainer,c.startOffset),b.refresh()};R.addRange=L?function(b,c){if(P&&E&&this.docSelection.type==C)n(this,b);else if(c&&K)S(this,b);else{var d;if(M?d=this.rangeCount:(this.removeAllRanges(),d=0),this.nativeSelection.addRange(h(b)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==d+1){if(a.config.checkSelectionRanges){var f=Q(this.nativeSelection,this.rangeCount-1);f&&!y.rangesEqual(f,b)&&(b=new z(f))}this._ranges[this.rangeCount-1]=b,e(this,b,V(this.nativeSelection)),this.isCollapsed=t(this)}else this.refresh()}}:function(a,b){b&&K?S(this,a):(this.nativeSelection.addRange(h(a)),this.refresh())},R.setRanges=function(a){if(P&&a.length>1)p(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(x.isHostMethod(G,"empty")&&x.isHostMethod(H,"select")&&P&&F))return b.fail("No means of selecting a Range or TextRange was found"),!1;R.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=w.getDocument(this.anchorNode);else if(this.docSelection.type==C){var b=this.docSelection.createRange();b.length&&(a=w.getDocument(b.item(0)).body.createTextRange())}if(a){var c=a.body.createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}g(this)},R.addRange=function(a){this.docSelection.type==C?n(this,a):(z.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,e(this,a,!1))},R.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?p(this,a):b&&this.addRange(a[0])}}R.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new A("INDEX_SIZE_ERR");return this._ranges[a]};var T;if(F)T=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=w.getBody(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==C?m(b):k(c)?l(b,c):g(b)};else if(x.isHostMethod(G,"getRangeAt")&&"number"==typeof G.rangeCount)T=function(b){if(P&&E&&b.docSelection.type==C)m(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));e(b,b._ranges[b.rangeCount-1],V(b.nativeSelection)),b.isCollapsed=t(b)}else g(b)};else{if(!J||typeof G.isCollapsed!=u||typeof H.collapsed!=u||!a.features.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;T=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=Q(c,0),a._ranges=[b],a.rangeCount=1,f(a),a.isCollapsed=t(a)):g(a)}}R.refresh=function(a){var b=a?this._ranges.slice(0):null;if(T(this),a){var c=b.length;if(c!=this._ranges.length)return!1;for(;c--;)if(!y.rangesEqual(b[c],this._ranges[c]))return!1;return!0}};var U=function(a,b){var c=a.getAllRanges(),d=!1;a.removeAllRanges();for(var e=0,f=c.length;f>e;++e)d||b!==c[e]?a.addRange(c[e]):d=!0;a.rangeCount||g(a)};R.removeRange=P?function(a){if(this.docSelection.type==C){for(var b,c=this.docSelection.createRange(),d=j(a),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),m(this)}else U(this,a)}:function(a){U(this,a)};var V;!F&&J&&a.features.implementsDomRange?(V=function(a){var b=!1;return a.anchorNode&&(b=1==w.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b},R.isBackwards=function(){return V(this)}):V=R.isBackwards=function(){return!1},R.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},R.collapse=function(b,c){q(this,b);var d=a.createRange(w.getDocument(b));d.collapseToPoint(b,c),this.removeAllRanges(),this.addRange(d),this.isCollapsed=!0},R.collapseToStart=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},R.collapseToEnd=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},R.selectAllChildren=function(b){q(this,b);var c=a.createRange(w.getDocument(b));c.selectNodeContents(b),this.removeAllRanges(),this.addRange(c)},R.deleteFromDocument=function(){if(P&&E&&this.docSelection.type==C){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),a.parentNode.removeChild(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}},R.getAllRanges=function(){return this._ranges.slice(0)},R.setSingleRange=function(a){this.setRanges([a])},R.containsNode=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(this._ranges[c].containsNode(a,b))return!0;return!1},R.toHtml=function(){var a="";if(this.rangeCount){for(var b=y.getRangeDocument(this._ranges[0]).createElement("div"),c=0,d=this._ranges.length;d>c;++c)b.appendChild(this._ranges[c].cloneContents());a=b.innerHTML}return a},R.getName=function(){return"WrappedSelection"},R.inspect=function(){return r(this)},R.detach=function(){this.win[v]=null,this.win=this.anchorNode=this.focusNode=null},o.inspect=r,a.Selection=o,a.selectionPrototype=R,a.addCreateMissingNativeApiListener(function(b){"undefined"==typeof b.getSelection&&(b.getSelection=function(){return a.getSelection(this)}),b=null})}),rangy.createModule("SaveRestore",function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=k.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(l)),f.insertNode(c),f.detach(),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),g.parentNode.removeChild(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(e){e=e||window;var g=e.document;if(!a.isSelectionValid(e))return void b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.");var h,i,j,k=a.getSelection(e),l=k.getAllRanges(),m=[];l.sort(f);for(var n=0,o=l.length;o>n;++n)j=l[n],j.collapsed?(i=d(j,!1),m.push({markerId:i.id,collapsed:!0})):(i=d(j,!1),h=d(j,!0),m[n]={startMarkerId:h.id,endMarkerId:i.id,collapsed:!1,backwards:1==l.length&&k.isBackwards()});for(n=o-1;n>=0;--n)j=l[n],j.collapsed?j.collapseBefore(c(m[n].markerId,g)):(j.setEndBefore(c(m[n].endMarkerId,g)),j.setStartAfter(c(m[n].startMarkerId,g)));return k.setRanges(l),{win:e,doc:g,rangeInfos:m,restored:!1}}function h(d,f){if(!d.restored){for(var g,h,i=d.rangeInfos,j=a.getSelection(d.win),k=[],l=i.length,m=l-1;m>=0;--m){if(g=i[m],h=a.createRange(d.doc),g.collapsed){var n=c(g.markerId,d.doc);if(n){n.style.display="inline";var o=n.previousSibling;o&&3==o.nodeType?(n.parentNode.removeChild(n),h.collapseToPoint(o,o.length)):(h.collapseBefore(n),n.parentNode.removeChild(n))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(d.doc,h,g.startMarkerId,!0),e(d.doc,h,g.endMarkerId,!1);1==l&&h.normalizeBoundaries(),k[m]=h}1==l&&f&&a.features.selectionHasExtend&&i[0].backwards?(j.removeAllRanges(),j.addRange(k[0],!0)):j.setRanges(k),d.restored=!0}}function i(a,b){var d=c(b,a);d&&d.parentNode.removeChild(d)}function j(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?i(a.doc,b.markerId):(i(a.doc,b.startMarkerId),i(a.doc,b.endMarkerId))}a.requireModules(["DomUtil","DomRange","WrappedRange"]);var k=a.dom,l="ï»¿";a.saveSelection=g,a.restoreSelection=h,a.removeMarkerElement=i,a.removeMarkers=j}),WYMeditor.SKINS.compact={init:function(a){jQuery(a._options.containersSelector+", "+a._options.classesSelector,a._box).appendTo(jQuery("div.wym_area_top",a._box)).addClass("wym_dropdown").css({"margin-right":"10px",width:"120px","float":"left"}),jQuery(a._options.toolsSelector,a._box).addClass("wym_buttons").css({"margin-right":"10px","float":"left"}),jQuery(".wym_section",a._box).hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")});var b=a._options.postInit;a._options.postInit=function(a){b&&b.call(a,a),a.$body().css("background-color","#f0f0f0")}}},WYMeditor.SKINS["default"]={init:function(a){jQuery(a._box).find(a._options.classesSelector).addClass("wym_panel"),jQuery(a._box).find(a._options.toolsSelector).addClass("wym_buttons"),jQuery(a._box).find(a._options.containersSelector).addClass("wym_dropdown").find(WYMeditor.H2).append("<span> ></span>"),jQuery(a._box).find("div.wym_area_right ul").parents("div.wym_area_right").show().parents(a._options.boxSelector).find("div.wym_area_main").css({"margin-right":"155px"}),jQuery(a._box).find("div.wym_area_left ul").parents("div.wym_area_left").show().parents(a._options.boxSelector).find("div.wym_area_main").css({"margin-left":"155px"}),jQuery(a._box).find(".wym_section").hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")})}},WYMeditor.SKINS.legacy={init:function(a){jQuery(a._box).find(a._options.classesSelector).addClass("wym_panel"),jQuery(a._box).find(a._options.toolsSelector).addClass("wym_buttons"),jQuery(a._box).find(a._options.containersSelector).addClass("wym_dropdown").find(WYMeditor.H2).append("<span> ></span>"),jQuery(a._box).find("div.wym_area_right ul").parents("div.wym_area_right").show().parents(a._options.boxSelector).find("div.wym_area_main").css({"margin-right":"155px"}),jQuery(a._box).find("div.wym_area_left ul").parents("div.wym_area_left").show().parents(a._options.boxSelector).find("div.wym_area_main").css({"margin-left":"155px"}),jQuery(a._box).find(".wym_section").hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")})}},jQuery.fn.selectify=function(){var a=this;return a.each(function(){var a=this;jQuery(a).hover(function(){var a=this;jQuery("h2",a).css("background-position","0px -18px"),jQuery("ul",a).fadeIn("fast")},function(){var a=this;jQuery("h2",a).css("background-position",""),jQuery("ul",a).fadeOut("fast")})})},WYMeditor.SKINS.minimal={init:function(a){jQuery(a._box).find(a._options.toolsSelector+", "+a._options.containersSelector+", "+a._options.classesSelector).addClass("wym_dropdown").selectify()}},function(a){var b=function(b,c){this.options=a.extend({},a.fn.wymAffix.defaults,c),this.$window=a(window),this.$window.bind("scroll.affix.data-api",a.proxy(this.checkPosition,this)),this.$window.bind("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){var a,b=this.$window.scrollTop(),c=this.options.offset,d=c.bottom,e=c.top,f="affix affix-top affix-bottom",g=!0,h=!0;"object"!=typeof c&&(d=e=c),"function"==typeof e&&(e=c.top()),"function"==typeof d&&(d=c.bottom()),null!==e&&(g=b>e),null!==d&&(h=b+this.$element.height()<d),a=g&&h?"affix":h===!1?"affix-bottom":"affix-top",this.currentAffixType!==a&&(this.$element.removeClass(f).addClass(a),this.currentAffixType=a)},a.fn.wymAffix=function(c){var d=this;return d.each(function(){var d=this,e=a(d),f=e.data("affix"),g="object"==typeof c&&c;f||e.data("affix",f=new b(d,g)),"string"==typeof c&&f[c]()})},a.fn.wymAffix.Constructor=b,a.fn.wymAffix.defaults={offset:0}}(jQuery),WYMeditor.SKINS.seamless={OPTS:{iframeHtml:["",'<div class="wym_iframe wym_section">','<iframe src="'+WYMeditor.IFRAME_BASE_PATH+'wymiframe.html" ','frameborder="0" ','border="0" ','scrolling="no" ','marginheight="0px" ','marginwidth="0px" ',">","</iframe>","</div>"].join(""),initIframeCheckFrequency:50,imagesLoadedCheckFrequency:300,imagesLoadedCheckTimeout:5e3},init:function(a){var b=WYMeditor.SKINS.seamless;Date.now||(Date.now=function(){return(new Date).getTime()}),a.seamlessSkinOpts=jQuery.extend(b.OPTS,{initialIframeResizeTimer:null,resizeAfterImagesLoadTimer:null,_imagesLoadedCheckStartedTime:0,minimumHeight:jQuery(a._element).height()}),b.initUIChrome(a),jQuery(a._element).bind(WYMeditor.EVENTS.postIframeInitialization,b.postIframeInit)},postIframeInit:function(a,b){var c=WYMeditor.SKINS.seamless;c.resizeIframeOnceBodyExists(b),jQuery(b._element).bind(WYMeditor.EVENTS.postBlockMaybeCreated,function(){c.resizeAndScrollIfNeeded(b)})},initUIChrome:function(a){var b,c,d=WYMeditor.SKINS.seamless,e=jQuery([a._options.containersSelector,a._options.classesSelector].join(", "),a._box);c=jQuery("div.wym_area_top",a._box),e.appendTo(c),e.addClass("wym_dropdown"),jQuery(".wym_dropdown",a._box).click(function(){var a=this;jQuery(a).toggleClass("hover")}),b=jQuery(a._options.toolsSelector,a._box),b.addClass("wym_buttons"),d.affixTopControls(a)},affixTopControls:function(a){var b,c,d,e,f=5;b=jQuery("div.wym_area_top",a._box),c=jQuery('<div class="wym_skin_seamless wym_area_top_wrapper">'),b.wrap(c),c=b.parent(),c.wrap('<div class="wym_area_top_affix_placeholder">'),e=c.parent(),e.height(b.height()),d=function(){c.width(e.width())},d(),jQuery(window).resize(d),c.wymAffix({offset:{top:function(){return e.offset().top-f},bottom:function(){return e.offset().top+a.seamlessSkinIframeHeight}}})},resizeIframeOnceBodyExists:function(a){var b,c=WYMeditor.SKINS.seamless;return a.seamlessSkinOpts.initialIframeResizeTimer&&(window.clearTimeout(a.seamlessSkinOpts.initialIframeResizeTimer),a.seamlessSkinOpts.initialIframeResizeTimer=null),"undefined"==typeof a._doc.body||null===a._doc.body?void(a.seamlessSkinOpts.initialIframeResizeTimer=window.setTimeout(function(){c.resizeIframeOnceBodyExists(a)},a.seamlessSkinOpts.initIframeCheckFrequency)):(b=a._doc.body.scrollHeight,c.resizeIframe(a),void c.resizeIframeOnceImagesLoaded(a))},resizeIframeOnceImagesLoaded:function(a){var b,c,d,e=WYMeditor.SKINS.seamless,f=0,g=!0,h=a.seamlessSkinOpts;if(("undefined"==typeof h._imagesLoadedCheckStartedTime||0===h._imagesLoadedCheckStartedTime)&&(h._imagesLoadedCheckStartedTime=Date.now()),null!==h.resizeAfterImagesLoadTimer&&(window.clearTimeout(h.resizeAfterImagesLoadTimer),h.resizeAfterImagesLoadTimer=null),b=a.$body().find("img"),c=b.length,0!==c){for(f=0;c>f;f+=1)if(!e._imageIsLoaded(b[f])){g=!1;break}return e.resizeAndScrollIfNeeded(a),g===!0?void(h._imagesLoadedCheckStartedTime=0):(d=Date.now()-h._imagesLoadedCheckStartedTime,d>h.imagesLoadedCheckTimeout?void(h._imagesLoadedCheckStartedTime=0):void(h.resizeAfterImagesLoadTimer=window.setTimeout(function(){e.resizeIframeOnceImagesLoaded(a)},h.imagesLoadedCheckFrequency)))}},_imageIsLoaded:function(a){return a.complete!==!0?!1:"undefined"!=typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},_getIframeHeightStrategy:function(a){var b,c,d,e,f;return c=jQuery(a._doc).children().eq(0),b=a._doc.body.scrollHeight,d=c.height(),e=c[0].scrollHeight,f=d>=b?function(a){var b=jQuery(a._doc).children().eq(0),c=b.height();return c}:b>e?function(a){return a._doc.body.scrollHeight}:function(a){var b=jQuery(a._doc).children().eq(0),c=b[0].scrollHeight;return c-10}},resizeIframe:function(a){var b,c=WYMeditor.SKINS.seamless,d=jQuery(a._iframe),e=d.height();return"undefined"==typeof WYMeditor.IFRAME_HEIGHT_GETTER&&(WYMeditor.IFRAME_HEIGHT_GETTER=c._getIframeHeightStrategy(a)),b=WYMeditor.IFRAME_HEIGHT_GETTER(a),b<a.seamlessSkinOpts.minimumHeight&&(b=a.seamlessSkinOpts.minimumHeight),e!==b?(d.height(b),a.seamlessSkinIframeHeight=b,!0):!1},scrollIfNeeded:function(a){var b,c,d,e,f=jQuery(a._iframe).offset(),g=f.top,h=jQuery(a.selectedContainer()),i=h.offset(),j=20,k=jQuery(window),l=jQuery(document.body);0!==h.length&&(c=g+i.top,c+=h.outerHeight(),b=k.scrollTop()+k.height(),e=c-b,e>0&&(d=l.scrollTop()+e+j,l.scrollTop(d)))},resizeAndScrollIfNeeded:function(a){var b=WYMeditor.SKINS.seamless,c=b.resizeIframe(a);c===!0&&b.scrollIfNeeded(a)}},jQuery.fn.selectify=function(){var a=this;return a.each(function(){var a=this;jQuery(a).hover(function(){var a=this;jQuery("h2",a).css("background-position","0px -18px"),jQuery("ul",a).fadeIn("fast")},function(){var a=this;jQuery("h2",a).css("background-position",""),jQuery("ul",a).fadeOut("fast")})})},WYMeditor.SKINS.silver={init:function(a){jQuery(a._box).append('<div class="clear"></div>').wrapInner('<div class="wym_inner"></div>'),jQuery(a._box).find(a._options.classesSelector).addClass("wym_panel"),jQuery(a._box).find(a._options.toolsSelector).addClass("wym_buttons"),jQuery(a._box).find(a._options.containersSelector).addClass("wym_dropdown").selectify(),jQuery(a._box).find("div.wym_area_right ul").parents("div.wym_area_right").show().parents(a._options.boxSelector).find("div.wym_area_main").css({"margin-right":"155px"}),jQuery(a._box).find("div.wym_area_left ul").parents("div.wym_area_left").show().parents(a._options.boxSelector).find("div.wym_area_main").css({"margin-left":"155px"}),jQuery(a._box).find(".wym_section").hover(function(){var a=this;jQuery(a).addClass("hover")},function(){var a=this;jQuery(a).removeClass("hover")})}},WYMeditor.SKINS.twopanels={init:function(a){jQuery(a._box).find(a._options.containersSelector).appendTo("div.wym_area_left"),jQuery(a._box).find(a._options.classesSelector+", "+a._options.containersSelector).addClass("wym_panel"),jQuery(a._box).find(a._options.toolsSelector).addClass("wym_buttons"),jQuery(a._box).find("div.wym_area_right ul").parents("div.wym_area_right").show().parents(a._options.boxSelector).find("div.wym_area_main").css({"margin-right":"155px"}),jQuery(a._box).find("div.wym_area_left ul").parents("div.wym_area_left").show().parents(a._options.boxSelector).find("div.wym_area_main").css({"margin-left":"115px"}),jQuery(a._box).find(".wym_section").hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")})}};