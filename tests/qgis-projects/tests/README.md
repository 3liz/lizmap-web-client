# Tests projects

## Project files

In this directory for every test you will find :

* a QGIS project (*.qgs) saved with the [qgis_trackable_project_files plugin](https://github.com/opengisch/qgis_trackable_project_files)
* a Lizmap configuration (*.qgs.cfg)
* an optional markdown describing the manual tests scenarios (*.md)

Those files share the same name, only extension is different.

## Data

The PostgreSQL dump (schema + data) `tests_dataset.sql` contains all data to run tests.
* Command to dump (don't forget to remove data generated by running tests before) :
    * All data : `pg_dump -d "service=lizmapdb" --no-owner --no-acl -n tests_projects -f tests_dataset.sql`
    * Some tables : `pg_dump -d "service=lizmapdb" -t tests_projects.XXX -t tests_projects.YYY --no-owner --no-acl -n tests_projects -f to_merge.sql`
    * Using the docker container `./lizmap-ctl dump-pgsql`

* Commands to restore :
  ```bash
  # Add all the tables and data in the schema tests_dataset
  psql service=lizmapdb -f tests_dataset.sql
  ```

## Deploy on snap

```bash
./deploy_snap.sh $PWD/ ${SERVICE_SNAP_3_9} lizmap_3_9
```
