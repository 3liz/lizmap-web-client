name: "ðŸŽ³ Unit tests"

on:
  push:
    branches:
      - master
      - release_3_*
  pull_request:
    branches:
      - master
      - release_3_*

jobs:
  tests:
    name: "php-unit"
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
          - php-version: "7.4"
            php-unit: "9.6.34"
          - php-version: "8.0"
            php-unit: "9.6.34"
          - php-version: "8.1"
            php-unit: "10.5.63"
          - php-version: "8.2"
            php-unit: "11.5.50"
    steps:

      - name: Check out repository
        uses: actions/checkout@v3

      - name: Setup PHP with tools
        uses: shivammathur/setup-php@v2
        with:
          php-version: ${{ matrix.php-version }}
          tools: php-cs-fixer, phpunit

      - name: Running tests
        run: make tests
